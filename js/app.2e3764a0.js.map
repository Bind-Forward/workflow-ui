{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/ChartView/plugins/zoomControl/ZoomControl.vue?dcf2","webpack:///./src/components/ChartView/ChartView.vue?93c1","webpack:///./src/components/ChartView/plugins/draggableBackground/DraggableBg.vue?45de","webpack:///./src/App.vue?74c1","webpack:///./src/components/PresetNodes/DefaultFlowNode.vue?f0e7","webpack:///./src/components/PresetNodes/Demo.vue?3f90","webpack:///./src/App.vue?b7f0","webpack:///./src/components/ChartView/ChartView.vue?ec60","webpack:///./src/components/ChartView/DrawPart.vue?32ab","webpack:///./src/components/ChartView/Item.ts","webpack:///./src/components/ChartView/NodeItem.ts","webpack:///./src/components/ChartView/EdgeItem.ts","webpack:///./src/components/ChartView/jsplumbDefaultConfig.ts","webpack:///./src/components/ChartView/utils.ts","webpack:///./src/components/ChartView/DrawPart.vue?33ef","webpack:///./src/components/ChartView/DrawPart.vue?81e8","webpack:///./src/components/ChartView/DrawPart.vue","webpack:///./src/components/ChartView/PluginLayer.vue?872b","webpack:///./src/components/ChartView/PluginLayer.vue","webpack:///./src/components/ChartView/PluginLayer.vue?9034","webpack:///./src/components/ChartView/ChartView.vue?3b00","webpack:///./src/components/ChartView/ChartView.vue?9350","webpack:///./src/components/ChartView/ChartView.vue","webpack:///./src/components/ChartView/DraggableNodeType.ts","webpack:///./src/components/ChartView/plugins/draggableBackground/DraggableBg.vue?076e","webpack:///./src/components/ChartView/plugins/draggableBackground/DraggableBg.vue?97ad","webpack:///./src/components/ChartView/plugins/draggableBackground/DraggableBg.vue?57dd","webpack:///./src/components/ChartView/plugins/draggableBackground/DraggableBg.vue","webpack:///./src/components/ChartView/plugins/draggableBackground/index.ts","webpack:///./src/components/ChartView/plugins/zoomControl/ZoomControl.vue?53bb","webpack:///./src/components/ChartView/plugins/zoomControl/ZoomControl.vue?f809","webpack:///./src/components/ChartView/plugins/zoomControl/ZoomControl.vue?30d3","webpack:///./src/components/ChartView/plugins/zoomControl/ZoomControl.vue","webpack:///./src/components/ChartView/plugins/zoomControl/index.ts","webpack:///./src/components/ChartView/main.ts","webpack:///./src/components/PresetNodes/Demo.vue?0d78","webpack:///src/components/PresetNodes/Demo.vue","webpack:///./src/components/PresetNodes/Demo.vue?85e1","webpack:///./src/components/PresetNodes/Demo.vue","webpack:///./src/components/PresetNodes/DefaultFlowNode.vue?85c8","webpack:///src/components/PresetNodes/DefaultFlowNode.vue","webpack:///./src/components/PresetNodes/DefaultFlowNode.vue?9563","webpack:///./src/components/PresetNodes/DefaultFlowNode.vue","webpack:///src/App.vue","webpack:///./src/App.vue?a7d1","webpack:///./src/App.vue","webpack:///./src/main.ts","webpack:///./src/components/ChartView/DrawPart.vue?9113"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","_l","map","v","nodeType","task","taskType","item","index","directives","rawName","expression","_s","ref","label","onClick","node","contextMenuClick","on","nodeCreated","nodeSelected","nodeDeletedHandler","edgeSelected","edgeConnected","currentEditingItem","itemType","id","domProps","$event","target","composing","$set","$$selectedVal","Array","filter","options","selected","val","_value","multiple","updateItem","deleteItem","printPrevNodes","staticStyle","logData","staticRenderFns","style","preventHandler","dropHandler","plugins","itemBlurHandler","left","x","top","y","nodeDblclickHandler","_b","tag","vm","itemInfo","uuid","jsplumbInstance","nodeInfo","setTimeout","setDefaultCfg","setDraggable","cloneNodeInfo","assign","flag","dom","classList","add","remove","common","allowLoopback","chart","getJsplumbInstance","addEndpoint","isSource","anchors","endpoint","radius","cssClass","hoverClass","isTarget","width","height","draggable","stop","e","pos","nodes","edgeInfo","sourceId","targetId","connection","connect","setData","initOverlays","originalEvent","stopPropagation","setSelected","apiEmit","overlayId","overlayCfg","overlay","getOverlay","setLabel","addOverlay","setCondition","condition","addClass","setHover","removeClass","uuids","setOverLay","location","createEdge","MaxConnections","Connector","curviness","PaintStyle","HoverPaintStyle","stroke","strokeWidth","nextMacroTask","timeout","Promise","resolve","findNodeElement","element","parentElement","tagName","dataset","nodetype","NODE_TYPES","getInstance","importDefaults","container","$refs","setContainer","ready","info","edges","forEach","edge","params","dropEndpoint","Error","connExist","connections","some","conn","console","log","getId","getConnections","getData","event","nodeElement","vmCfg","component","h","getPreviousNodeIds","nodeId","originNodeId","findPrevNodeIds","nId","prevIds","prevId","includes","payloadInterception","payload","entries","reduce","newPayload","getSize","size","PLUGINS","drawPart","reset","initNodes","initEdges","initJsplumbEvents","chartData","initChart","fnMap","deleteNode","deleteEdge","updateNode","updateEdge","getNodes","getEdges","find","currNode","prevNodeIds","getNodeById","findIndex","allConnections","currConn","deleteConnection","error","updateTask","currEdge","preventDefault","dataTransfer","TypeError","boundRect","$el","getBoundingClientRect","clientX","clientY","CURR_TYPES","keys","join","createNode","JSON","parse","eventName","originEvent","$emit","workSpace","pluginsVNodes","plugin","vnode","registNodeType","componentName","SFC","warn","regist","functional","render","ctx","props","default","components","DrawPart","PluginLayer","draggableNodetype","inserted","el","binding","ondragstart","evt","stringify","ondragend","ondragover","backgroundPosition","dragView","isDragging","startX","startY","nodeListStyle","deltaX","deltaY","moveHandler","leftStr","parseFloat","topStr","drawLayerDom","chartViewVm","drawLayer","position","addEventListener","mousedownHandler","mousemoveHandler","document","body","mouseupHandler","removeEventListener","bgComp","class","disabled","minusDisabled","change","defaultIncrement","zoomRate","addDisabled","delta","zoom","transform","setZoom","registPlugins","DraggableNodeType","methods","compTitle","color","mainColor","borderTopColor","status","title","type","String","validator","computed","未开始","执行中","执行成功","执行失败","ChartView","menuLabel","config","productionTip","App","$mount"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrB,IAAO,GAGJK,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU6B,QAGnC,IAAIC,EAASF,EAAiB5B,GAAY,CACzCK,EAAGL,EACH+B,GAAG,EACHF,QAAS,IAUV,OANAf,EAAQd,GAAUW,KAAKmB,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOC,GAAI,EAGJD,EAAOD,QAKfH,EAAoBM,EAAIlB,EAGxBY,EAAoBO,EAAIL,EAGxBF,EAAoBQ,EAAI,SAASL,EAASM,EAAMC,GAC3CV,EAAoBW,EAAER,EAASM,IAClC3B,OAAO8B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEV,EAAoBe,EAAI,SAASZ,GACX,qBAAXa,QAA0BA,OAAOC,aAC1CnC,OAAO8B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DpC,OAAO8B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKxC,OAAOyC,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBxC,OAAO8B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBQ,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAJ,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASgB,EAAQC,GAAY,OAAO9C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQC,IAGzG5B,EAAoB6B,EAAI,gBAExB,IAAIC,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAW3C,KAAKsC,KAAKK,GAC5CA,EAAW3C,KAAOf,EAClB0D,EAAaA,EAAWG,QACxB,IAAI,IAAItD,EAAI,EAAGA,EAAImD,EAAWjD,OAAQF,IAAKP,EAAqB0D,EAAWnD,IAC3E,IAAIU,EAAsB2C,EAI1BzC,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,+HCvJT,yBAA2mB,EAAG,G,yDCA9mB,yBAA+jB,EAAG,G,6DCAlkB,yBAA2mB,EAAG,G,oFCA9mB,yBAAuf,EAAG,G,oCCA1f,yBAAqkB,EAAG,G,yDCAxkB,yBAA0jB,EAAG,G,wHCAzjB,EAAS,WAAa,IAAIyC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,QAAQ,CAACF,EAAG,MAAM,CAACG,YAAY,gBAAgB,CAACH,EAAG,MAAM,CAACG,YAAY,aAAa,CAACP,EAAIQ,GAAG,cAAcJ,EAAG,KAAKJ,EAAIS,GAAI,CAAC,WAAY,WAAY,QAAQC,KAAI,SAAUC,GAAK,MAAO,CAAEC,SAAUD,EAAGE,KAAM,CAACC,SAAU,eAAiB,SAASC,EAAKC,GAAO,OAAOZ,EAAG,KAAK,CAACa,WAAW,CAAC,CAAC1C,KAAK,qBAAqB2C,QAAQ,uBAAuBlC,MAAM,EAAOmC,WAAW,SAAS7B,IAAI0B,EAAMT,YAAY,kBAAkB,CAACP,EAAIQ,GAAG,IAAIR,EAAIoB,GAAGL,EAAKH,UAAU,UAAS,KAAKR,EAAG,YAAY,CAACiB,IAAI,QAAQf,MAAM,CAAC,MAAQ,QAAQ,OAAS,QAAQ,gBAAkB,CAC7oB,CAAEgB,MAAO,KAAMC,QAAS,SAAUC,GAAQ,OAAOxB,EAAIyB,iBAAiBD,EAAM,QAC5E,CAAEF,MAAO,KAAMC,QAAS,SAAUC,GAAQ,OAAOxB,EAAIyB,iBAAiBD,EAAM,UAC3EE,GAAG,CAAC,eAAe1B,EAAI2B,YAAY,gBAAgB3B,EAAI4B,aAAa,eAAe5B,EAAI6B,mBAAmB,gBAAgB7B,EAAI8B,aAAa,iBAAiB9B,EAAI+B,kBAAkB,GAAG3B,EAAG,MAAM,CAACG,YAAY,aAAa,CAACH,EAAG,KAAK,CAACJ,EAAIQ,GAAG,KAAKR,EAAIoB,GAAGpB,EAAIgC,mBAAmBC,aAAa7B,EAAG,MAAM,CAACA,EAAG,MAAM,CAACJ,EAAIQ,GAAG,OAAOR,EAAIoB,GAAGpB,EAAIgC,mBAAmBE,OAAO9B,EAAG,MAAM,CAACJ,EAAIQ,GAAG,cAAcR,EAAIoB,GAAGpB,EAAIgC,mBAAmBpB,aAAaR,EAAG,MAAM,CAACA,EAAG,MAAMA,EAAG,KAAK,CAACJ,EAAIQ,GAAG,UAAUJ,EAAG,MAAMA,EAAG,IAAI,CAACJ,EAAIQ,GAAG,YAAYJ,EAAG,QAAQ,CAACa,WAAW,CAAC,CAAC1C,KAAK,QAAQ2C,QAAQ,UAAUlC,MAAOgB,EAAIgC,mBAAmBnB,KAAU,MAAEM,WAAW,kCAAkCb,MAAM,CAAC,KAAO,QAAQ6B,SAAS,CAAC,MAASnC,EAAIgC,mBAAmBnB,KAAU,OAAGa,GAAG,CAAC,MAAQ,SAASU,GAAWA,EAAOC,OAAOC,WAAqBtC,EAAIuC,KAAKvC,EAAIgC,mBAAmBnB,KAAM,QAASuB,EAAOC,OAAOrD,aAAaoB,EAAG,IAAI,CAACJ,EAAIQ,GAAG,gBAAgBJ,EAAG,QAAQ,CAACa,WAAW,CAAC,CAAC1C,KAAK,QAAQ2C,QAAQ,UAAUlC,MAAOgB,EAAIgC,mBAAmBnB,KAAc,UAAEM,WAAW,sCAAsCb,MAAM,CAAC,KAAO,QAAQ6B,SAAS,CAAC,MAASnC,EAAIgC,mBAAmBnB,KAAc,WAAGa,GAAG,CAAC,MAAQ,SAASU,GAAWA,EAAOC,OAAOC,WAAqBtC,EAAIuC,KAAKvC,EAAIgC,mBAAmBnB,KAAM,YAAauB,EAAOC,OAAOrD,aAAaoB,EAAG,IAAI,CAACJ,EAAIQ,GAAG,aAAaJ,EAAG,SAAS,CAACa,WAAW,CAAC,CAAC1C,KAAK,QAAQ2C,QAAQ,UAAUlC,MAAOgB,EAAIgC,mBAAmBnB,KAAW,OAAEM,WAAW,mCAAmCO,GAAG,CAAC,OAAS,SAASU,GAAQ,IAAII,EAAgBC,MAAM5F,UAAU6F,OAAO3F,KAAKqF,EAAOC,OAAOM,SAAQ,SAASlE,GAAG,OAAOA,EAAEmE,YAAWlC,KAAI,SAASjC,GAAG,IAAIoE,EAAM,WAAYpE,EAAIA,EAAEqE,OAASrE,EAAEO,MAAM,OAAO6D,KAAO7C,EAAIuC,KAAKvC,EAAIgC,mBAAmBnB,KAAM,SAAUuB,EAAOC,OAAOU,SAAWP,EAAgBA,EAAc,OAAO,CAACpC,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,QAAQ,CAACN,EAAIQ,GAAG,SAASJ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,QAAQ,CAACN,EAAIQ,GAAG,SAASJ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACN,EAAIQ,GAAG,UAAUJ,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACN,EAAIQ,GAAG,kBAAkBJ,EAAG,SAAS,CAACsB,GAAG,CAAC,MAAQ,SAASU,GAAQ,OAAOpC,EAAIgD,WAAWhD,EAAIgC,mBAAmBC,SAAUjC,EAAIgC,mBAAmBE,GAAIlC,EAAIgC,mBAAmBnB,SAAS,CAACb,EAAIQ,GAAG,iBAAiBJ,EAAG,SAAS,CAACsB,GAAG,CAAC,MAAQ,SAASU,GAAQ,OAAOpC,EAAIiD,WAAWjD,EAAIgC,mBAAmBC,SAAUjC,EAAIgC,mBAAmBE,OAAO,CAAClC,EAAIQ,GAAG,QAAQJ,EAAG,SAAS,CAACsB,GAAG,CAAC,MAAQ,SAASU,GAAQ,OAAOpC,EAAIkD,eAAelD,EAAIgC,mBAAmBE,OAAO,CAAClC,EAAIQ,GAAG,cAAcJ,EAAG,MAAM,CAAC+C,YAAY,CAAC,QAAU,SAAS,CAAC/C,EAAG,SAAS,CAACsB,GAAG,CAAC,MAAQ1B,EAAIoD,UAAU,CAACpD,EAAIQ,GAAG,mBACn+E6C,EAAkB,G,8CCJlB,EAAS,WAAa,IAAIrD,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACG,YAAY,cAAc,CAACH,EAAG,MAAM,CAACiB,IAAI,YAAYd,YAAY,aAAa+C,MAAOtD,EAAiB,cAAE0B,GAAG,CAAC,UAAY1B,EAAIuD,eAAe,SAAWvD,EAAIuD,eAAe,KAAOvD,EAAIwD,cAAc,CAACpD,EAAG,MAAM,CAACG,YAAY,iBAAiB,CAACH,EAAG,eAAe,CAACE,MAAM,CAAC,QAAUN,EAAIyD,YAAY,GAAGrD,EAAG,MAAM,CAACiB,IAAI,YAAYd,YAAY,cAAc,CAACH,EAAG,WAAW,CAACiB,IAAI,QAAQd,YAAY,yBAAyB,QAC7f,EAAkB,G,kOCDlB,EAAS,WAAa,IAAIP,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACiB,IAAI,YAAYd,YAAY,YAAYmB,GAAG,CAAC,MAAQ1B,EAAI0D,kBAAkB1D,EAAIS,GAAIT,EAAS,OAAE,SAASwB,GAAM,OAAOpB,EAAG,MAAM,CAACd,IAAIkC,EAAKU,GAAG3B,YAAY,YAAY+C,MAAM,CAC3QK,KAAMnC,EAAKoC,EAAI,KACfC,IAAKrC,EAAKsC,EAAI,MACbxD,MAAM,CAAC,GAAKkB,EAAKU,GAAG,gBAAgBV,EAAKZ,UAAUc,GAAG,CAAC,SAAW,SAASU,GAAQ,OAAOpC,EAAI+D,oBAAoB3B,EAAQZ,MAAS,CAACpB,EAAGoB,EAAKZ,SAASZ,EAAIgE,GAAG,CAACC,IAAI,aAAa,YAAYzC,EAAKX,MAAK,KAAS,MAAK,IACrN,EAAkB,G,0DCFQ,E,WAU5B,WAAYqD,EAAiBC,GAAe,uBAHrC,KAAAvB,UAAqB,EAI1B3C,KAAKiC,GAAKiC,EAASjC,IAAM,iBAAYkC,OACrCnE,KAAKY,KAAOsD,EAAStD,MAAQ,GAC7BZ,KAAKiE,GAAKA,E,oEAOV,OAAOjE,KAAKiE,GAAGG,oB,0BCnBE,E,wDAMnB,WAAYH,EAAiBI,GAAmB,6BAC9C,cAAMJ,EAAII,GAEV,EAAKV,EAAIU,EAASV,EAClB,EAAKE,EAAIQ,EAASR,EAClB,EAAKlD,SAAW0D,EAAS1D,SAEzB2D,YAAW,WAET,EAAKC,gBAEL,EAAKC,iBACJ,GACH,IAAMC,EAAgB,IAAUJ,GAbc,OAc9C1H,OAAO+H,OAAP/H,OAAA,OAAAA,CAAA,GAAoB8H,GAd0B,E,0DAqB9B7D,GAChBZ,KAAKY,KAAO,IAAUA,K,kCAGL+D,EAAeC,GAChC5E,KAAK4E,IAAMA,EACX5E,KAAKiE,GAAG3B,KAAKtC,KAAM,WAAY2E,GAC3BA,EACFC,EAAIC,UAAUC,IAAI,iBAElBF,EAAIC,UAAUE,OAAO,mB,sCASvB,IAAMC,EAAS,CACbC,eAAe,GAEXC,EAAQlF,KAAKmF,qBAGFD,EAAME,YAAYpF,KAAKiC,GAAI,CAC1CkC,KAAM,OAASnE,KAAKiC,GACpBoD,UAAU,EAEVC,QAAS,CAEP,SAEFC,SAAU,CAAC,MAAO,CAChBC,OAAQ,EACRC,SAAU,YACVC,WAAY,qBAEbV,GAEaE,EAAME,YAAYpF,KAAKiC,GAAI,CACzCkC,KAAM,MAAQnE,KAAKiC,GACnB0D,UAAU,EAEVL,QAAS,CAEP,QAEFC,SAAU,CAAC,YAAa,CACtBK,MAAO,GACPC,OAAQ,GACRJ,SAAU,YACVC,WAAY,qBAEbV,K,qCAMe,WACZE,EAAQlF,KAAKmF,qBACnBD,EAAMY,UAAU9F,KAAKiC,GAAI,CAMvB8D,KAAM,SAACC,GAAgC,qBACtBA,EAAEC,IADoB,GAC9BtC,EAD8B,KAC3BE,EAD2B,KAErC,EAAKF,EAAIA,EACT,EAAKE,EAAIA,S,GAlGqB,GAwGhC,SAAU,EAAWI,EAAiBI,GAC1C,IAAM9C,EAAO,IAAI,EAAS0C,EAAII,GAE9B,OADAJ,EAAGiC,MAAMlJ,KAAKuE,GACPA,E,IC1GY,E,wDAInB,WAAY0C,EAAiBkC,GAAmB,6BAC9C,cAAMlC,EAAIkC,GACV,EAAKC,SAAWD,EAASC,SACzB,EAAKC,SAAWF,EAASE,SAIzB,IAAMC,EAAaH,EAASG,YAAc,EAAKC,QAAQ,EAAKH,SAAU,EAAKC,UAP7B,OAS9CC,EAAWE,QAAX,mBACA,EAAKF,WAAaA,EAClB,EAAKG,aAAaN,GAElBG,EAAWhH,KAAK,YAAY,SAAC0G,EAAGU,GAC9BA,EAAcC,kBAEd,EAAKC,aAAY,GACjB3C,EAAG4C,QAAQ,gBAAX,sBAjB4C,E,0DA0B9BC,EAAmBC,GACnC,IAAMC,EAAUhH,KAAKsG,WAAWW,WAAWH,GAEvCE,EAEFA,EAAQE,SAASH,EAAW,GAAG1F,OAAS,KAGxC0F,EAAW,GAAG9E,GAAK8E,EAAW,GAAG9E,IAAM6E,EAEvC9G,KAAKsG,WAAWa,WAAWJ,M,iCAQbnG,GAChBZ,KAAKY,KAAO,IAAUA,GACtBZ,KAAKoH,aAAaxG,EAAKyG,a,kCAON1C,GACjB3E,KAAK2C,SAAWgC,EACZA,GAEF3E,KAAKsG,WAAWgB,SAAS,iBAEzBtH,KAAKsG,WAAWiB,UAAS,IAGzBvH,KAAKsG,WAAWkB,YAAY,mB,8BAShBpB,EAAkBC,GAChC,OAAOrG,KAAKmF,qBAAqBoB,QAAQ,CACvCkB,MAAO,CACL,OAASrB,EACT,MAAQC,O,mCAQOF,GAEnBnG,KAAK0H,WAAW,QAAS,CAAC,QAAS,CAAEzF,GAAI,QAAS0F,SAAU,IAAM/B,MAAO,EAAGlJ,OAAQ,MAEpFsD,KAAKoH,aAAajB,EAASvF,KAAKyG,a,qCAOS,IAAtBA,EAAsB,uDAAF,GACvCrH,KAAKY,KAAKyG,UAAYA,EACtBrH,KAAK0H,WAAW,YAAa,CAAC,QAAS,CACrCzF,GAAI,YACJZ,MAAOgG,EACPM,SAAU,GACVlC,SAAU,8B,GAxGsB,GA6GhC,SAAUmC,EAAW3D,EAAiBkC,GAC1C,OAAO,IAAI,EAASlC,EAAIkC,GClHX,OACb0B,gBAAiB,EAEjBC,UAAW,CAAC,SAAU,CAAEC,UAAW,KACnCC,WAAY,CAAE,OAAU,OAAQ,YAAe,EAAG,mBAAoB,CAAC,EAAG,IAC1EC,gBAAiB,CAAEC,OAAQ,UAAWC,YAAa,ICL/C,SAAUC,IAAiC,IAAnBC,EAAmB,uDAAD,EAC9C,OAAO,IAAIC,SAAQ,SAACC,GAClBjE,YAAW,WACTiE,MACCF,MC0CP,SAASG,EAAgBC,GACvB,IAAMC,EAAgBD,EAAQC,cAC9B,GAAKA,GAAqC,SAApBD,EAAQE,QAG9B,OAAID,EAAcE,QAAQC,SACjBJ,EAEAD,EAAgBC,EAAQC,eAI5B,IAAMI,EAA6D,GAGrD,EAArB,yG,0BAmBS,EAAA5C,MAAoB,GAEpB,EAAA9B,gBAAmC,aAAQ2E,cArBpD,2DA6BI,IAAM7D,EAAQlF,KAAKoE,gBAEnBc,EAAM8D,eAAe,GAErB,IAAMC,EAAYjJ,KAAKkJ,MAAMD,UAC7B/D,EAAMiE,aAAaF,KAlCvB,gCAwCmB/C,GAAkB,WACjC,OAAO,IAAIoC,SAAQ,SAACC,GAClB,EAAKnE,gBAAgBgF,MAArB,wCAA2B,qGACzBlD,EAAMzF,KAAI,SAAC4I,GAAD,OAAU,EAAW,EAAMA,MADZ,SAEnBjB,IAFmB,OAGzBG,IAHyB,iDA1CjC,gCAqDmBe,GAAkB,WACjC,OAAO,IAAIhB,SAAQ,SAACC,GAClB,EAAKnE,gBAAgBgF,OAAM,WACzBE,EAAMC,SAAQ,SAACC,GAAD,OAAU5B,EAAW,EAAM4B,MACzCjB,YAzDR,0CAkEI,IAAMrD,EAAQlF,KAAKoE,gBACbH,EAAKjE,KAEXkF,EAAM5F,KAAK,cAAc,SAACmK,GAAU,IAE1BC,EAA6BD,EAA7BC,aAAcpD,EAAemD,EAAfnD,WACtB,IAAKoD,EACH,MAAMC,MAAM,iCAGd,IAAMC,EAAYF,EAAaG,YAAYC,MAAK,SAACC,GAAD,OAC7CA,EAAK1D,WAAaC,EAAWD,UAAY0D,EAAK3D,WAAaE,EAAWF,YAEzE,OAAIwD,IAIFhC,EAAW3D,EAAD,eAAC,kBAAQqC,GAAT,IAAqB1F,KAAM,OAE9B,MAIXsE,EAAM5F,KAAK,cAAc,SAAC+J,EAAM3C,GAC9BsD,QAAQC,IAAI,oBACZ,IAAMT,EAAO5B,EAAW3D,EAAI,CAE1BhC,GAAIoH,EAAK/C,WAAW4D,QACpBtJ,KAAM,GACNwF,SAAUiD,EAAKjD,SACfC,SAAUgD,EAAKhD,SACfC,WAAY+C,EAAK/C,aAEnBrC,EAAG4C,QAAQ,iBAAkB2C,QAnGnC,wCAyGIxJ,KAAKkG,MAAMqD,SAAQ,SAAChI,GAEdA,EAAKqD,KACPrD,EAAKqF,aAAY,EAAOrF,EAAKqD,QAIjC5E,KAAKoE,gBAAgB+F,iBAAiBZ,SAAQ,SAACQ,GAC7C,IAAMP,EAAOO,EAAKK,UAClBZ,EAAK5C,aAAY,QAlHvB,0CA0H8ByD,EAAmB9I,GAC7C8I,EAAM1D,kBACN3G,KAAKyD,kBACL,IAAM6G,EAAc/I,EAAKqD,KAAO4D,EAAgB6B,EAAMjI,QAClDkI,IACF/I,EAAKqF,aAAY,EAAM0D,GACvBtK,KAAK6G,QAAQ,gBAAiBtF,OAhIpC,sCAMIjD,EACAiM,GAEA,GAAIzB,EAAWxK,GACb,MAAM,IAAIqL,MAAJ,cAAiBrL,EAAjB,kBAENiM,EAAMjM,KAAOA,EACbwK,EAAWxK,GAAQiM,EACnBvK,KAAKwK,UAAUlM,EAAMiM,GACrBP,QAAQC,IAAInB,EAAY,eAf9B,GAAsC,QAuBjB,gBAAlB,eAAO,Y,8BAvBW,EAAQ,gBAD5B,eAAU,KACU,WC7DgY,I,wBCQjZ0B,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,6BCdM,EAArB,iLAIgBC,GACZ,OAAOA,EAAE,MAAOzK,KAAKwD,aALzB,GAAyC,QAEvC,gBADC,kB,8BADkB,EAAW,gBAD/B,eAAU,KACU,OCLjB,EAAQ,EDKS,IELmY,IDOpZ,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,I,QEkCf,SAASkH,EAAmBC,EAAgBrB,GAC1C,IAAM/L,EAAmB,GACnBqN,EAAeD,EACfE,EAAkB,SAAlBA,EAAmBC,GACvB,IAAMC,EAAUzB,EAAM7G,QAAO,SAAC+G,GAAD,OAAUA,EAAKnD,WAAayE,KAAKrK,KAAI,SAACC,GAAD,OAAOA,EAAE0F,YAO3E,OANA2E,EAAQxB,SAAQ,SAACyB,GACVzN,EAAO0N,SAASD,IAAWA,IAAWJ,IACzCrN,EAAOP,KAAKgO,GACZH,EAAgBG,OAGbzN,GAGT,OADAsN,EAAgBF,GACTpN,EAOT,SAAS2N,EAAoBC,GAC3B,OAAOxO,OAAOyO,QAAQD,GAASE,QAAO,SAACC,EAAD,GAAmD,0BAAfjM,EAAe,KAAVN,EAAU,KAOvF,MANY,OAARM,IACFiM,EAAWjM,GAAON,GAER,SAARM,IACFiM,EAAWjM,GAAO,IAAUN,IAEvBuM,IACN,IAML,SAASC,EAAQC,GACf,MAAuB,kBAATA,EAAoBA,EAAOA,EAAO,KAGlD,IAAMC,EAIA,GAQe,EAArB,yG,0BAuES,EAAAjI,QAAmB,GAvE5B,sHA2EyBtH,GA3EzB,kGA4EUwP,EAAW1L,KAAK0L,SACtBA,EAAStH,gBAAgBuH,QACzBD,EAASxF,MAAQ,GACXA,EAAQ,IAAUhK,EAAKgK,OACvBoD,EAAQ,IAAUpN,EAAKoN,OAhFjC,SAkFUoC,EAASE,UAAU1F,GAlF7B,uBAmFUwF,EAASG,UAAUvC,GAnF7B,cAoFIoC,EAASI,oBApFb,kBAqFWxD,QAAQC,WArFnB,yIAwFiBwD,GACb,OAAO/L,KAAKgM,UAAUD,KAzF1B,4FA+F0B1H,GA/F1B,uGAgGuB,EAAWrE,KAAK0L,SAAU,IAAUrH,IAhG3D,cAgGU9C,EAhGV,gBAiGU6G,IAjGV,OAkGIpI,KAAK6G,QAAQ,eAAgBtF,GAlGjC,2IAwGoBS,EAAoBC,GACpC,IAAMgK,EAAQ,CACZ1K,KAAMvB,KAAKkM,WACX1C,KAAMxJ,KAAKmM,YAEb,OAAOF,EAAMjK,GAAUC,KA7G3B,iCAmHoBD,EAAoBC,EAAYrB,GAChD,IAAMqL,EAAQ,CACZ1K,KAAMvB,KAAKoM,WACX5C,KAAMxJ,KAAKqM,YAEb,OAAOJ,EAAMjK,GAAUC,EAAIrB,KAxH/B,gCA+HI,IAAMsF,EAAQlG,KAAKsM,WACbhD,EAAQtJ,KAAKuM,WACnB,MAAO,CACLrG,MAAOA,EAAMzF,IAAIyK,GACjB5B,MAAOA,EAAM7I,IAAIyK,MAnIvB,kCA0IqBjJ,GACjB,IAAMiE,EAAQlG,KAAK0L,SAASxF,MAC5B,OAAOA,EAAMsG,MAAK,SAACjN,GAAD,OAAOA,EAAE0C,KAAOA,OA5ItC,uCAmJ0B0I,GAAc,MACX3K,KAAKoK,UAAtBlE,EAD4B,EAC5BA,MAAOoD,EADqB,EACrBA,MACTmD,EAAWvG,EAAMsG,MAAK,SAACjL,GAAD,OAAUA,EAAKU,KAAO0I,KAClD,IAAK8B,EACH,MAAM,IAAI9C,MAAJ,kBAAqBgB,EAArB,SAER,IAAM+B,EAAchC,EAAmBC,EAAQrB,GAC/C,OAAOoD,EAAYjM,IAAIT,KAAK2M,eA1JhC,4FAgK2B1K,GAhK3B,8FAiKUyJ,EAAW1L,KAAK0L,SAEtBA,EAAStH,gBAAgBW,OAAO9C,GAE1BlB,EAAQ2K,EAASxF,MAAM0G,WAAU,SAACH,GAAD,OAAcA,EAASxK,KAAOA,MACtD,IAAXlB,EAtKR,sBAuKY,IAAI4I,MAAJ,gBAAmB1H,EAAnB,SAvKZ,cAyKUV,EAAOmK,EAASxF,MAAMnF,GAC5B2K,EAASxF,MAAMtI,OAAOmD,EAAO,GA1KjC,SA2KUqH,IA3KV,gCA4KW7G,GA5KX,uMAkL2BU,GAlL3B,2FAmLUiD,EAAQlF,KAAK0L,SAAStH,gBAEtByI,EAA+B3H,EAAMiF,iBAErC2C,EAAWD,EAAepK,QAAO,SAAC+G,GAAD,OAAUA,EAAKU,UAAYjI,KAAI,GAClE6K,EACF5H,EAAM6H,iBAAiBD,GAEvB9C,QAAQgD,MAAM,gBA3LpB,sMAkM2B/K,EAAYrB,GAlMvC,gGAmMU8K,EAAW1L,KAAK0L,SAChBe,EAAqBf,EAASxF,MAAMzD,QAAO,SAAClB,GAAD,OAAUA,EAAKU,KAAOA,KAAI,GACvEwK,EACFA,EAASQ,WAAW,IAAUrM,IAE9BoJ,QAAQgD,MAAR,kBAAyB/K,EAAzB,SAxMN,SA0MUmG,IA1MV,OA2MIpI,KAAK6G,QAAQ,eAAgB,CAC3B5E,GAAIwK,EAASxK,GACbtB,SAAU8L,EAAS9L,SACnBgC,SAAU8J,EAAS9J,SACnB/B,KAAM6L,EAAS7L,OA/MrB,wMAsN2BqB,EAAYrB,GAtNvC,yFAwNUiM,EAA+B7M,KAAK0L,SAAStH,gBAAgB+F,iBAC7D+C,EAAWL,EAEdpM,KAAI,SAAC6F,GAAD,OAAgBA,EAAW8D,aAC/B3H,QAAO,SAAC+G,GAAD,OAAUA,EAAKvH,KAAOA,KAAI,GAChCiL,EACFA,EAASD,WAAWrM,GAEpBoJ,QAAQgD,MAAM,gBAhOpB,6IAwOI,OAAOhN,KAAK0L,SAASxF,MAAMzF,KAAI,SAACc,GAAD,OAAUA,OAxO7C,iCAgPI,IAAMsI,EAA4B7J,KAAK0L,SAAStH,gBAAgB+F,iBAEhE,OAAON,EAAYpJ,KAAI,SAACsJ,GAAD,OAAUA,EAAKK,eAlP1C,kCA+PsBpE,GAClBA,EAAEmH,iBAEF,IAAMxM,EAAWqF,EAAEoH,aAAchD,QAAQ,YACzC,IAAK,IAASzJ,GACZ,MAAM,IAAI0M,UAAU,YAGtB,IAAMC,EAAYtN,KAAK0L,SAAS6B,IAAIC,wBAC9B7J,EAAIqC,EAAEyH,QAAUH,EAAU3J,EAAI,GAC9BE,EAAImC,EAAE0H,QAAUJ,EAAUzJ,EAAI,GAC9B8J,EAAahR,OAAOiR,KAAK9E,GAC/B,IAAK6E,EAAW1C,SAAStK,GACvB,MAAM,IAAIgJ,MAAJ,UAAahJ,EAAb,mCAAgDgN,EAAWE,KAAK,KAAhE,MAGR,IAAMjN,EAAOoF,EAAEoH,aAAchD,QAAQ,QACrCpK,KAAK8N,WAAW,CACdnK,IACAE,IACAlD,WACAC,KAAMmN,KAAKC,MAAMpN,OApRvB,qCAwRyBoF,GAErBA,EAAEmH,mBA1RN,8BAiSkBc,EAAmB9C,EAAe+C,GAGhDlO,KAAKmO,MAAMF,EAAW/C,EAAoBC,MApS9C,gCAuSiB,aACPlH,EAAKjE,KACL4E,EAAM5E,KAAKkJ,MAAMkF,UACjBhK,EAAkBpE,KAAK0L,SAAStH,gBAChCiK,EAAgB5C,EACnBhL,KAAI,SAAC6N,GAAD,OAAYA,EAAOxR,KAAK,EAAM8H,EAAKX,EAAIG,MAC3C3B,QAAO,SAAC8L,GAAD,OAAWA,MACrB,EAAAvO,KAAKwD,SAAQxG,KAAb,uBAAqBqR,MA9SzB,sCAiTIrO,KAAKmO,MAAM,wBAjTf,+BAiDI,OAAOnO,KAAKkJ,MAAMhE,QAjDtB,oCAsDI,MAAO,CACLU,MAAO2F,EAAQvL,KAAK4F,OACpBC,OAAQ0F,EAAQvL,KAAK6F,YAxD3B,8CAKIvH,EACAiM,GAEA,OAAO,EAASiE,eAAelQ,EAAMiM,KARzC,qCAc+BkE,EAAuBC,EAAqB9I,EAAgBC,GAClFD,GAAUC,GACbmE,QAAQ2E,KAAK,sCAEf,IAAMC,EAAS,EAASJ,eAAelP,KAAK,GAC5CsP,EAAOH,EAAe,CACpBnQ,KAAMmQ,EACNI,YAAY,EACZC,OAHoB,SAGbrE,EAAGsE,GACR,IAAI1L,EACAuC,GAASC,IACXxC,EAAQ,CAAEuC,MAAO,GAAF,OAAKA,EAAL,MAAgBC,OAAQ,GAAF,OAAKA,EAAL,QAEvC,IAAM3J,EAAO,CACX8S,MAAOD,EAAIC,MACX3L,SAEF,OAAOoH,EAAEiE,EAAKxS,QA/BtB,oCAwCIsH,GAEAiI,EAAQzO,KAAR,MAAAyO,EAAO,eAASjI,QA1CpB,GAAuC,QAgErC,gBAHC,eAAK,CACJyL,QAAS,O,4BAOX,gBAHC,eAAK,CACJA,QAAS,O,6BA8NX,gBADC,kB,sBAKA,MArSkB,EAAS,gBAN7B,eAAU,CACTC,WAAY,CACVC,SAAA,EACAC,YAAA,MAGiB,WCxGiY,K,oCCQlZ,GAAY,eACd,GACA,EACA,GACA,EACA,KACA,WACA,MAMoB,oBAAX,MAAuB,KAAO,IAE1B,U,QCrBTC,GAAoB,CACxBC,SADwB,SACfC,EAAiBC,GAAyB,IACzCzQ,EAAUyQ,EAAVzQ,MACR,IAAKA,IAAUA,EAAM4B,SACnB,MAAM,IAAIgJ,MAAM,iHAElB5K,EAAM6B,KAAO7B,EAAM6B,MAAQ,GALsB,IAMzCD,EAAmB5B,EAAnB4B,SAAUC,EAAS7B,EAAT6B,KAClB2O,EAAGzJ,WAAY,EACfyJ,EAAGE,YAAc,SAACC,GAChBA,EAAItC,aAAc5G,QAAQ,WAAY7F,GACtC+O,EAAItC,aAAc5G,QAAQ,OAAQuH,KAAK4B,UAAU/O,KAEnD2O,EAAGK,UAAY,SAACF,GAAD,OAASA,EAAIvC,kBAC5BoC,EAAGM,WAAa,SAACH,GAAD,OAASA,EAAIvC,oBAIlB,MCpBX,GAAS,WAAa,IAAIpN,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACG,YAAY,eAAe+C,MAAM,CAAGyM,mBAAoB/P,EAAI+P,uBAClK,GAAkB,GCSD,GAArB,yG,0BAQU,EAAAC,SAAW,CACjBC,YAAY,EACZC,OAAQ,EACRC,OAAQ,GAGF,EAAAC,cAAgB,CACtBzM,KAAM,MACNE,IAAK,OAKC,EAAAkM,mBAAqB,GArB/B,kEAwB0BzF,GACtBrK,KAAK+P,SAAW,CACdC,YAAY,EACZC,OAAQ5F,EAAM1G,EACduM,OAAQ7F,EAAMxG,KA5BpB,uCAiC0BwG,GACtB,GAAIrK,KAAK+P,SAASC,WAAY,CAC5B,IAAMI,EAAS/F,EAAM1G,EAAI3D,KAAK+P,SAASE,OACjCI,EAAShG,EAAMxG,EAAI7D,KAAK+P,SAASG,OACvClQ,KAAK+P,SAASE,OAAS5F,EAAM1G,EAC7B3D,KAAK+P,SAASG,OAAS7F,EAAMxG,EAC7B7D,KAAKsQ,YAAYF,EAAQC,MAvC/B,qCA4CwBhG,GACpBrK,KAAK+P,SAASC,YAAa,IA7C/B,kCAiDqBrM,EAAWE,GAAS,MACf7D,KAAKmQ,cAAnBzM,EAD6B,EAC7BA,KAAME,EADuB,EACvBA,IACR2M,EAAUvQ,KAAKmQ,cAAczM,KAAO8M,WAAW9M,GAAQC,EAAI,KAC3D8M,EAASzQ,KAAKmQ,cAAcvM,IAAM4M,WAAW5M,GAAOC,EAAI,KAE9D7D,KAAK8P,mBAAL,eAAkCS,EAAlC,gBAAiDE,GAEjDzQ,KAAK0Q,aAAarN,MAAMK,KAAO6M,EAC/BvQ,KAAK0Q,aAAarN,MAAMO,IAAM6M,IAzDlC,gCA8DI,IAAMC,EAAe1Q,KAAK0Q,aAAe1Q,KAAK2Q,YAAYzH,MAAM0H,UAChEF,EAAarN,MAAMwN,SAAW,WAE9B7Q,KAAKoO,UAAU0C,iBAAiB,YAAa9Q,KAAK+Q,kBAClD/Q,KAAKoO,UAAU0C,iBAAiB,YAAa9Q,KAAKgR,kBAClDC,SAASC,KAAKJ,iBAAiB,UAAW9Q,KAAKmR,kBAnEnD,sCAuEInH,QAAQC,IAAI,sBACZjK,KAAKoO,UAAUgD,oBAAoB,YAAapR,KAAK+Q,kBACrD/Q,KAAKoO,UAAUgD,oBAAoB,YAAapR,KAAKgR,kBACrDC,SAASC,KAAKE,oBAAoB,UAAWpR,KAAKmR,oBA1EtD,GAAyC,QAGvC,gBADC,kB,mCAID,gBADC,kB,iCALkB,GAAW,gBAD/B,QACoB,cCVua,MCQxb,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCfD,YACZ/C,EACAuC,EACAvM,GAGA,IAAMqG,EAAIkG,EAAYzQ,eAEhBmR,EAAS5G,EAAE,GAAa,CAC5BuE,MAAO,CACL2B,cACAvC,eAGJ,OAAOiD,GClBL,GAAS,WAAa,IAAItR,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACG,YAAY,gBAAgB,CAACH,EAAG,IAAI,CAACG,YAAY,qBAAqBgR,MAAM,CAAC,OAAQ,CAAEC,SAAUxR,EAAIyR,gBAAiB/P,GAAG,CAAC,MAAQ,SAASU,GAAQ,OAAOpC,EAAI0R,QAAQ1R,EAAI2R,sBAAsBvR,EAAG,OAAO,CAACG,YAAY,aAAa,CAACP,EAAIQ,GAAGR,EAAIoB,GAAGpB,EAAI4R,UAAU,OAAOxR,EAAG,IAAI,CAACG,YAAY,mBAAmBgR,MAAM,CAAC,OAAQ,CAAEC,SAAUxR,EAAI6R,cAAenQ,GAAG,CAAC,MAAQ,SAASU,GAAQ,OAAOpC,EAAI0R,QAAQ1R,EAAI2R,yBACvf,GAAkB,GCaD,I,UAArB,yG,0BAMU,EAAAA,iBAAmB,GACnB,EAAAC,SAAW,IAEX,EAAAC,aAAc,EACd,EAAAJ,eAAgB,EAV1B,wDAYiBK,GACb,IAAIF,EAAW3R,KAAK2R,SAAWE,EAC3BF,EAAW,IACbA,EAAW,GACX3R,KAAKwR,eAAgB,GACZG,EAAW,KACpBA,EAAW,IACX3R,KAAK4R,aAAc,IAEnB5R,KAAK4R,aAAc,EACnB5R,KAAKwR,eAAgB,GAEvBxR,KAAK2R,SAAWA,EAEhB,IAAMG,EAAOH,EAAW,IACxB3R,KAAK0Q,aAAarN,MAAM0O,UAAxB,gBAA6CD,EAA7C,KACA9R,KAAKoE,gBAAgB4N,QAAQF,OA5BjC,GAAyC,SAEvC,gBADC,kB,uCAGD,gBADC,kB,oCAHkB,GAAW,gBAD/B,QACoB,cCdua,MCQxb,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCfD,YACZ1D,EACAuC,EACAvM,GAEA,IAAMqG,EAAIkG,EAAYzQ,eAChBwQ,EAAeC,EAAYzH,MAAM0H,UACjCrC,EAAS9D,EAAE,GAAa,CAC5BuE,MAAO,CACL0B,eACAtM,qBAGJ,OAAOmK,GCXT,GAAU0D,cAAc,CAAC,GAAa,KAE/B,IAAM,GAAoBC,GAClB,MCTX,GAAS,WAAa,IAAInS,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,OAAO,CAACA,EAAG,SAAS,CAACG,YAAY,UAAUmB,GAAG,CAAC,MAAQ1B,EAAIkK,MAAM,CAAClK,EAAIQ,GAAG,YACxK,GAAkB,GCMtB,IACEjC,KAAM,OACN0Q,MAAO,CAAC,aACRmD,QAAS,CACPlI,IADJ,WAEMD,QAAQC,IAAI,WAAajK,KAAKoS,cCZyT,MCQzV,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCnBX,GAAS,WAAa,IAAIrS,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACG,YAAY,oBAAoB+C,MAAM,CAC5IgP,MAAOtS,EAAIuS,UACXC,eAAgBxS,EAAIuS,YAClB,CAACnS,EAAG,KAAK,CAACG,YAAY,SAAS4B,SAAS,CAAC,YAAcnC,EAAIoB,GAAGpB,EAAIyS,WAAWrS,EAAG,MAAM,CAACG,YAAY,SAAS,CAAEP,EAAS,MAAEI,EAAG,OAAO,CAAC+B,SAAS,CAAC,YAAcnC,EAAIoB,GAAGpB,EAAI0S,UAAUtS,EAAG,OAAO,CAACG,YAAY,eAAe,CAACP,EAAIQ,GAAG,oBACjO,GAAkB,GCatB,IACEjC,KAAM,kBACN0Q,MAAO,CACLyD,MAAO,CACLC,KAAMC,OACN1D,QAAS,IAEXuD,OAAQ,CACNE,KAAMC,OACN1D,QAAS,MACT2D,UAHN,SAGA,GACQ,IAAR,0CACQ,OAAOjO,KAIbkO,SAAU,CACRP,UADJ,WAEM,IAAN,GACQQ,MAAK,UACLC,MAAK,UACLC,OAAM,UACNC,OAAM,WAER,OAAOxS,EAAIT,KAAKwS,WCzCkV,MCQpW,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QC6Df,sCACElU,KAAM,WACNuQ,YAAY,EACZG,MAAO,CACLyD,MAAOE,QAET7D,OANF,SAMA,SACA,gBACI,OAAOrE,EACX,MACA,CACM,MAAN,CACQ,MAAR,QACQ,OAAR,OACQ,OAAR,iBACQ,WAAR,SAGA,CACA,0BACA,2BACA,SACA,qBACA,MACM,MAAN,CACQ,UAAR,YASA,iCAMA,QACEnM,KAAM,MACN4Q,WAAY,CACVgE,UAAJ,IAEElS,WAAY,CACVqO,kBAAJ,IAEEnT,KARF,WASI,MAAO,CACL6F,mBAAoB,CAClBC,SAAU,GACVpB,KAAM,MAIZuR,QAAS,CACPvQ,mBADJ,SACA,GACMoI,QAAQC,IAAI,SAAU1I,IAExBG,YAJJ,SAIA,GACMsI,QAAQC,IAAI1I,EAAM,YAEpBI,aAPJ,SAOA,GACMqI,QAAQC,IAAI1I,EAAM,mBAClBvB,KAAK+B,mBAAqBpF,OAAO+H,OAAO,CAA9C,qBAGI7C,aAZJ,SAYA,GACMmI,QAAQC,IAAIT,EAAM,gBAClBxJ,KAAK+B,mBAAqBpF,OAAO+H,OAAO,CAA9C,qBAGI3B,WAjBJ,SAiBA,OAEM/C,KAAKkJ,MAAMhE,MAAMnC,WAAWf,EAAUC,EAAIrB,IAE5CoC,WArBJ,SAqBA,KACMhD,KAAKkJ,MAAMhE,MAAMlC,WAAWhB,EAAUC,IAExCT,iBAxBJ,SAwBA,KACMwI,QAAQC,IAAI,WAAlB,qCACwB,OAAdkJ,GACFnT,KAAKkJ,MAAMhE,MAAMlC,WAAW,OAAQqB,EAASpC,KAGjDgB,eA9BJ,SA8BA,GACM,IAAN,uCACM+G,QAAQC,IAAI/D,IAEdpE,cAlCJ,SAkCA,GACMkI,QAAQC,IAAIZ,EAAM,kBAExB,gBAEA,kBAQIlG,QA/CJ,WAgDM,IAAN,6BACM6G,QAAQC,IAAI/N,EAAM,UAGtB,QApEF,WAoEA,wJACA,cACA,WACA,OACA,CACA,OACA,KACA,KACA,oBACA,MACA,eAGA,CACA,OACA,MACA,KACA,oBACA,MACA,aACA,eAGA,CACA,OACA,MACA,KACA,oBACA,MACA,aACA,gBAGA,CACA,OACA,MACA,MACA,oBACA,MACA,cACA,gBAGA,CACA,0CACA,MACA,MACA,oBACA,UAGA,OACA,CACA,8BACA,aACA,aACA,SAEA,CACA,8BACA,aACA,aACA,MACA,kBAGA,CACA,8BACA,aACA,aACA,MACA,iBAGA,CACA,8BACA,aACA,gDACA,SAEA,CACA,8BACA,gDACA,aACA,YAIA,iBACA,+BACA,0BACA,oBACA,KACA,MACA,UAEA,0BAqDA,QArJA,+CC5L8T,MCQ1T,I,UAAY,eACd,GACA,EACAkH,GACA,EACA,KACA,KACA,OAIa,M,QChBf,OAAIgQ,OAAOC,eAAgB,EAE3B,IAAI,OAAI,CACNvE,OAAQ,SAACrE,GAAD,OAAOA,EAAE6I,OAChBC,OAAO,S,yDCPV,yBAA8jB,EAAG","file":"js/app.2e3764a0.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/workflow-ui/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=style&index=0&id=9015bdf8&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=style&index=0&id=9015bdf8&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartView.vue?vue&type=style&index=0&id=356b60a4&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartView.vue?vue&type=style&index=0&id=356b60a4&lang=less&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DraggableBg.vue?vue&type=style&index=0&id=c3c218f8&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DraggableBg.vue?vue&type=style&index=0&id=c3c218f8&lang=less&scoped=true&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=less&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DefaultFlowNode.vue?vue&type=style&index=0&id=31412182&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DefaultFlowNode.vue?vue&type=style&index=0&id=31412182&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demo.vue?vue&type=style&index=0&id=542b64e6&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demo.vue?vue&type=style&index=0&id=542b64e6&scoped=true&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"op-container\"},[_c('div',{staticClass:\"type-list\"},[_vm._v(\" 拖动到绘图区👉 \"),_c('ul',_vm._l((['DemoNode', 'FlowNode', 'Test'].map(function (v) { return ({nodeType: v, task: {taskType: 'Devops'}}); })),function(item,index){return _c('li',{directives:[{name:\"draggable-nodetype\",rawName:\"v-draggable-nodetype\",value:(item),expression:\"item\"}],key:index,staticClass:\"node-type-item\"},[_vm._v(\" \"+_vm._s(item.nodeType)+\" \")])}),0)]),_c('ChartView',{ref:\"chart\",attrs:{\"width\":\"800px\",\"height\":\"600px\",\"contextMenuList\":[\n        { label: '删除', onClick: function (node) { return _vm.contextMenuClick(node, '删除'); } },\n        { label: '编辑', onClick: function (node) { return _vm.contextMenuClick(node, '编辑'); } }\n      ]},on:{\"node-created\":_vm.nodeCreated,\"node-dblclick\":_vm.nodeSelected,\"node-deleted\":_vm.nodeDeletedHandler,\"edge-dblclick\":_vm.edgeSelected,\"edge-connected\":_vm.edgeConnected}})],1),_c('div',{staticClass:\"edit-item\"},[_c('h2',[_vm._v(\"修改\"+_vm._s(_vm.currentEditingItem.itemType))]),_c('div',[_c('div',[_vm._v(\"id: \"+_vm._s(_vm.currentEditingItem.id))]),_c('div',[_vm._v(\"node type: \"+_vm._s(_vm.currentEditingItem.nodeType))]),_c('div',[_c('hr'),_c('h3',[_vm._v(\"task\")]),_c('br'),_c('p',[_vm._v(\" title: \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentEditingItem.task.title),expression:\"currentEditingItem.task.title\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.currentEditingItem.task.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.currentEditingItem.task, \"title\", $event.target.value)}}})]),_c('p',[_vm._v(\" condition: \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentEditingItem.task.condition),expression:\"currentEditingItem.task.condition\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.currentEditingItem.task.condition)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.currentEditingItem.task, \"condition\", $event.target.value)}}})]),_c('p',[_vm._v(\" status: \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentEditingItem.task.status),expression:\"currentEditingItem.task.status\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.currentEditingItem.task, \"status\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"未开始\"}},[_vm._v(\"未开始\")]),_c('option',{attrs:{\"value\":\"执行中\"}},[_vm._v(\"执行中\")]),_c('option',{attrs:{\"value\":\"执行失败\"}},[_vm._v(\"执行失败\")]),_c('option',{attrs:{\"value\":\"执行成功\"}},[_vm._v(\"执行成功\")])])])])]),_c('button',{on:{\"click\":function($event){return _vm.updateItem(_vm.currentEditingItem.itemType, _vm.currentEditingItem.id, _vm.currentEditingItem.task)}}},[_vm._v(\"update item\")]),_c('button',{on:{\"click\":function($event){return _vm.deleteItem(_vm.currentEditingItem.itemType, _vm.currentEditingItem.id)}}},[_vm._v(\"删除\")]),_c('button',{on:{\"click\":function($event){return _vm.printPrevNodes(_vm.currentEditingItem.id)}}},[_vm._v(\"打印前置节点\")])]),_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('button',{on:{\"click\":_vm.logData}},[_vm._v(\"get data\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chart-view\"},[_c('div',{ref:\"workSpace\",staticClass:\"work-space\",style:(_vm.workFlowStyle),on:{\"dragenter\":_vm.preventHandler,\"dragover\":_vm.preventHandler,\"drop\":_vm.dropHandler}},[_c('div',{staticClass:\"plugins-layer\"},[_c('plugin-layer',{attrs:{\"plugins\":_vm.plugins}})],1),_c('div',{ref:\"drawLayer\",staticClass:\"draw-layer\"},[_c('DrawPart',{ref:\"chart\",staticClass:\"node-list-container\"})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"container\",staticClass:\"draw-part\",on:{\"click\":_vm.itemBlurHandler}},_vm._l((_vm.nodes),function(node){return _c('div',{key:node.id,staticClass:\"node-item\",style:({\n      left: node.x + 'px',\n      top: node.y + 'px'\n    }),attrs:{\"id\":node.id,\"data-nodetype\":node.nodeType},on:{\"dblclick\":function($event){return _vm.nodeDblclickHandler($event, node)}}},[_c(node.nodeType,_vm._b({tag:\"component\"},'component',node.task,false))],1)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { IItem, IDrawPartVm } from './index';\nimport { jsPlumbUtil } from 'jsplumb';\nexport default abstract class Item implements IItem {\n  public id: string;\n  // 所有业务数据\n  public task: {\n    [key: string]: any\n  };\n  // 当前连线/节点是否被选择\n  public selected?: boolean = false;\n  public vm: IDrawPartVm;\n\n  constructor(vm: IDrawPartVm, itemInfo: IItem) {\n    this.id = itemInfo.id || jsPlumbUtil.uuid();\n    this.task = itemInfo.task || {};\n    this.vm = vm;\n  }\n\n  public abstract updateTask(task: object): void;\n  public abstract setSelected(flag: boolean, element: Element): void;\n\n  protected getJsplumbInstance() {\n    return this.vm.jsplumbInstance;\n  }\n}\n","import Item from './Item';\nimport cloneDeep from 'lodash/cloneDeep';\nimport { INodeItem, IDrawPartVm } from '.';\nexport default class NodeItem extends Item implements INodeItem {\n  public x: number;\n  public y: number;\n  public nodeType: string;\n  public dom?: HTMLElement; // 只要选择过此节点, 就会被记录, 在节点blur时, 可以只遍历这些被选择过的, 使其取消选择即可\n\n  constructor(vm: IDrawPartVm, nodeInfo: INodeItem) {\n    super(vm, nodeInfo);\n    // 1. 节点基本参数\n    this.x = nodeInfo.x;\n    this.y = nodeInfo.y;\n    this.nodeType = nodeInfo.nodeType;\n    // 2. 初始化图形\n    setTimeout(() => {\n      // 2.1 设置图形参数\n      this.setDefaultCfg();\n      // 2.2 设置节点可拖动\n      this.setDraggable();\n    }, 0);\n    const cloneNodeInfo = cloneDeep(nodeInfo);\n    Object.assign(this, cloneNodeInfo);\n  }\n\n  /**\n   * 更新业务数据\n   * @param task 任务\n   */\n  public updateTask(task: object) {\n    this.task = cloneDeep(task);\n  }\n\n  public setSelected(flag: boolean, dom: HTMLElement) {\n    this.dom = dom;\n    this.vm.$set(this, 'selected', flag);\n    if (flag) {\n      dom.classList.add('node-selected');\n    } else {\n      dom.classList.remove('node-selected');\n    }\n  }\n\n  /**\n   * 设置节点默认jsplumb配置\n   */\n  private setDefaultCfg(): void {\n    // 设置默认连线样式及overlays\n    const common = {\n      allowLoopback: false, // 不可回环\n    };\n    const chart = this.getJsplumbInstance();\n    // todo 这里可以从外部传入设置\n    // **添加起始点**\n    const outPoint = chart.addEndpoint(this.id, {\n      uuid: 'out-' + this.id,\n      isSource: true,\n      // @ts-ignore 有!\n      anchors: [\n        // 'Right', 'Top', 'Left', 'Bottom'\n        'Right',\n      ],\n      endpoint: ['Dot', {\n        radius: 6,\n        cssClass: 'end-point',\n        hoverClass: 'end-point-hover'\n      }]\n    }, common);\n    // **添加结束点**\n    const inPoint = chart.addEndpoint(this.id, {\n      uuid: 'in-' + this.id,\n      isTarget: true,\n      // @ts-ignore 有!\n      anchors: [\n        // 'Left', 'Top', 'Right', 'Bottom'\n        'Left',\n      ],\n      endpoint: ['Rectangle', {\n        width: 10,\n        height: 10,\n        cssClass: 'end-point',\n        hoverClass: 'end-point-hover',\n      }],\n    }, common);\n  }\n\n  /**\n   * 设置节点可拖动\n   */\n  private setDraggable(): void {\n    const chart = this.getJsplumbInstance();\n    chart.draggable(this.id, {\n      // grid: [4, 4],\n      // start: e => {\n      //   console.log('start')\n      // },\n      // 节点拖动结束位置记录\n      stop: (e: { pos: [number, number] }) => {\n        const [x, y] = e.pos;\n        this.x = x;\n        this.y = y;\n      },\n    });\n  }\n}\n\nexport function createNode(vm: IDrawPartVm, nodeInfo: INodeItem): NodeItem {\n  const node = new NodeItem(vm, nodeInfo);\n  vm.nodes.push(node);\n  return node;\n}\n","import Item from './Item';\nimport { IEdgeItem, IDrawPartVm, IItem } from '.';\nimport cloneDeep from 'lodash/cloneDeep';\nimport { Connection, OverlaySpec } from 'jsplumb';\nexport default class EdgeItem extends Item implements IEdgeItem {\n  public sourceId: string;\n  public targetId: string;\n  public connection: Connection;\n  constructor(vm: IDrawPartVm, edgeInfo: IEdgeItem) {\n    super(vm, edgeInfo);\n    this.sourceId = edgeInfo.sourceId;\n    this.targetId = edgeInfo.targetId;\n    // const cloneEdgeInfo = cloneDeep(edgeInfo);\n    // Object.assign(this, cloneEdgeInfo);\n    // jsplumb连接\n    const connection = edgeInfo.connection || this.connect(this.sourceId, this.targetId);\n    // @ts-ignore 🌟 有这个方法!\n    connection.setData(this); // connection.getData()  ->  Edge实例对象\n    this.connection = connection; // edge.connection   -> Connection对象\n    this.initOverlays(edgeInfo);\n    // @ts-ignore\n    connection.bind('dblclick', (e, originalEvent) => {\n      originalEvent.stopPropagation();\n      // this.selected = true\n      this.setSelected(true);\n      vm.apiEmit('edge-dblclick', this);\n    });\n  }\n\n  /**\n   * 设置connection overlay\n   * @param {string} overlayId\n   * @param {OverlaySpec} overlayCfg 参考Connection.addOverlay方法参数\n   */\n  public setOverLay(overlayId: string, overlayCfg: OverlaySpec) {\n    const overlay = this.connection.getOverlay(overlayId);\n    // 已存在此overlay\n    if (overlay) {\n      // @ts-ignore // overlay的声明文件就没写!!!!! 法克\n      overlay.setLabel(overlayCfg[1].label || '');\n    } else { // 不存在overlay\n      // @ts-ignore\n      overlayCfg[1].id = overlayCfg[1].id || overlayId;\n      // @ts-ignore\n      this.connection.addOverlay(overlayCfg);\n    }\n  }\n\n  /**\n   * 更新业务数据\n   * @param task 业务数据对象\n   */\n  public updateTask(task: IItem[\"task\"]) {\n    this.task = cloneDeep(task);\n    this.setCondition(task.condition);\n  }\n\n  /**\n   * 设置当前连线是否已选择\n   * @param {boolean}} flag 是否选择\n   */\n  public setSelected(flag: boolean) {\n    this.selected = flag;\n    if (flag) {\n      // @ts-ignore\n      this.connection.addClass('edge-selected');\n      // @ts-ignore\n      this.connection.setHover(true);\n    } else {\n      // @ts-ignore\n      this.connection.removeClass('edge-selected');\n    }\n  }\n\n  /**\n   * 连接两个节点(本质是连接endpoint)\n   * @param sourceId 来源节点id\n   * @param targetId 目标节点id\n   */\n  private connect(sourceId: string, targetId: string) {\n    return this.getJsplumbInstance().connect({\n      uuids: [\n        'out-' + sourceId,\n        'in-' + targetId\n      ]\n    });\n  }\n\n  /**\n   * 初始化 连线箭头 线上文字\n   */\n  private initOverlays(edgeInfo: IEdgeItem) {\n    // 1. 箭头\n    this.setOverLay('arrow', ['Arrow', { id: 'arrow', location: 0.95, width: 9, length: 12 }]);\n    // 2. 设置*文案* 条件\n    this.setCondition(edgeInfo.task.condition);\n  }\n\n  /**\n   * 设置边的条件值\n   * @param {string} condition 条件字符串\n   */\n  private setCondition(condition: string = '') {\n    this.task.condition = condition;\n    this.setOverLay('condition', ['Label', {\n      id: 'condition',\n      label: condition,\n      location: 0.8,\n      cssClass: 'wfui-condition-label'\n    }]);\n  }\n}\n\nexport function createEdge(vm: IDrawPartVm, edgeInfo: IEdgeItem) {\n  return new EdgeItem(vm, edgeInfo);\n}\n\n","export default {\n  MaxConnections: -1, // 最大连接数\n  // Connector: ['StateMachine', { curviness: 5 }], // 连线类型, Bezier, Flowchart, StateMachine, Straight\n  Connector: ['Bezier', { curviness: 55 }], // 连线类型, Bezier, Flowchart, StateMachine, Straight\n  PaintStyle: { 'stroke': '#345', 'strokeWidth': 2, 'stroke-dasharray': [2, 2] }, // 连线样式\n  HoverPaintStyle: { stroke: '#00abfb', strokeWidth: 5 }, // hover时连线样式\n  // ConnectionsDetachable: false, // 鼠标拖动是否会断开连线\n};\n","export function nextMacroTask(timeout: number = 0): Promise<void> {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve();\n    }, timeout);\n  });\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * 0. 注册自定义节点\n * 1. 初始化jsplumb\n * 2. 初始化节点\n * 3. 初始化连线\n */\n\nimport { Component, Prop, Vue, Inject } from 'vue-property-decorator';\nimport { FunctionalComponentOptions } from 'vue';\nimport { RecordPropsDefinition } from 'vue/types/options';\nimport { jsPlumb, jsPlumbInstance } from 'jsplumb';\nimport NodeItem, { createNode } from './NodeItem';\nimport EdgeItem, { createEdge } from './EdgeItem';\nimport defaultConfig from './jsplumbDefaultConfig';\nimport _ from 'lodash';\nimport { IDrawPart, INodeItem, IEdgeItem } from './index';\nimport { nextMacroTask } from './utils';\n\n/**\n * 找到带有data-nodetype的节点的子节点\n * 即 用户传入的节点的最外层dom\n */\nfunction findNodeElement(element: HTMLElement): HTMLElement | void {\n  const parentElement = element.parentElement;\n  if (!parentElement || element.tagName === 'BODY') {\n    return;\n  }\n  if (parentElement.dataset.nodetype) {\n    return element;\n  } else {\n    return findNodeElement(element.parentElement as HTMLElement);\n  }\n}\n\nexport const NODE_TYPES: { [name: string]: FunctionalComponentOptions } = {};\n\n@Component({})\nexport default class DrawPart extends Vue implements IDrawPart {\n  /**\n   * 0. 注册节点类型\n   * 注意: 渲染后的节点必须固定宽高\n   */\n  public static registNodeType<Props>(\n    name: string,\n    vmCfg: FunctionalComponentOptions<Props, RecordPropsDefinition<Props>>\n  ): void {\n    if (NODE_TYPES[name]) {\n      throw new Error(`此组件(${name})已存在, 请勿重复注册.`);\n    } else {\n      vmCfg.name = name;\n      NODE_TYPES[name] = vmCfg;\n      this.component(name, vmCfg);\n      console.log(NODE_TYPES, '当前已注册组件');\n    }\n  }\n\n  public nodes: NodeItem[] = [];\n\n  public jsplumbInstance: jsPlumbInstance = jsPlumb.getInstance();\n\n  @Inject('apiEmit') public apiEmit!: (evtName: string, payload?: any) => void;\n\n  /**\n   * 1. 初始化jsplumb\n   */\n  public mounted() {\n    const chart = this.jsplumbInstance;\n    // 1. 导入默认配置\n    chart.importDefaults(defaultConfig);\n    // 2. 设置container\n    const container = this.$refs.container as HTMLElement;\n    chart.setContainer(container);\n  }\n\n  /**\n   * 2. 初始化节点\n   */\n  public initNodes(nodes: INodeItem[]): Promise<void> {\n    return new Promise((resolve) => {\n      this.jsplumbInstance.ready(async () => {\n        nodes.map((info) => createNode(this, info));\n        await nextMacroTask(); // spec 注意, 这里是不得已而为之, 否则会连线失败, 猜测是endpoint渲染顺序问题\n        resolve();\n      });\n    });\n  }\n\n  /**\n   * 3. 初始化连线\n   */\n  public initEdges(edges: IEdgeItem[]): Promise<void> {\n    return new Promise((resolve) => {\n      this.jsplumbInstance.ready(() => {\n        edges.forEach((edge) => createEdge(this, edge));\n        resolve();\n      });\n    });\n  }\n\n  /**\n   * 初始化jsplumb事件\n   */\n  public initJsplumbEvents() {\n    const chart = this.jsplumbInstance;\n    const vm = this;\n    // 避免两个节点中重复拉线 😄拖动生成连线callback\n    chart.bind('beforeDrop', (params) => {\n      // @ts-ignore\n      const { dropEndpoint, connection } = params;\n      if (!dropEndpoint) {\n        throw Error('drop在作为Target的节点上了吗? check it');\n      }\n      // 已存在相同连线\n      const connExist = dropEndpoint.connections.some((conn: IEdgeItem) =>\n        (conn.targetId === connection.targetId && conn.sourceId === connection.sourceId)\n      );\n      if (connExist) {\n        return false;\n      } else {\n      // 3.2 给每个新连线生成默认值\n        createEdge(vm, {...connection, task: {}});\n        // console.log(connection, connection.getData(), 'before drop')\n        return true;\n      }\n    });\n    // 连线事件处理\n    chart.bind('connection', (info, originalEvent) => {\n      console.log('connection event');\n      const edge = createEdge(vm, {\n        // @ts-ignore\n        id: info.connection.getId(),\n        task: {},\n        sourceId: info.sourceId,\n        targetId: info.targetId,\n        connection: info.connection\n      });\n      vm.apiEmit('edge-connected', edge);\n    });\n  }\n\n  // 全局失焦处理\n  private itemBlurHandler() {\n    this.nodes.forEach((node) => {\n      // 有dom属性的, 必定被选择过, 否则未选过, 无需判断\n      if (node.dom) {\n        node.setSelected(false, node.dom);\n      }\n    });\n    // @ts-ignore\n    this.jsplumbInstance.getConnections().forEach((conn) => {\n      const edge = conn.getData();\n      edge.setSelected(false);\n    });\n  }\n\n  /**\n   * 节点双击选择事件\n   * 会给节点增加 'node-selected' class\n   */\n  private nodeDblclickHandler(event: MouseEvent, node: NodeItem) {\n    event.stopPropagation();\n    this.itemBlurHandler();\n    const nodeElement = node.dom || findNodeElement(event.target as HTMLElement);\n    if (nodeElement) {\n      node.setSelected(true, nodeElement);\n      this.apiEmit('node-dblclick', node);\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawPart.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawPart.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DrawPart.vue?vue&type=template&id=4a918eae&scoped=true&\"\nimport script from \"./DrawPart.vue?vue&type=script&lang=ts&\"\nexport * from \"./DrawPart.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DrawPart.vue?vue&type=style&index=0&id=4a918eae&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4a918eae\",\n  null\n  \n)\n\nexport default component.exports","\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport { CreateElement, VNodeChildren } from 'vue';\n\n@Component({})\nexport default class PluginLayer extends Vue {\n  @Prop()\n  public plugins!: VNodeChildren[];\n\n  public render(h: CreateElement) {\n    return h('div', this.plugins);\n  }\n}\n","var render, staticRenderFns\nimport script from \"./PluginLayer.vue?vue&type=script&lang=ts&\"\nexport * from \"./PluginLayer.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PluginLayer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PluginLayer.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Provide } from \"vue-property-decorator\";\nimport { FunctionalComponentOptions, VueConstructor, VNode } from \"vue\";\nimport { RecordPropsDefinition } from \"vue/types/options\";\nimport DrawPart, { NODE_TYPES } from \"./DrawPart.vue\";\nimport NodeItem, { createNode } from \"./NodeItem\";\nimport EdgeItem from \"./EdgeItem\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport isString from \"lodash/isString\";\nimport { INodeItem, IEdgeItem, IItem, ItemType, IWorkflowUI } from \".\";\nimport { Connection, jsPlumbInstance } from \"jsplumb\";\nimport { nextMacroTask } from \"./utils\";\nimport PluginLayer from \"./PluginLayer.vue\";\n\ninterface IChartData {\n  nodes: INodeItem[];\n  edges: IEdgeItem[];\n}\n\n/**\n * 获取此节点的前置节点, (如有回环, 不会获取到本节点)\n * @param {string} nodeId 节点id\n * @param {Array} edges 连线数组 [ {sourceId, targetId} ]\n */\nfunction getPreviousNodeIds(nodeId: string, edges: IEdgeItem[]) {\n  const result: string[] = [];\n  const originNodeId = nodeId;\n  const findPrevNodeIds = (nId: string) => {\n    const prevIds = edges.filter((edge) => edge.targetId === nId).map((v) => v.sourceId);\n    prevIds.forEach((prevId) => {\n      if (!result.includes(prevId) && prevId !== originNodeId) {\n        result.push(prevId);\n        findPrevNodeIds(prevId);\n      }\n    });\n    return result;\n  };\n  findPrevNodeIds(nodeId);\n  return result;\n}\n\n/**\n * 删除掉vm成员属性,\n * cloneDeep task\n */\nfunction payloadInterception(payload: object) {\n  return Object.entries(payload).reduce((newPayload: {[key: string]: any}, [key, value]) => {\n    if (key !== 'vm') {\n      newPayload[key] = value;\n    }\n    if (key === 'task') {\n      newPayload[key] = cloneDeep(value);\n    }\n    return newPayload;\n  }, {});\n}\n\n/**\n * 计算宽高位置\n */\nfunction getSize(size: number | string): string {\n  return typeof size === 'string' ? size : size + 'px';\n}\n\nconst PLUGINS: Array<\n  ( workSpaceDom: HTMLElement,\n    chartViewVueInstance: Vue,\n    jsplumbInstance: jsPlumbInstance) => VNode | void\n  > = [];\n\n@Component({\n  components: {\n    DrawPart,\n    PluginLayer\n  },\n})\nexport default class ChartView extends Vue implements IWorkflowUI {\n  /**\n   * 注册节点类型\n   */\n  public static registNodeTypeByRender<Props>(\n    name: string,\n    vmCfg: FunctionalComponentOptions<Props, RecordPropsDefinition<Props>>\n  ): void {\n    return DrawPart.registNodeType(name, vmCfg);\n  }\n\n  /**\n   * 通过SFC注册节点类型\n   */\n  public static registNodeType(componentName: string, SFC: VueConstructor, width?: number, height?: number) {\n    if (!width || !height) {\n      console.warn('width或height未传入, 请确保已经在组件内部固定了节点宽高');\n    }\n    const regist = DrawPart.registNodeType.bind(DrawPart);\n    regist(componentName, {\n      name: componentName,\n      functional: true,\n      render(h, ctx) {\n        let style;\n        if (width && height) {\n          style = { width: `${width}px`, height: `${height}px` };\n        }\n        const data = {\n          props: ctx.props as { [key: string]: any },\n          style\n        };\n        return h(SFC, data);\n      }\n    });\n  }\n\n  /**\n   * 注册插件\n   */\n  public static registPlugins(\n    plugins: typeof PLUGINS\n  ): void {\n    PLUGINS.push(...plugins);\n  }\n\n  /**\n   * 获取绘图板组件对象实例\n   */\n  get drawPart(): Vue & DrawPart {\n    return this.$refs.chart as Vue & DrawPart;\n  }\n\n  // 工作流dom样式\n  get workFlowStyle() {\n    return {\n      width: getSize(this.width!),\n      height: getSize(this.height!)\n    };\n  }\n\n  // 工作流组件宽度\n  @Prop({\n    default: 800\n  })\n  public width!: string | number;\n  // 工作流组件高度\n  @Prop({\n    default: 600\n  })\n  public height!: string | number;\n\n  public plugins: VNode[] = [];\n  /**\n   * 初始化数据\n   */\n  public async initChart(data: IChartData): Promise<void> {\n    const drawPart = this.drawPart;\n    drawPart.jsplumbInstance.reset();\n    drawPart.nodes = [];\n    const nodes = cloneDeep(data.nodes);\n    const edges = cloneDeep(data.edges);\n    // 必须先初始化节点, 否则连线无效\n    await drawPart.initNodes(nodes);\n    await drawPart.initEdges(edges);\n    drawPart.initJsplumbEvents();\n    return Promise.resolve();\n  }\n\n  public setData(chartData: IChartData) {\n    return this.initChart(chartData);\n  }\n\n  /**\n   * 创建节点\n   */\n  public async createNode(nodeInfo: INodeItem) {\n    const node = await createNode(this.drawPart, cloneDeep(nodeInfo));\n    await nextMacroTask(); // spec 注意, 这里是不得已而为之, 否则会连线失败, 猜测是endpoint渲染顺序问题\n    this.apiEmit(\"node-created\", node);\n  }\n\n  /**\n   * 删除节点/边\n   */\n  public deleteItem(itemType: ItemType, id: string) {\n    const fnMap = {\n      node: this.deleteNode,\n      edge: this.deleteEdge\n    };\n    return fnMap[itemType](id);\n  }\n\n  /**\n   * 更新节点/边\n   */\n  public updateItem(itemType: ItemType, id: string, task: object) {\n    const fnMap = {\n      node: this.updateNode,\n      edge: this.updateEdge\n    };\n    return fnMap[itemType](id, task);\n  }\n\n  /**\n   * 获取全部节点/连线数据\n   */\n  public getData() {\n    const nodes = this.getNodes();\n    const edges = this.getEdges();\n    return {\n      nodes: nodes.map(payloadInterception),\n      edges: edges.map(payloadInterception)\n    };\n  }\n\n  /**\n   * 根据id查询节点\n   */\n  public getNodeById(id: string): INodeItem | void {\n    const nodes = this.drawPart.nodes;\n    return nodes.find((n) => n.id === id);\n  }\n\n  /**\n   * 获取前置节点\n   * @param {string} nodeId 根据id查询节点\n   */\n  public getPreviousNodes(nodeId: string) {\n    const { nodes, edges } = this.getData();\n    const currNode = nodes.find((node) => node.id === nodeId);\n    if (!currNode) {\n      throw new Error(`当前节点(id:${nodeId})不存在`);\n    }\n    const prevNodeIds = getPreviousNodeIds(nodeId, edges as IEdgeItem[]);\n    return prevNodeIds.map(this.getNodeById);\n  }\n\n  /**\n   * 删除节点\n   */\n  private async deleteNode(id: string) {\n    const drawPart = this.drawPart;\n    // 1. 从jsplumb体系中删除此节点\n    drawPart.jsplumbInstance.remove(id);\n    // 2. 从本地数据中删除节点\n    const index = drawPart.nodes.findIndex((currNode) => currNode.id === id);\n    if (index === -1) {\n      throw new Error(`没有id: ${id}为的节点`);\n    }\n    const node = drawPart.nodes[index];\n    drawPart.nodes.splice(index, 1);\n    await nextMacroTask();\n    return node;\n  }\n\n  /**\n   * 删除连线\n   */\n  private async deleteEdge(id: string) {\n    const chart = this.drawPart.jsplumbInstance;\n    // @ts-ignore\n    const allConnections: Connection[] = chart.getConnections();\n    // @ts-ignore\n    const currConn = allConnections.filter((edge) => edge.getId() === id)[0];\n    if (currConn) {\n      chart.deleteConnection(currConn);\n    } else {\n      console.error('此id没有对应的edge');\n    }\n  }\n\n  /**\n   * 更新节点\n   */\n  private async updateNode(id: string, task: object) {\n    const drawPart = this.drawPart;\n    const currNode: NodeItem = drawPart.nodes.filter((node) => node.id === id)[0];\n    if (currNode) {\n      currNode.updateTask(cloneDeep(task));\n    } else {\n      console.error(`未获取到id为(${id})的节点`);\n    }\n    await nextMacroTask();\n    this.apiEmit(\"node-updated\", {\n      id: currNode.id,\n      nodeType: currNode.nodeType,\n      selected: currNode.selected,\n      task: currNode.task\n    });\n  }\n\n  /**\n   * 更新连线\n   */\n  private async updateEdge(id: string, task: object) {\n    // @ts-ignore\n    const allConnections: Connection[] = this.drawPart.jsplumbInstance.getConnections();\n    const currEdge = allConnections\n      // @ts-ignore\n      .map((connection) => connection.getData())\n      .filter((edge) => edge.id === id)[0];\n    if (currEdge) {\n      currEdge.updateTask(task);\n    } else {\n      console.error('此id没有对应的edge');\n    }\n  }\n\n  /**\n   * 获取全部节点\n   */\n  private getNodes(): INodeItem[] {\n    return this.drawPart.nodes.map((node) => node);\n  }\n\n  /**\n   * 获取全部连线\n   */\n  private getEdges(): IEdgeItem[] {\n    // @ts-ignore\n    const connections: Connection[] = this.drawPart.jsplumbInstance.getConnections();\n    // @ts-ignore\n    return connections.map((conn) => conn.getData());\n  }\n\n  // todo addEdge\n  /**\n   * 连接两个节点, 自动选择EndPoint\n   * 之后要做完了节点的多个EndPoint配置再写这个\n   */\n  // public async addConnection(sourceId: string, targetId: string): Connection {\n  // return\n  // }\n\n      // 节点drop事件处理\n  private dropHandler(e: DragEvent) {\n    e.preventDefault();\n    //  1. 节点视图处理\n    const nodeType = e.dataTransfer!.getData('nodeType');\n    if (!isString(nodeType)) {\n      throw new TypeError('获取节点类型失败');\n    }\n    // fix: 拖动画布后, 拖入节点不显示问题(e.toElement改变导致获取数据错误)\n    const boundRect = this.drawPart.$el.getBoundingClientRect();\n    const x = e.clientX - boundRect.x - 20;\n    const y = e.clientY - boundRect.y - 20;\n    const CURR_TYPES = Object.keys(NODE_TYPES);\n    if (!CURR_TYPES.includes(nodeType)) {\n      throw new Error(`${nodeType}节点类型未注册;\\n\\n当前已注册节点类型: [${CURR_TYPES.join(',')}]`);\n    }\n    // 2. 节点任务处理\n    const task = e.dataTransfer!.getData('task');\n    this.createNode({\n      x,\n      y,\n      nodeType,\n      task: JSON.parse(task)\n    });\n  }\n\n  private preventHandler(e: Event) {\n    // 注意: 此处阻止了以后, drop才会触发\n    e.preventDefault();\n  }\n\n  /**\n   * 触发事件, 用于给外部暴露的api事件, 所以我的方法名取的很好😁\n   */\n  @Provide()\n  private apiEmit(eventName: string, payload?: any, originEvent?: Event): void {\n    // todo 这里originEvent先留着, 也许用得上\n    // 参数拦截\n    this.$emit(eventName, payloadInterception(payload));\n  }\n\n  private mounted() {\n    const vm = this;\n    const dom = this.$refs.workSpace as HTMLElement;\n    const jsplumbInstance = this.drawPart.jsplumbInstance;\n    const pluginsVNodes = PLUGINS\n      .map((plugin) => plugin.call(this, dom, vm, jsplumbInstance))\n      .filter((vnode) => vnode);\n    this.plugins.push(...pluginsVNodes as VNode[]);\n  }\n  private beforeDestroy() {\n    this.$emit('hook:beforeDestory');\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartView.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartView.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ChartView.vue?vue&type=template&id=356b60a4&scoped=true&\"\nimport script from \"./ChartView.vue?vue&type=script&lang=ts&\"\nexport * from \"./ChartView.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ChartView.vue?vue&type=style&index=0&id=356b60a4&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"356b60a4\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./ChartView.vue?vue&type=custom&index=0&blockType=doc\"\nif (typeof block0 === 'function') block0(component)\n\nexport default component.exports","import { DirectiveBinding } from 'vue/types/options';\n\nconst draggableNodetype = {\n  inserted(el: HTMLElement, binding: DirectiveBinding) {\n    const { value } = binding; // value 即为nodeType名称\n    if (!value || !value.nodeType) {\n      throw new Error('v-draggableNodetype需要传入一个对象, 如: { nodeType: \"SimpleFlowNode\", task: { ...节点类型数据 } }. task(非必传)内容会被深拷贝到节点task中');\n    }\n    value.task = value.task || {};\n    const { nodeType, task } = value;\n    el.draggable = true;\n    el.ondragstart = (evt: DragEvent) => {\n      evt.dataTransfer!.setData('nodeType', nodeType);\n      evt.dataTransfer!.setData('task', JSON.stringify(task));\n    };\n    el.ondragend = (evt) => evt.preventDefault();\n    el.ondragover = (evt) => evt.preventDefault();\n  }\n};\n\nexport default draggableNodetype;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"draggable-bg\",style:({ backgroundPosition: _vm.backgroundPosition })})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\n\n@Component\nexport default class DraggableBg extends Vue {\n\n  @Prop()\n  private chartViewVm!: Vue;\n\n  @Prop()\n  private workSpace!: HTMLElement;\n\n  private dragView = {\n    isDragging: false,\n    startX: 0,\n    startY: 0\n  };\n\n  private nodeListStyle = {\n    left: '0px',\n    top: '0px'\n  };\n\n  private drawLayerDom!: HTMLElement;\n\n  private backgroundPosition = '';\n\n  // 1. 开始拖动\n  public mousedownHandler(event: MouseEvent) {\n    this.dragView = {\n      isDragging: true,\n      startX: event.x,\n      startY: event.y\n    };\n  }\n\n  // 2. 拖动中\n  public mousemoveHandler(event: MouseEvent) {\n    if (this.dragView.isDragging) {\n      const deltaX = event.x - this.dragView.startX;\n      const deltaY = event.y - this.dragView.startY;\n      this.dragView.startX = event.x;\n      this.dragView.startY = event.y;\n      this.moveHandler(deltaX, deltaY);\n    }\n  }\n\n  // 3. 拖动结束\n  public mouseupHandler(event: MouseEvent) {\n    this.dragView.isDragging = false;\n  }\n\n  // 视图移动处理器\n  public moveHandler(x: number, y: number) {\n    const { left, top } = this.nodeListStyle;\n    const leftStr = this.nodeListStyle.left = parseFloat(left) + x + 'px';\n    const topStr = this.nodeListStyle.top = parseFloat(top) + y + 'px';\n    // 背景拖动\n    this.backgroundPosition = `left ${leftStr} top ${topStr}`;\n    // 画布拖动\n    this.drawLayerDom.style.left = leftStr;\n    this.drawLayerDom.style.top = topStr;\n  }\n\n  private mounted() {\n    // 2. 视图拖动绑定\n    const drawLayerDom = this.drawLayerDom = this.chartViewVm.$refs.drawLayer as HTMLElement;\n    drawLayerDom.style.position = 'relative';\n\n    this.workSpace.addEventListener('mousedown', this.mousedownHandler);\n    this.workSpace.addEventListener('mousemove', this.mousemoveHandler);\n    document.body.addEventListener('mouseup', this.mouseupHandler);\n  }\n\n  private beforeDestory() {\n    console.log('hook beforeDestory');\n    this.workSpace.removeEventListener('mousedown', this.mousedownHandler);\n    this.workSpace.removeEventListener('mousemove', this.mousemoveHandler);\n    document.body.removeEventListener('mouseup', this.mouseupHandler);\n  }\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DraggableBg.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DraggableBg.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DraggableBg.vue?vue&type=template&id=c3c218f8&scoped=true&\"\nimport script from \"./DraggableBg.vue?vue&type=script&lang=ts&\"\nexport * from \"./DraggableBg.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DraggableBg.vue?vue&type=style&index=0&id=c3c218f8&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c3c218f8\",\n  null\n  \n)\n\nexport default component.exports","import { jsPlumbInstance } from 'jsplumb';\nimport { VNode } from 'vue/types/umd';\nimport DraggableBg from './DraggableBg.vue';\n\nexport default function(\n  workSpace: HTMLElement,\n  chartViewVm: Vue,\n  jsplumbInstance: jsPlumbInstance\n): VNode | void {\n  // 当前在mounted hook中\n  const h = chartViewVm.$createElement;\n  // 1. 生成背景\n  const bgComp = h(DraggableBg, {\n    props: {\n      chartViewVm,\n      workSpace\n    }\n  });\n  return bgComp;\n  // const bgDom = document.createElement('div');\n  // bgDom.setAttribute('style', `\n  //   width: 10000px;\n  //   height: 10000px;\n  //   position: absolute;\n  //   left: -5000px;\n  //   top: -5000px;\n  //   background-image: linear-gradient(#eee 1px, transparent 0), linear-gradient(90deg, #eee 1px, transparent 0);\n  //   background-size: 30px 30px;\n  // `);\n  // workSpace.insertBefore(bgDom, workSpace.firstElementChild);\n\n  // 2. 视图拖动绑定\n  // const drawLayerDom = chartViewVm.$refs.drawLayer as HTMLElement;\n  // drawLayerDom.style.position = 'relative';\n  // const mousemove = mousemoveHandler.bind(null, bgDom, drawLayerDom);\n  // workSpace.addEventListener('mousedown', mousedownHandler);\n  // workSpace.addEventListener('mousemove', mousemove);\n  // document.body.addEventListener('mouseup', mouseupHandler);\n  // // 3. 视图拖动解绑\n  // chartViewVm.$on('hook:beforeDestory', () => {\n  //   console.log('hook beforeDestory');\n  //   workSpace.removeEventListener('mousedown', mousedownHandler);\n  //   workSpace.removeEventListener('mousemove', mousemove);\n  //   document.body.removeEventListener('mouseup', mouseupHandler);\n  // });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"zoom-control\"},[_c('i',{staticClass:\"iconfont iconminus\",class:['icon', { disabled: _vm.minusDisabled }],on:{\"click\":function($event){return _vm.change(-_vm.defaultIncrement)}}}),_c('span',{staticClass:\"zoom-rate\"},[_vm._v(_vm._s(_vm.zoomRate)+\"%\")]),_c('i',{staticClass:\"iconfont iconadd\",class:['icon', { disabled: _vm.addDisabled }],on:{\"click\":function($event){return _vm.change(+_vm.defaultIncrement)}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\nimport { Vue, Prop, Component } from \"vue-property-decorator\";\nimport '../../../../assets/iconfont.css';\nimport { jsPlumbInstance } from 'jsplumb';\n\n@Component\nexport default class ZoomControl extends Vue {\n  @Prop()\n  private jsplumbInstance!: jsPlumbInstance;\n  @Prop()\n  private drawLayerDom!: HTMLElement;\n\n  private defaultIncrement = 10; // 默认增量\n  private zoomRate = 100; // 缩放比例 默认100\n      // 放大缩小按钮禁用\n  private addDisabled = false;\n  private minusDisabled = false;\n\n  private change(delta: number) {\n    let zoomRate = this.zoomRate + delta;\n    if (zoomRate < 50) {\n      zoomRate = 50;\n      this.minusDisabled = true;\n    } else if (zoomRate > 200) {\n      zoomRate = 200;\n      this.addDisabled = true;\n    } else {\n      this.addDisabled = false;\n      this.minusDisabled = false;\n    }\n    this.zoomRate = zoomRate;\n    // this.$emit('zoom-change', zoomRate / 100);\n    const zoom = zoomRate / 100;\n    this.drawLayerDom.style.transform = `scale(${zoom})`;\n    this.jsplumbInstance.setZoom(zoom);\n  }\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ZoomControl.vue?vue&type=template&id=9015bdf8&scoped=true&\"\nimport script from \"./ZoomControl.vue?vue&type=script&lang=ts&\"\nexport * from \"./ZoomControl.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ZoomControl.vue?vue&type=style&index=0&id=9015bdf8&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9015bdf8\",\n  null\n  \n)\n\nexport default component.exports","import { VNode } from 'vue/types/umd';\nimport { jsPlumbInstance } from 'jsplumb';\nimport ZoomControl from './ZoomControl.vue';\n\nexport default function(\n  workSpace: HTMLElement,\n  chartViewVm: Vue,\n  jsplumbInstance: jsPlumbInstance\n): VNode | void {\n  const h = chartViewVm.$createElement;\n  const drawLayerDom = chartViewVm.$refs.drawLayer as HTMLElement;\n  const vnode =  h(ZoomControl, {\n    props: {\n      drawLayerDom,\n      jsplumbInstance\n    }\n  });\n  return vnode;\n}\n","import ChartView from './ChartView.vue';\nimport DraggableNodeType from './DraggableNodeType';\nimport DraggableBG from \"./plugins/draggableBackground\";\nimport ZoomControl from \"./plugins/zoomControl\";\n\n// @ts-ignore\nChartView.registPlugins([DraggableBG, ZoomControl]);\n\nexport const draggableNodetype = DraggableNodeType;\nexport default ChartView;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('button',{staticClass:\"log-btn\",on:{\"click\":_vm.log}},[_vm._v(\"btn\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <span>\n    <button @click=\"log\" class=\"log-btn\">btn</button>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: 'Demo',\n  props: ['compTitle'],\n  methods: {\n    log() {\n      console.log('当前组件标题: ' + this.compTitle);\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.log-btn {\n  cursor: pointer;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Demo.vue?vue&type=template&id=542b64e6&scoped=true&\"\nimport script from \"./Demo.vue?vue&type=script&lang=js&\"\nexport * from \"./Demo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Demo.vue?vue&type=style&index=0&id=542b64e6&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"542b64e6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"default-flow-node\",style:({\n    color: _vm.mainColor,\n    borderTopColor: _vm.mainColor\n  })},[_c('h4',{staticClass:\"status\",domProps:{\"textContent\":_vm._s(_vm.status)}}),_c('div',{staticClass:\"title\"},[(_vm.title)?_c('span',{domProps:{\"textContent\":_vm._s(_vm.title)}}):_c('span',{staticClass:\"placeholder\"},[_vm._v(\"请设置流程节点标题\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"default-flow-node\"\n    :style=\"{\n      color: mainColor,\n      borderTopColor: mainColor\n    }\"\n  >\n    <h4 class=\"status\" v-text=\"status\"></h4>\n    <div class=\"title\">\n      <span v-if=\"title\" v-text=\"title\"></span>\n      <span v-else class=\"placeholder\">请设置流程节点标题</span>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'DefaultFlowNode',\n  props: {\n    title: {\n      type: String,\n      default: ''\n    },\n    status: {\n      type: String,\n      default: '未开始',\n      validator(val) {\n        const flag = ['未开始', '执行中', '执行成功', '执行失败'].includes(val);\n        return flag;\n      },\n    },\n  },\n  computed: {\n    mainColor() {\n      const map = {\n        未开始: '#4c4c4b',\n        执行中: '#11b4eb',\n        执行成功: '#08c692',\n        执行失败: '#fe0001',\n      };\n      return map[this.status];\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n\n.default-flow-node {\n  width: 150px;\n  height: 80px;\n  font-size: 12px;\n  border: 2px solid #d0d6dc;\n  border-top-width: 8px;\n  border-radius: 8px;\n  background-color: #fff;\n  transition: all 0.3s ease-in;\n  &.node-selected {\n    box-shadow: 0px 0px 20px 0px #fff5d0;\n  }\n  .status {\n    padding: 5px;\n    margin: 0 10px;\n    border-bottom: 4px solid;\n  }\n  .title {\n    padding: 10px;\n    color: #4c4c4b;\n    text-align: left;\n    padding-left: 15px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DefaultFlowNode.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DefaultFlowNode.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DefaultFlowNode.vue?vue&type=template&id=31412182&scoped=true&\"\nimport script from \"./DefaultFlowNode.vue?vue&type=script&lang=js&\"\nexport * from \"./DefaultFlowNode.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DefaultFlowNode.vue?vue&type=style&index=0&id=31412182&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"31412182\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <div class=\"op-container\">\n      <div class=\"type-list\">\n        拖动到绘图区👉\n        <ul>\n          <li\n            v-for=\"(item, index) in ['DemoNode', 'FlowNode', 'Test'].map(v => ({nodeType: v, task: {taskType: 'Devops'}}))\"\n            :key=\"index\"\n            class=\"node-type-item\"\n            v-draggable-nodetype=\"item\"\n          >\n            {{item.nodeType}}\n          </li>\n        </ul>\n      </div>\n      <ChartView\n        width=\"800px\"\n        height=\"600px\"\n        ref=\"chart\"\n        @node-created=\"nodeCreated\"\n        @node-dblclick=\"nodeSelected\"\n        @node-deleted=\"nodeDeletedHandler\"\n        @edge-dblclick=\"edgeSelected\"\n        @edge-connected=\"edgeConnected\"\n        :contextMenuList=\"[\n          { label: '删除', onClick: node => contextMenuClick(node, '删除') },\n          { label: '编辑', onClick: node => contextMenuClick(node, '编辑') }\n        ]\"\n      />\n    </div>\n    <div class=\"edit-item\">\n      <h2>修改{{currentEditingItem.itemType}}</h2>\n      <div>\n        <div>id: {{currentEditingItem.id}}</div>\n        <div>node type: {{currentEditingItem.nodeType}}</div>\n        <div>\n          <hr />\n          <h3>task</h3>\n          <br />\n          <p>\n            title:\n            <input type=\"text\" v-model=\"currentEditingItem.task.title\" />\n          </p>\n          <p>\n            condition:\n            <input type=\"text\" v-model=\"currentEditingItem.task.condition\" />\n          </p>\n          <p>\n            status:\n            <select v-model=\"currentEditingItem.task.status\">\n              <option value=\"未开始\">未开始</option>\n              <option value=\"执行中\">执行中</option>\n              <option value=\"执行失败\">执行失败</option>\n              <option value=\"执行成功\">执行成功</option>\n            </select>\n          </p>\n        </div>\n      </div>\n      <button\n        @click=\"updateItem(currentEditingItem.itemType, currentEditingItem.id, currentEditingItem.task)\"\n      >update item</button>\n      <button @click=\"deleteItem(currentEditingItem.itemType, currentEditingItem.id)\">删除</button>\n      <button @click=\"printPrevNodes(currentEditingItem.id)\">打印前置节点</button>\n    </div>\n    <div style=\"display: flex;\">\n      <button @click=\"logData\">get data</button>\n    </div>\n  </div>\n</template>\n\n<script>\n// @ts-nocheck\nimport { Component, Vue } from \"vue-property-decorator\";\nimport ChartView, { draggableNodetype } from \"./components/ChartView/main.ts\";\nimport Demo from \"./components/PresetNodes/Demo.vue\";\nimport FlowNode from \"./components/PresetNodes/DefaultFlowNode.vue\";\n// import DragBG from './components/ChartView/plugins/draggableBackground';\n// import HelloWorld from './components/HelloWorld.vue';\n\nChartView.registNodeTypeByRender(\"DemoNode\", {\n  name: \"DemoNode\",\n  functional: true,\n  props: {\n    title: String\n  },\n  render(h, ctx) {\n    const { title } = ctx.props;\n    return h(\n      \"div\",\n      {\n        style: {\n          width: \"200px\",\n          height: \"80px\",\n          border: \"1px solid #000\",\n          background: \"#fff\"\n        }\n      },\n      [\n        h(\"div\", \"组件类型: DemoNode\"),\n        h(\"div\", \"[prop]title: \" + title),\n        h(\"div\", [\n          h(\"span\", \"外部组件引用: \"),\n          h(Demo, {\n            props: {\n              compTitle: title\n            }\n          })\n        ])\n      ]\n    );\n  }\n});\n\nChartView.registNodeType(\"FlowNode\", FlowNode);\n\n// ChartView.registPlugins([\n//   DragBG\n// ]);\n\nexport default {\n  name: \"App\",\n  components: {\n    ChartView\n  },\n  directives: {\n    draggableNodetype\n  },\n  data() {\n    return {\n      currentEditingItem: {\n        itemType: \"\", // node, edge\n        task: {}\n      }\n    };\n  },\n  methods: {\n    nodeDeletedHandler(node) {\n      console.log(\"节点被删除了\", node);\n    },\n    nodeCreated(node) {\n      console.log(node, \"created\");\n    },\n    nodeSelected(node) {\n      console.log(node, \"node dblclicked\");\n      this.currentEditingItem = Object.assign({ itemType: \"node\" }, node);\n      // more ...\n    },\n    edgeSelected(edge) {\n      console.log(edge, \"edge clicked\");\n      this.currentEditingItem = Object.assign({ itemType: \"edge\" }, edge);\n      // more ...\n    },\n    updateItem(itemType, id, task) {\n      // currentEditingItem.id, currentEditingItem.task\n      this.$refs.chart.updateItem(itemType, id, task);\n    },\n    deleteItem(itemType, id) {\n      this.$refs.chart.deleteItem(itemType, id);\n    },\n    contextMenuClick(nodeInfo, menuLabel) {\n      console.log(`右键菜单触发: ${menuLabel} --> ${nodeInfo.id}`, nodeInfo);\n      if (menuLabel === \"删除\") {\n        this.$refs.chart.deleteItem(\"node\", nodeInfo.id);\n      }\n    },\n    printPrevNodes(currNodeId) {\n      const nodes = this.$refs.chart.getPreviousNodes(currNodeId);\n      console.log(nodes);\n    },\n    edgeConnected(info) {\n      console.log(info, \"edge connected\");\n      // eslint-disable-next-line no-unused-vars\n      const { sourceId, id } = info;\n      // eslint-disable-next-line no-unused-vars\n      const chart = this.$refs.chart;\n      // const node = chart.getNodeById(sourceId)\n      // if (node.nodeType === 'SwitchNode') {\n      // setTimeout(() => {\n      // chart.updateItem('edge', id, { condition: 'yes' })\n      // }, 0)\n      // }\n    },\n    logData () {\n      const data = this.$refs.chart.getData();\n      console.log(data, 'data');\n    }\n  },\n  async mounted() {\n    this.$refs.chart\n      .initChart({\n        nodes: [\n          {\n            id: \"1\",\n            x: 10,\n            y: 50,\n            nodeType: \"FlowNode\",\n            task: {\n              title: \"代码管理\"\n            }\n          },\n          {\n            id: \"2\",\n            x: 300,\n            y: 52,\n            nodeType: \"FlowNode\",\n            task: {\n              title: \"构建任务\",\n              status: \"执行中\"\n            }\n          },\n          {\n            id: \"3\",\n            x: 598,\n            y: 49,\n            nodeType: \"FlowNode\",\n            task: {\n              title: \"部署管理\",\n              status: \"执行成功\"\n            }\n          },\n          {\n            id: \"4\",\n            x: 626,\n            y: 252,\n            nodeType: \"FlowNode\",\n            task: {\n              title: \"部署管理2\",\n              status: \"执行失败\"\n            }\n          },\n          {\n            id: \"c79c6f8f-8fce-4f99-92a9-94ff99c84d2a\",\n            x: 322,\n            y: 282,\n            nodeType: \"FlowNode\",\n            task: {}\n          }\n        ],\n        edges: [\n          {\n            id: \"_jsplumb_c_1593419365488\",\n            sourceId: \"1\",\n            targetId: \"2\",\n            task: {}\n          },\n          {\n            id: \"_jsplumb_c_1593419365498\",\n            sourceId: \"2\",\n            targetId: \"3\",\n            task: {\n              condition: \"yes\"\n            }\n          },\n          {\n            id: \"_jsplumb_c_1593419365502\",\n            sourceId: \"2\",\n            targetId: \"4\",\n            task: {\n              condition: \"no\"\n            }\n          },\n          {\n            id: \"_jsplumb_c_1593419365506\",\n            sourceId: \"1\",\n            targetId: \"c79c6f8f-8fce-4f99-92a9-94ff99c84d2a\",\n            task: {}\n          },\n          {\n            id: \"_jsplumb_c_1593419365508\",\n            sourceId: \"c79c6f8f-8fce-4f99-92a9-94ff99c84d2a\",\n            targetId: \"4\",\n            task: {}\n          }\n        ]\n      })\n      .then(() => {\n        console.log(\"chart init done\");\n        this.$refs.chart.createNode({\n          nodeType: \"FlowNode\",\n          x: 10,\n          y: 300,\n          task: {}\n        });\n        setTimeout(() => {\n          // alert('change')\n          // return\n          // eslint-disable-next-line no-unreachable\n          // this.$refs.chart.setData({\n          //   nodes: [\n          //     {\n          //       id: '1',\n          //       x: 64,\n          //       y: 86,\n          //       nodeType: 'FlowNode',\n          //       task: {\n          //         title: '代码管理'\n          //       }\n          //     },\n          //     {\n          //       id: '2',\n          //       x: 332,\n          //       y: 68,\n          //       nodeType: 'FlowNode',\n          //       task: {\n          //         title: '构建任务',\n          //         status: '执行中'\n          //       }\n          //     },\n          //     {\n          //       id: '3',\n          //       x: 598,\n          //       y: 49,\n          //       nodeType: 'FlowNode',\n          //       task: {\n          //         title: '部署管理',\n          //         status: '执行成功'\n          //       }\n          //     }\n          //   ],\n          //   edges: [\n          //     {\n          //       id: '_jsplumb_c_1594877574079',\n          //       sourceId: '1',\n          //       targetId: '2',\n          //       task: {}\n          //     },\n          //     {\n          //       id: '_jsplumb_c_1594877574084',\n          //       sourceId: '2',\n          //       targetId: '3',\n          //       task: {\n          //         condition: 'yes'\n          //       }\n          //     }\n          //   ]\n          // })\n        }, 3000);\n      });\n  }\n};\n</script>\n\n<style lang=\"less\">\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n.type-list {\n  padding-right: 5px;\n  border-right: 1px dashed #4c4c4b;\n}\n.op-container {\n  display: flex;\n  li {\n    &:hover {\n      background-color: #ccc;\n    }\n  }\n}\n.edit-item {\n  position: fixed;\n  right: 0;\n  top: 0;\n  width: 22%;\n  height: 100vh;\n  background-color: #fff;\n  box-shadow: 0 0 10px 10px #ccc;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=2f39cf18&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport App from './App.vue';\n\nVue.config.productionTip = false;\n\nnew Vue({\n  render: (h) => h(App),\n}).$mount('#app');\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawPart.vue?vue&type=style&index=0&id=4a918eae&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawPart.vue?vue&type=style&index=0&id=4a918eae&lang=less&scoped=true&\""],"sourceRoot":""}