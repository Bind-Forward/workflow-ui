{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/ChartView/DrawPart.vue?c6f6","webpack:///./src/App.vue?74c1","webpack:///./src/components/ChartView/ChartView.vue?c577","webpack:///./src/components/PresetNodes/DefaultFlowNode.vue?ed61","webpack:///./src/components/ChartView/plugins/draggableBackground/DraggableBg.vue?6256","webpack:///./src/components/PresetNodes/Demo.vue?a007","webpack:///./src/App.vue?8166","webpack:///./src/components/ChartView/ChartView.vue?4fd6","webpack:///./src/components/ChartView/DrawPart.vue?fd50","webpack:///./src/components/ChartView/Item.ts","webpack:///./src/components/ChartView/NodeItem.ts","webpack:///./src/components/ChartView/EdgeItem.ts","webpack:///./src/components/ChartView/jsplumbDefaultConfig.ts","webpack:///./src/components/ChartView/utils.ts","webpack:///./src/components/ChartView/DrawPart.vue?33ef","webpack:///./src/components/ChartView/DrawPart.vue?81e8","webpack:///./src/components/ChartView/DrawPart.vue","webpack:///./src/components/ChartView/PluginLayer.vue?872b","webpack:///./src/components/ChartView/PluginLayer.vue","webpack:///./src/components/ChartView/PluginLayer.vue?9034","webpack:///./src/components/ChartView/ChartView.vue?3b00","webpack:///./src/components/ChartView/ChartView.vue?9350","webpack:///./src/components/ChartView/ChartView.vue","webpack:///./src/components/ChartView/DraggableNodeType.ts","webpack:///./src/components/ChartView/plugins/draggableBackground/DraggableBg.vue?6cb3","webpack:///./src/components/ChartView/plugins/draggableBackground/DraggableBg.vue?97ad","webpack:///./src/components/ChartView/plugins/draggableBackground/DraggableBg.vue?57dd","webpack:///./src/components/ChartView/plugins/draggableBackground/DraggableBg.vue","webpack:///./src/components/ChartView/plugins/draggableBackground/index.ts","webpack:///./src/components/ChartView/plugins/zoomControl/ZoomControl.vue?1aab","webpack:///./src/components/ChartView/plugins/zoomControl/ZoomControl.vue?f809","webpack:///./src/components/ChartView/plugins/zoomControl/ZoomControl.vue?30d3","webpack:///./src/components/ChartView/plugins/zoomControl/ZoomControl.vue","webpack:///./src/components/ChartView/plugins/zoomControl/index.ts","webpack:///./src/components/ChartView/main.ts","webpack:///./src/components/PresetNodes/Demo.vue?1b1b","webpack:///src/components/PresetNodes/Demo.vue","webpack:///./src/components/PresetNodes/Demo.vue?85e1","webpack:///./src/components/PresetNodes/Demo.vue","webpack:///./src/components/PresetNodes/DefaultFlowNode.vue?96e3","webpack:///src/components/PresetNodes/DefaultFlowNode.vue","webpack:///./src/components/PresetNodes/DefaultFlowNode.vue?9563","webpack:///./src/components/PresetNodes/DefaultFlowNode.vue","webpack:///src/App.vue","webpack:///./src/App.vue?a7d1","webpack:///./src/App.vue","webpack:///./src/main.ts","webpack:///./src/components/ChartView/plugins/zoomControl/ZoomControl.vue?ac61"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_l","item","index","directives","rawName","expression","domProps","_s","icon","_v","ref","label","onClick","node","contextMenuClick","on","nodeCreated","nodeSelected","nodeDeleted","edgeSelected","edgeConnected","currentEditingItem","itemType","id","nodeType","task","$event","target","composing","$set","$$selectedVal","Array","filter","options","selected","map","val","_value","multiple","updateItem","printPrevNodes","getNodeById","deleteItem","showEditBox","_e","getData","changeData","createNode","staticRenderFns","style","preventHandler","dropHandler","plugins","contextMenuList","scopedSlots","_u","fn","child","menu","preventDefault","contextMenuItemClick","itemBlurHandler","left","x","top","y","nodeDblclickHandler","nodeContextMenuHandler","_b","tag","vm","itemInfo","uuid","jsplumbInstance","nodeInfo","endPoints","setTimeout","setDefaultCfg","setDraggable","cloneNodeInfo","assign","flag","dom","classList","add","remove","common","allowLoopback","chart","getJsplumbInstance","addEndpoint","isSource","anchors","endpoint","radius","cssClass","hoverClass","isTarget","width","height","draggable","stop","e","pos","nodes","edgeInfo","sourceId","targetId","connection","connect","setData","initOverlays","originalEvent","stopPropagation","setSelected","apiEmit","overlayId","overlayCfg","overlay","getOverlay","setLabel","addOverlay","setCondition","condition","addClass","setHover","removeClass","uuids","setOverLay","location","createEdge","MaxConnections","Connector","curviness","PaintStyle","HoverPaintStyle","stroke","strokeWidth","nextMacroTask","timeout","Promise","resolve","findNodeElement","element","parentElement","tagName","dataset","nodetype","NODE_TYPES","getInstance","importDefaults","container","$refs","setContainer","ready","info","edges","forEach","edge","params","dropEndpoint","Error","connExist","connections","some","conn","console","log","getId","getConnections","event","nodeElement","vmCfg","component","h","getPreviousNodeIds","nodeId","originNodeId","findPrevNodeIds","nId","prevIds","v","prevId","includes","payloadInterception","payload","entries","reduce","newPayload","getSize","size","PLUGINS","drawPart","reset","initNodes","initEdges","initJsplumbEvents","chartData","initChart","fnMap","deleteNode","deleteEdge","updateNode","updateEdge","getNodes","getEdges","find","currNode","prevNodeIds","findIndex","allConnections","currConn","deleteConnection","error","updateTask","currEdge","dataTransfer","TypeError","boundRect","$el","getBoundingClientRect","clientX","clientY","CURR_TYPES","keys","join","JSON","parse","eventName","originEvent","$emit","contextMenu","open","workSpace","pluginsVNodes","plugin","vnode","registNodeType","componentName","SFC","warn","regist","functional","render","ctx","props","default","components","DrawPart","PluginLayer","VueContext","draggableNodetype","inserted","el","binding","ondragstart","evt","stringify","ondragend","ondragover","backgroundPosition","dragView","isDragging","startX","startY","nodeListStyle","deltaX","deltaY","moveHandler","leftStr","parseFloat","topStr","drawLayerDom","chartViewVm","drawLayer","position","addEventListener","mousedownHandler","mousemoveHandler","document","body","mouseupHandler","removeEventListener","bgComp","class","disabled","minusDisabled","change","defaultIncrement","zoomRate","addDisabled","delta","zoom","transform","setZoom","registPlugins","DraggableNodeType","methods","compTitle","color","mainColor","borderColor","title","status","type","String","validator","computed","未开始","执行中","执行成功","执行失败","ChartView","testNode","getPreviousNodes","currNodeId","menuLabel","config","productionTip","App","$mount"],"mappings":"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","file":"js/app.4722f5ee.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/workflow-ui/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawPart.vue?vue&type=style&index=0&id=494c61fe&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawPart.vue?vue&type=style&index=0&id=494c61fe&lang=less&scoped=true&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=less&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartView.vue?vue&type=style&index=0&id=2dfee948&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartView.vue?vue&type=style&index=0&id=2dfee948&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DefaultFlowNode.vue?vue&type=style&index=0&id=f1330de0&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DefaultFlowNode.vue?vue&type=style&index=0&id=f1330de0&lang=less&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DraggableBg.vue?vue&type=style&index=0&id=f8f4b826&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DraggableBg.vue?vue&type=style&index=0&id=f8f4b826&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demo.vue?vue&type=style&index=0&id=833f5bd8&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demo.vue?vue&type=style&index=0&id=833f5bd8&scoped=true&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"op-container\"},[_c('div',{staticClass:\"type-list\"},_vm._l((_vm.testNode),function(item,index){return _c('div',{directives:[{name:\"draggable-nodetype\",rawName:\"v-draggable-nodetype\",value:(item),expression:\"item\"}],key:index,staticClass:\"con\"},[_c('i',{staticClass:\"iconfont\",domProps:{\"innerHTML\":_vm._s(item.icon)}}),_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(item.name))])])}),0),_c('ChartView',{ref:\"chart\",attrs:{\"width\":\"800px\",\"height\":\"600px\",\"contextMenuList\":[\n        { label: '删除', onClick: function (node) { return _vm.contextMenuClick(node, '删除'); } },\n        { label: '编辑', onClick: function (node) { return _vm.contextMenuClick(node, '编辑'); } }\n      ]},on:{\"node-created\":_vm.nodeCreated,\"node-dblclick\":_vm.nodeSelected,\"node-deleted\":_vm.nodeDeleted,\"edge-dblclick\":_vm.edgeSelected,\"edge-connected\":_vm.edgeConnected}}),(_vm.showEditBox)?_c('div',{staticClass:\"edit-item\"},[_c('div',{staticClass:\"con\"},[_vm._v(\"类型：\"+_vm._s(_vm.currentEditingItem.itemType))]),_c('div',{staticClass:\"con\"},[_vm._v(\"id：\"+_vm._s(_vm.currentEditingItem.id))]),_c('div',{staticClass:\"con\"},[_vm._v(\"节点类型: \"+_vm._s(_vm.currentEditingItem.nodeType))]),_c('div',{staticClass:\"con\"},[_vm._v(\"标题:\"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentEditingItem.task.title),expression:\"currentEditingItem.task.title\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.currentEditingItem.task.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.currentEditingItem.task, \"title\", $event.target.value)}}})]),_c('div',{staticClass:\"con\"},[_vm._v(\"状态: \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentEditingItem.task.status),expression:\"currentEditingItem.task.status\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.currentEditingItem.task, \"status\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"未开始\"}},[_vm._v(\"未开始\")]),_c('option',{attrs:{\"value\":\"执行中\"}},[_vm._v(\"执行中\")]),_c('option',{attrs:{\"value\":\"执行失败\"}},[_vm._v(\"执行失败\")]),_c('option',{attrs:{\"value\":\"执行成功\"}},[_vm._v(\"执行成功\")])])]),_c('button',{staticClass:\"btn\",on:{\"click\":function($event){return _vm.updateItem(_vm.currentEditingItem.itemType, _vm.currentEditingItem.id, _vm.currentEditingItem.task)}}},[_vm._v(\"更新节点\")]),_c('button',{staticClass:\"btn\",on:{\"click\":function($event){return _vm.printPrevNodes(_vm.currentEditingItem.id)}}},[_vm._v(\"获取前置节点\")]),_c('button',{staticClass:\"btn\",on:{\"click\":function($event){return _vm.getNodeById(_vm.currentEditingItem.id)}}},[_vm._v(\"获取当前节点\")]),_c('button',{staticClass:\"btn\",on:{\"click\":function($event){return _vm.deleteItem('node', _vm.currentEditingItem.id)}}},[_vm._v(\"删除节点\")]),_c('button',{staticClass:\"btn\",on:{\"click\":function($event){_vm.showEditBox=!_vm.showEditBox}}},[_vm._v(\"关闭弹窗\")])]):_vm._e()],1),_c('div',{staticClass:\"btnBox\"},[_c('button',{staticClass:\"btn\",on:{\"click\":_vm.getData}},[_vm._v(\"获取数据\")]),_c('button',{staticClass:\"btn\",on:{\"click\":_vm.changeData}},[_vm._v(\"更改数据\")]),_c('button',{staticClass:\"btn\",on:{\"click\":_vm.createNode}},[_vm._v(\"创建工具节点\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chart-view\"},[_c('div',{ref:\"workSpace\",staticClass:\"work-space\",style:(_vm.workFlowStyle),on:{\"dragenter\":_vm.preventHandler,\"dragover\":_vm.preventHandler,\"drop\":_vm.dropHandler}},[_c('div',{staticClass:\"plugins-layer\"},[_c('plugin-layer',{attrs:{\"plugins\":_vm.plugins}})],1),_c('div',{ref:\"drawLayer\",staticClass:\"draw-layer\"},[_c('DrawPart',{ref:\"chart\",staticClass:\"node-list-container\"})],1),(_vm.contextMenuList.length)?_c('vue-context',{ref:\"contextMenu\",staticClass:\"context-menu\",scopedSlots:_vm._u([{key:\"default\",fn:function(child){return _vm._l((_vm.contextMenuList),function(menu){return _c('li',{key:menu.label,staticClass:\"context-item\"},[_c('a',{staticClass:\"context-item-link\",domProps:{\"textContent\":_vm._s(menu.label)},on:{\"click\":function($event){$event.preventDefault();return _vm.contextMenuItemClick(menu, child.data)}}})])})}}],null,false,201515628)}):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"container\",staticClass:\"draw-part\",on:{\"click\":_vm.itemBlurHandler}},_vm._l((_vm.nodes),function(node){return _c('div',{key:node.id,staticClass:\"node-item\",style:({\n      left: node.x + 'px',\n      top: node.y + 'px'\n    }),attrs:{\"id\":node.id,\"data-nodetype\":node.nodeType},on:{\"dblclick\":function($event){return _vm.nodeDblclickHandler($event, node)},\"contextmenu\":function($event){return _vm.nodeContextMenuHandler($event, node)}}},[_c(node.nodeType,_vm._b({tag:\"component\"},'component',node.task,false))],1)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { IItem, IDrawPartVm } from './index';\r\nimport { jsPlumbUtil } from 'jsplumb';\r\nexport default abstract class Item implements IItem {\r\n  public id: string;\r\n  // 所有业务数据\r\n  public task: {\r\n    [key: string]: any\r\n  };\r\n  // 当前连线/节点是否被选择\r\n  public selected?: boolean = false;\r\n  public vm: IDrawPartVm;\r\n\r\n  constructor(vm: IDrawPartVm, itemInfo: IItem) {\r\n    this.id = itemInfo.id || jsPlumbUtil.uuid();\r\n    this.task = itemInfo.task || {};\r\n    this.vm = vm;\r\n  }\r\n\r\n  public abstract updateTask(task: object): void;\r\n  public abstract setSelected(flag: boolean, element: Element): void;\r\n\r\n  protected getJsplumbInstance() {\r\n    return this.vm.jsplumbInstance;\r\n  }\r\n}\r\n","import Item from './Item';\r\nimport cloneDeep from 'lodash/cloneDeep';\r\nimport { INodeItem, IDrawPartVm } from '.';\r\nimport { Endpoint } from 'jsplumb';\r\nexport default class NodeItem extends Item implements INodeItem {\r\n  public x: number;\r\n  public y: number;\r\n  public nodeType: string;\r\n  public dom?: HTMLElement; // 只要选择过此节点, 就会被记录, 在节点blur时, 可以只遍历这些被选择过的, 使其取消选择即可\r\n  public endPoints: Endpoint[] = []; // 每个节点的连接点\r\n\r\n  constructor(vm: IDrawPartVm, nodeInfo: INodeItem) {\r\n    super(vm, nodeInfo);\r\n    // 1. 节点基本参数\r\n    this.x = nodeInfo.x;\r\n    this.y = nodeInfo.y;\r\n    this.nodeType = nodeInfo.nodeType;\r\n    // 2. 初始化图形\r\n    setTimeout(() => {\r\n      // 2.1 设置图形参数\r\n      this.setDefaultCfg();\r\n      // 2.2 设置节点可拖动\r\n      this.setDraggable();\r\n    }, 0);\r\n    const cloneNodeInfo = cloneDeep(nodeInfo);\r\n    Object.assign(this, cloneNodeInfo);\r\n  }\r\n\r\n  /**\r\n   * 更新业务数据\r\n   * @param task 任务\r\n   */\r\n  public updateTask(task: object) {\r\n    this.task = cloneDeep(task);\r\n  }\r\n\r\n  public setSelected(flag: boolean, dom: HTMLElement) {\r\n    this.dom = dom;\r\n    this.vm.$set(this, 'selected', flag);\r\n    if (flag) {\r\n      dom.classList.add('node-selected');\r\n    } else {\r\n      dom.classList.remove('node-selected');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置节点默认jsplumb配置\r\n   */\r\n  private setDefaultCfg(): void {\r\n    // 设置默认连线样式及overlays\r\n    const common = {\r\n      allowLoopback: false, // 不可回环\r\n    };\r\n    const chart = this.getJsplumbInstance();\r\n    // todo 这里可以从外部传入设置\r\n    // **添加起始点**\r\n    const outPoint = chart.addEndpoint(this.id, {\r\n      uuid: 'out-' + this.id,\r\n      isSource: true,\r\n      // @ts-ignore 有!\r\n      anchors: [\r\n        // 'Right', 'Top', 'Left', 'Bottom'\r\n        'Right',\r\n      ],\r\n      endpoint: ['Dot', {\r\n        radius: 6,\r\n        cssClass: 'end-point',\r\n        hoverClass: 'end-point-hover'\r\n      }]\r\n    }, common);\r\n    // **添加结束点**\r\n    const inPoint = chart.addEndpoint(this.id, {\r\n      uuid: 'in-' + this.id,\r\n      isTarget: true,\r\n      // @ts-ignore 有!\r\n      anchors: [\r\n        // 'Left', 'Top', 'Right', 'Bottom'\r\n        'Left',\r\n      ],\r\n      endpoint: ['Rectangle', {\r\n        width: 10,\r\n        height: 10,\r\n        cssClass: 'end-point',\r\n        hoverClass: 'end-point-hover',\r\n      }],\r\n    }, common);\r\n  }\r\n\r\n  /**\r\n   * 设置节点可拖动\r\n   */\r\n  private setDraggable(): void {\r\n    const chart = this.getJsplumbInstance();\r\n    chart.draggable(this.id, {\r\n      // grid: [4, 4],\r\n      // start: e => {\r\n      //   console.log('start')\r\n      // },\r\n      // 节点拖动结束位置记录\r\n      stop: (e: { pos: [number, number] }) => {\r\n        const [x, y] = e.pos;\r\n        this.x = x;\r\n        this.y = y;\r\n      },\r\n    });\r\n  }\r\n}\r\n\r\nexport function createNode(vm: IDrawPartVm, nodeInfo: INodeItem): NodeItem {\r\n  const node = new NodeItem(vm, nodeInfo);\r\n  vm.nodes.push(node);\r\n  return node;\r\n}\r\n","import Item from './Item';\r\nimport { IEdgeItem, IDrawPartVm, IItem } from '.';\r\nimport cloneDeep from 'lodash/cloneDeep';\r\nimport { Connection, OverlaySpec } from 'jsplumb';\r\nexport default class EdgeItem extends Item implements IEdgeItem {\r\n  public sourceId: string;\r\n  public targetId: string;\r\n  public connection: Connection;\r\n  constructor(vm: IDrawPartVm, edgeInfo: IEdgeItem) {\r\n    super(vm, edgeInfo);\r\n    this.sourceId = edgeInfo.sourceId;\r\n    this.targetId = edgeInfo.targetId;\r\n    // const cloneEdgeInfo = cloneDeep(edgeInfo);\r\n    // Object.assign(this, cloneEdgeInfo);\r\n    // jsplumb连接\r\n    const connection = edgeInfo.connection || this.connect(this.sourceId, this.targetId);\r\n    // @ts-ignore 🌟 有这个方法!\r\n    connection.setData(this); // connection.getData()  ->  Edge实例对象\r\n    this.connection = connection; // edge.connection   -> Connection对象\r\n    this.initOverlays(edgeInfo);\r\n    // @ts-ignore\r\n    connection.bind('dblclick', (e, originalEvent) => {\r\n      originalEvent.stopPropagation();\r\n      // this.selected = true\r\n      this.setSelected(true);\r\n      vm.apiEmit('edge-dblclick', this);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 设置connection overlay\r\n   * @param {string} overlayId\r\n   * @param {OverlaySpec} overlayCfg 参考Connection.addOverlay方法参数\r\n   */\r\n  public setOverLay(overlayId: string, overlayCfg: OverlaySpec) {\r\n    const overlay = this.connection.getOverlay(overlayId);\r\n    // 已存在此overlay\r\n    if (overlay) {\r\n      // @ts-ignore // overlay的声明文件就没写!!!!! 法克\r\n      overlay.setLabel(overlayCfg[1].label || '');\r\n    } else { // 不存在overlay\r\n      // @ts-ignore\r\n      overlayCfg[1].id = overlayCfg[1].id || overlayId;\r\n      // @ts-ignore\r\n      this.connection.addOverlay(overlayCfg);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新业务数据\r\n   * @param task 业务数据对象\r\n   */\r\n  public updateTask(task: IItem[\"task\"]) {\r\n    this.task = cloneDeep(task);\r\n    this.setCondition(task.condition);\r\n  }\r\n\r\n  /**\r\n   * 设置当前连线是否已选择\r\n   * @param {boolean}} flag 是否选择\r\n   */\r\n  public setSelected(flag: boolean) {\r\n    this.selected = flag;\r\n    if (flag) {\r\n      // @ts-ignore\r\n      this.connection.addClass('edge-selected');\r\n      // @ts-ignore\r\n      this.connection.setHover(true);\r\n    } else {\r\n      // @ts-ignore\r\n      this.connection.removeClass('edge-selected');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 连接两个节点(本质是连接endpoint)\r\n   * @param sourceId 来源节点id\r\n   * @param targetId 目标节点id\r\n   */\r\n  private connect(sourceId: string, targetId: string) {\r\n    return this.getJsplumbInstance().connect({\r\n      uuids: [\r\n        'out-' + sourceId,\r\n        'in-' + targetId\r\n      ]\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 初始化 连线箭头 线上文字\r\n   */\r\n  private initOverlays(edgeInfo: IEdgeItem) {\r\n    // 1. 箭头\r\n    this.setOverLay('arrow', ['Arrow', { id: 'arrow', location: 0.95, width: 9, length: 12 }]);\r\n    // 2. 设置*文案* 条件\r\n    this.setCondition(edgeInfo.task.condition);\r\n  }\r\n\r\n  /**\r\n   * 设置边的条件值\r\n   * @param {string} condition 条件字符串\r\n   */\r\n  private setCondition(condition: string = '') {\r\n    this.task.condition = condition;\r\n    this.setOverLay('condition', ['Label', {\r\n      id: 'condition',\r\n      label: condition,\r\n      location: 0.8,\r\n      cssClass: 'wfui-condition-label'\r\n    }]);\r\n  }\r\n}\r\n\r\nexport function createEdge(vm: IDrawPartVm, edgeInfo: IEdgeItem) {\r\n  return new EdgeItem(vm, edgeInfo);\r\n}\r\n\r\n","export default {\r\n  MaxConnections: -1, // 最大连接数\r\n  // Connector: ['StateMachine', { curviness: 5 }], // 连线类型, Bezier, Flowchart, StateMachine, Straight\r\n  Connector: ['Bezier', { curviness: 55 }], // 连线类型, Bezier, Flowchart, StateMachine, Straight\r\n  PaintStyle: { 'stroke': '#345', 'strokeWidth': 2, 'stroke-dasharray': [2, 2] }, // 连线样式\r\n  HoverPaintStyle: { stroke: '#00abfb', strokeWidth: 5 }, // hover时连线样式\r\n  // ConnectionsDetachable: false, // 鼠标拖动是否会断开连线\r\n};\r\n","export function nextMacroTask(timeout: number = 0): Promise<void> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      resolve();\r\n    }, timeout);\r\n  });\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n\r\n/**\r\n * 0. 注册自定义节点\r\n * 1. 初始化jsplumb\r\n * 2. 初始化节点\r\n * 3. 初始化连线\r\n */\r\n\r\nimport { Component, Prop, Vue, Inject } from 'vue-property-decorator';\r\nimport { FunctionalComponentOptions } from 'vue';\r\nimport { RecordPropsDefinition } from 'vue/types/options';\r\nimport { jsPlumb, jsPlumbInstance } from 'jsplumb';\r\nimport NodeItem, { createNode } from './NodeItem';\r\nimport EdgeItem, { createEdge } from './EdgeItem';\r\nimport defaultConfig from './jsplumbDefaultConfig';\r\nimport _ from 'lodash';\r\nimport { IDrawPart, INodeItem, IEdgeItem } from './index';\r\nimport { nextMacroTask } from './utils';\r\n\r\n/**\r\n * 找到带有data-nodetype的节点的子节点\r\n * 即 用户传入的节点的最外层dom\r\n */\r\nfunction findNodeElement(element: HTMLElement): HTMLElement | void {\r\n  const parentElement = element.parentElement;\r\n  if (!parentElement || element.tagName === 'BODY') {\r\n    return;\r\n  }\r\n  if (parentElement.dataset.nodetype) {\r\n    return element;\r\n  } else {\r\n    return findNodeElement(element.parentElement as HTMLElement);\r\n  }\r\n}\r\n\r\nexport const NODE_TYPES: { [name: string]: FunctionalComponentOptions } = {};\r\n\r\n@Component({})\r\nexport default class DrawPart extends Vue implements IDrawPart {\r\n  /**\r\n   * 0. 注册节点类型\r\n   * 注意: 渲染后的节点必须固定宽高\r\n   */\r\n  public static registNodeType<Props>(\r\n    name: string,\r\n    vmCfg: FunctionalComponentOptions<Props, RecordPropsDefinition<Props>>\r\n  ): void {\r\n    if (NODE_TYPES[name]) {\r\n      throw new Error(`此组件(${name})已存在, 请勿重复注册.`);\r\n    } else {\r\n      vmCfg.name = name;\r\n      NODE_TYPES[name] = vmCfg;\r\n      this.component(name, vmCfg);\r\n      console.log(NODE_TYPES, '当前已注册组件');\r\n    }\r\n  }\r\n\r\n  public nodes: NodeItem[] = [];\r\n\r\n  public jsplumbInstance: jsPlumbInstance = jsPlumb.getInstance();\r\n\r\n  @Inject('apiEmit') public apiEmit!: (evtName: string, payload?: any, event?: Event) => void;\r\n\r\n  /**\r\n   * 1. 初始化jsplumb\r\n   */\r\n  public mounted() {\r\n    const chart = this.jsplumbInstance;\r\n    // 1. 导入默认配置\r\n    chart.importDefaults(defaultConfig);\r\n    // 2. 设置container\r\n    const container = this.$refs.container as HTMLElement;\r\n    chart.setContainer(container);\r\n  }\r\n\r\n  /**\r\n   * 2. 初始化节点\r\n   */\r\n  public initNodes(nodes: INodeItem[]): Promise<void> {\r\n    return new Promise((resolve) => {\r\n      this.jsplumbInstance.ready(async () => {\r\n        nodes.map((info) => createNode(this, info));\r\n        await nextMacroTask(); // spec 注意, 这里是不得已而为之, 否则会连线失败, 猜测是endpoint渲染顺序问题\r\n        resolve();\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 3. 初始化连线\r\n   */\r\n  public initEdges(edges: IEdgeItem[]): Promise<void> {\r\n    return new Promise((resolve) => {\r\n      this.jsplumbInstance.ready(() => {\r\n        edges.forEach((edge) => createEdge(this, edge));\r\n        resolve();\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 初始化jsplumb事件\r\n   */\r\n  public initJsplumbEvents() {\r\n    const chart = this.jsplumbInstance;\r\n    const vm = this;\r\n    // 避免两个节点中重复拉线 😄拖动生成连线callback\r\n    chart.bind('beforeDrop', (params) => {\r\n      // @ts-ignore\r\n      const { dropEndpoint, connection } = params;\r\n      if (!dropEndpoint) {\r\n        throw Error('drop在作为Target的节点上了吗? check it');\r\n      }\r\n      // 已存在相同连线\r\n      const connExist = dropEndpoint.connections.some((conn: IEdgeItem) =>\r\n        (conn.targetId === connection.targetId && conn.sourceId === connection.sourceId)\r\n      );\r\n      if (connExist) {\r\n        return false;\r\n      } else {\r\n      // 3.2 给每个新连线生成默认值\r\n        createEdge(vm, {...connection, task: {}});\r\n        // console.log(connection, connection.getData(), 'before drop')\r\n        return true;\r\n      }\r\n    });\r\n    // 连线事件处理\r\n    chart.bind('connection', (info, originalEvent) => {\r\n      console.log('connection event');\r\n      const edge = createEdge(vm, {\r\n        // @ts-ignore\r\n        id: info.connection.getId(),\r\n        task: {},\r\n        sourceId: info.sourceId,\r\n        targetId: info.targetId,\r\n        connection: info.connection\r\n      });\r\n      vm.apiEmit('edge-connected', edge);\r\n    });\r\n  }\r\n\r\n  // 全局失焦处理\r\n  private itemBlurHandler() {\r\n    this.nodes.forEach((node) => {\r\n      // 有dom属性的, 必定被选择过, 否则未选过, 无需判断\r\n      if (node.dom) {\r\n        node.setSelected(false, node.dom);\r\n      }\r\n    });\r\n    // @ts-ignore\r\n    this.jsplumbInstance.getConnections().forEach((conn) => {\r\n      const edge = conn.getData();\r\n      edge.setSelected(false);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 节点双击选择事件\r\n   * 会给节点增加 'node-selected' class\r\n   */\r\n  private nodeDblclickHandler(event: MouseEvent, node: NodeItem) {\r\n    event.stopPropagation();\r\n    this.itemBlurHandler();\r\n    const nodeElement = node.dom || findNodeElement(event.target as HTMLElement);\r\n    if (nodeElement) {\r\n      node.setSelected(true, nodeElement);\r\n      this.apiEmit('node-dblclick', node);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 节点右键点击, 显示右键菜单\r\n   */\r\n  private nodeContextMenuHandler(event: MouseEvent, node: NodeItem) {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n    this.itemBlurHandler();\r\n    this.apiEmit('node-contextmenu', node, event);\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawPart.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawPart.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DrawPart.vue?vue&type=template&id=494c61fe&scoped=true&\"\nimport script from \"./DrawPart.vue?vue&type=script&lang=ts&\"\nexport * from \"./DrawPart.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DrawPart.vue?vue&type=style&index=0&id=494c61fe&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"494c61fe\",\n  null\n  \n)\n\nexport default component.exports","\r\nimport { Component, Vue, Prop } from 'vue-property-decorator';\r\nimport { CreateElement, VNodeChildren } from 'vue';\r\n\r\n@Component({})\r\nexport default class PluginLayer extends Vue {\r\n  @Prop()\r\n  public plugins!: VNodeChildren[];\r\n\r\n  public render(h: CreateElement) {\r\n    return h('div', this.plugins);\r\n  }\r\n}\r\n","var render, staticRenderFns\nimport script from \"./PluginLayer.vue?vue&type=script&lang=ts&\"\nexport * from \"./PluginLayer.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PluginLayer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PluginLayer.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Prop, Vue, Provide } from \"vue-property-decorator\";\r\nimport { FunctionalComponentOptions, VueConstructor, VNode } from \"vue\";\r\nimport { RecordPropsDefinition } from \"vue/types/options\";\r\nimport DrawPart, { NODE_TYPES } from \"./DrawPart.vue\";\r\nimport NodeItem, { createNode } from \"./NodeItem\";\r\nimport EdgeItem from \"./EdgeItem\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport isString from \"lodash/isString\";\r\nimport { INodeItem, IEdgeItem, IItem, ItemType, IWorkflowUI } from \".\";\r\nimport { Connection, jsPlumbInstance } from \"jsplumb\";\r\nimport { nextMacroTask } from \"./utils\";\r\nimport PluginLayer from \"./PluginLayer.vue\";\r\n// @ts-ignore 没有声明文件\r\nimport VueContext from \"vue-context\";\r\nimport \"vue-context/dist/css/vue-context.css\";\r\n\r\ninterface IChartData {\r\n  nodes: INodeItem[];\r\n  edges: IEdgeItem[];\r\n}\r\n\r\ninterface IContextMenu {\r\n  label: string;\r\n  onClick: (nodeinfo: INodeItem) => void;\r\n}\r\n\r\n/**\r\n * 获取此节点的前置节点, (如有回环, 不会获取到本节点)\r\n * @param {string} nodeId 节点id\r\n * @param {Array} edges 连线数组 [ {sourceId, targetId} ]\r\n */\r\nfunction getPreviousNodeIds(nodeId: string, edges: IEdgeItem[]) {\r\n  const result: string[] = [];\r\n  const originNodeId = nodeId;\r\n  const findPrevNodeIds = (nId: string) => {\r\n    const prevIds = edges.filter((edge) => edge.targetId === nId).map((v) => v.sourceId);\r\n    prevIds.forEach((prevId) => {\r\n      if (!result.includes(prevId) && prevId !== originNodeId) {\r\n        result.push(prevId);\r\n        findPrevNodeIds(prevId);\r\n      }\r\n    });\r\n    return result;\r\n  };\r\n  findPrevNodeIds(nodeId);\r\n  return result;\r\n}\r\n\r\n/**\r\n * 删除掉vm成员属性,\r\n * cloneDeep task\r\n */\r\nfunction payloadInterception(payload: object) {\r\n  return Object.entries(payload).reduce((newPayload: {[key: string]: any}, [key, value]) => {\r\n    if (key !== 'vm') {\r\n      newPayload[key] = value;\r\n    }\r\n    if (key === 'task') {\r\n      newPayload[key] = cloneDeep(value);\r\n    }\r\n    return newPayload;\r\n  }, {});\r\n}\r\n\r\n/**\r\n * 计算宽高位置\r\n */\r\nfunction getSize(size: number | string): string {\r\n  return typeof size === 'string' ? size : size + 'px';\r\n}\r\n\r\nconst PLUGINS: Array<\r\n  ( workSpaceDom: HTMLElement,\r\n    chartViewVueInstance: Vue,\r\n    jsplumbInstance: jsPlumbInstance) => VNode | void\r\n  > = [];\r\n\r\n@Component({\r\n  components: {\r\n    DrawPart,\r\n    PluginLayer,\r\n    VueContext\r\n  },\r\n})\r\nexport default class ChartView extends Vue implements IWorkflowUI {\r\n  /**\r\n   * 注册节点类型\r\n   */\r\n  public static registNodeTypeByRender<Props>(\r\n    name: string,\r\n    vmCfg: FunctionalComponentOptions<Props, RecordPropsDefinition<Props>>\r\n  ): void {\r\n    return DrawPart.registNodeType(name, vmCfg);\r\n  }\r\n\r\n  /**\r\n   * 通过SFC注册节点类型\r\n   */\r\n  public static registNodeType(componentName: string, SFC: VueConstructor, width?: number, height?: number) {\r\n    if (!width || !height) {\r\n      console.warn('width或height未传入, 请确保已经在组件内部固定了节点宽高');\r\n    }\r\n    const regist = DrawPart.registNodeType.bind(DrawPart);\r\n    regist(componentName, {\r\n      name: componentName,\r\n      functional: true,\r\n      render(h, ctx) {\r\n        let style;\r\n        if (width && height) {\r\n          style = { width: `${width}px`, height: `${height}px` };\r\n        }\r\n        const data = {\r\n          props: ctx.props as { [key: string]: any },\r\n          style\r\n        };\r\n        return h(SFC, data);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 注册插件\r\n   */\r\n  public static registPlugins(\r\n    plugins: typeof PLUGINS\r\n  ): void {\r\n    PLUGINS.push(...plugins);\r\n  }\r\n\r\n  /**\r\n   * 获取绘图板组件对象实例\r\n   */\r\n  get drawPart(): Vue & DrawPart {\r\n    return this.$refs.chart as Vue & DrawPart;\r\n  }\r\n\r\n  // 工作流dom样式\r\n  get workFlowStyle() {\r\n    return {\r\n      width: getSize(this.width!),\r\n      height: getSize(this.height!)\r\n    };\r\n  }\r\n\r\n  @Prop({\r\n    default: []\r\n  })\r\n  public contextMenuList!: IContextMenu[];\r\n\r\n  // 工作流组件宽度\r\n  @Prop({\r\n    default: 800\r\n  })\r\n  public width!: string | number;\r\n  // 工作流组件高度\r\n  @Prop({\r\n    default: 600\r\n  })\r\n  public height!: string | number;\r\n\r\n  public plugins: VNode[] = [];\r\n  /**\r\n   * 初始化数据\r\n   */\r\n  public async initChart(data: IChartData): Promise<void> {\r\n    const drawPart = this.drawPart;\r\n    drawPart.jsplumbInstance.reset();\r\n    drawPart.nodes = [];\r\n    const nodes = cloneDeep(data.nodes);\r\n    const edges = cloneDeep(data.edges);\r\n    // 必须先初始化节点, 否则连线无效\r\n    await drawPart.initNodes(nodes);\r\n    await drawPart.initEdges(edges);\r\n    drawPart.initJsplumbEvents();\r\n    return Promise.resolve();\r\n  }\r\n\r\n  public setData(chartData: IChartData) {\r\n    return this.initChart(chartData);\r\n  }\r\n\r\n  /**\r\n   * 创建节点\r\n   */\r\n  public async createNode(nodeInfo: INodeItem) {\r\n    const node = await createNode(this.drawPart, cloneDeep(nodeInfo));\r\n    await nextMacroTask(); // spec 注意, 这里是不得已而为之, 否则会连线失败, 猜测是endpoint渲染顺序问题\r\n    this.apiEmit(\"node-created\", node);\r\n  }\r\n\r\n  /**\r\n   * 删除节点/边\r\n   */\r\n  public deleteItem(itemType: ItemType, id: string) {\r\n    const fnMap = {\r\n      node: this.deleteNode,\r\n      edge: this.deleteEdge\r\n    };\r\n    return fnMap[itemType](id);\r\n  }\r\n\r\n  /**\r\n   * 更新节点/边\r\n   */\r\n  public updateItem(itemType: ItemType, id: string, task: object) {\r\n    const fnMap = {\r\n      node: this.updateNode,\r\n      edge: this.updateEdge\r\n    };\r\n    return fnMap[itemType](id, task);\r\n  }\r\n\r\n  /**\r\n   * 获取全部节点/连线数据\r\n   */\r\n  public getData() {\r\n    const nodes = this.getNodes();\r\n    const edges = this.getEdges();\r\n    return {\r\n      nodes: nodes.map(payloadInterception),\r\n      edges: edges.map(payloadInterception)\r\n    };\r\n  }\r\n\r\n  /**\r\n   * 根据id查询节点\r\n   */\r\n  public getNodeById(id: string): INodeItem | void {\r\n    const nodes = this.drawPart.nodes;\r\n    return nodes.find((n) => n.id === id);\r\n  }\r\n\r\n  /**\r\n   * 获取前置节点\r\n   * @param {string} nodeId 根据id查询节点\r\n   */\r\n  public getPreviousNodes(nodeId: string) {\r\n    const { nodes, edges } = this.getData();\r\n    const currNode = nodes.find((node) => node.id === nodeId);\r\n    if (!currNode) {\r\n      throw new Error(`当前节点(id:${nodeId})不存在`);\r\n    }\r\n    const prevNodeIds = getPreviousNodeIds(nodeId, edges as IEdgeItem[]);\r\n    return prevNodeIds.map(this.getNodeById);\r\n  }\r\n\r\n  /**\r\n   * 右键菜单点击事件处理\r\n   */\r\n  public contextMenuItemClick(menu: IContextMenu, data: INodeItem) {\r\n    menu.onClick(cloneDeep(data));\r\n  }\r\n\r\n  /**\r\n   * 删除节点\r\n   */\r\n  private async deleteNode(id: string) {\r\n    const drawPart = this.drawPart;\r\n    // 1. 从jsplumb体系中删除此节点\r\n    drawPart.jsplumbInstance.remove(id);\r\n    // 2. 从本地数据中删除节点\r\n    const index = drawPart.nodes.findIndex((currNode) => currNode.id === id);\r\n    if (index === -1) {\r\n      throw new Error(`没有id: ${id}为的节点`);\r\n    }\r\n    const node = drawPart.nodes[index];\r\n    drawPart.nodes.splice(index, 1);\r\n    await nextMacroTask();\r\n    return node;\r\n  }\r\n\r\n  /**\r\n   * 删除连线\r\n   */\r\n  private async deleteEdge(id: string) {\r\n    const chart = this.drawPart.jsplumbInstance;\r\n    // @ts-ignore\r\n    const allConnections: Connection[] = chart.getConnections();\r\n    // @ts-ignore\r\n    const currConn = allConnections.filter((edge) => edge.getId() === id)[0];\r\n    if (currConn) {\r\n      chart.deleteConnection(currConn);\r\n    } else {\r\n      console.error('此id没有对应的edge');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新节点\r\n   */\r\n  private async updateNode(id: string, task: object) {\r\n    const drawPart = this.drawPart;\r\n    const currNode: NodeItem = drawPart.nodes.filter((node) => node.id === id)[0];\r\n    if (currNode) {\r\n      currNode.updateTask(cloneDeep(task));\r\n    } else {\r\n      console.error(`未获取到id为(${id})的节点`);\r\n    }\r\n    await nextMacroTask();\r\n    this.apiEmit(\"node-updated\", {\r\n      id: currNode.id,\r\n      nodeType: currNode.nodeType,\r\n      selected: currNode.selected,\r\n      task: currNode.task\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 更新连线\r\n   */\r\n  private async updateEdge(id: string, task: object) {\r\n    // @ts-ignore\r\n    const allConnections: Connection[] = this.drawPart.jsplumbInstance.getConnections();\r\n    const currEdge = allConnections\r\n      // @ts-ignore\r\n      .map((connection) => connection.getData())\r\n      .filter((edge) => edge.id === id)[0];\r\n    if (currEdge) {\r\n      currEdge.updateTask(task);\r\n    } else {\r\n      console.error('此id没有对应的edge');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取全部节点\r\n   */\r\n  private getNodes(): INodeItem[] {\r\n    return this.drawPart.nodes.map((node) => node);\r\n  }\r\n\r\n  /**\r\n   * 获取全部连线\r\n   */\r\n  private getEdges(): IEdgeItem[] {\r\n    // @ts-ignore\r\n    const connections: Connection[] = this.drawPart.jsplumbInstance.getConnections();\r\n    // @ts-ignore\r\n    return connections.map((conn) => conn.getData());\r\n  }\r\n\r\n  // todo addEdge\r\n  /**\r\n   * 连接两个节点, 自动选择EndPoint\r\n   * 之后要做完了节点的多个EndPoint配置再写这个\r\n   */\r\n  // public async addConnection(sourceId: string, targetId: string): Connection {\r\n  // return\r\n  // }\r\n\r\n      // 节点drop事件处理\r\n  private dropHandler(e: DragEvent) {\r\n    e.preventDefault();\r\n    //  1. 节点视图处理\r\n    const nodeType = e.dataTransfer!.getData('nodeType');\r\n    if (!isString(nodeType)) {\r\n      throw new TypeError('获取节点类型失败');\r\n    }\r\n    // fix: 拖动画布后, 拖入节点不显示问题(e.toElement改变导致获取数据错误)\r\n    const boundRect = this.drawPart.$el.getBoundingClientRect();\r\n    const x = e.clientX - boundRect.x - 20;\r\n    const y = e.clientY - boundRect.y - 20;\r\n    const CURR_TYPES = Object.keys(NODE_TYPES);\r\n    if (!CURR_TYPES.includes(nodeType)) {\r\n      throw new Error(`${nodeType}节点类型未注册;\\n\\n当前已注册节点类型: [${CURR_TYPES.join(',')}]`);\r\n    }\r\n    // 2. 节点任务处理\r\n    const task = e.dataTransfer!.getData('task');\r\n    this.createNode({\r\n      x,\r\n      y,\r\n      nodeType,\r\n      task: JSON.parse(task)\r\n    });\r\n  }\r\n\r\n  private preventHandler(e: Event) {\r\n    // 注意: 此处阻止了以后, drop才会触发\r\n    e.preventDefault();\r\n  }\r\n\r\n  /**\r\n   * 触发事件, 用于给外部暴露的api事件, 所以我的方法名取的很好😁\r\n   */\r\n  @Provide()\r\n  private apiEmit(eventName: string, payload?: any, originEvent?: Event): void {\r\n    // done todo 这里originEvent先留着, 也许用得上, 果然用上了....\r\n    // 参数拦截\r\n    const params = payloadInterception(payload);\r\n    // 触发外部事件\r\n    this.$emit(eventName, params);\r\n    // spec 右键菜单特殊处理\r\n    if (eventName === 'node-contextmenu') {\r\n      // @ts-ignore 这个插件目前没写声明文件\r\n      this.$refs.contextMenu.open(originEvent, params);\r\n    }\r\n  }\r\n\r\n  private mounted() {\r\n    const vm = this;\r\n    const dom = this.$refs.workSpace as HTMLElement;\r\n    const jsplumbInstance = this.drawPart.jsplumbInstance;\r\n    const pluginsVNodes = PLUGINS\r\n      .map((plugin) => plugin.call(this, dom, vm, jsplumbInstance))\r\n      .filter((vnode) => vnode);\r\n    this.plugins.push(...pluginsVNodes as VNode[]);\r\n  }\r\n  private beforeDestroy() {\r\n    this.$emit('hook:beforeDestory');\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartView.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartView.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ChartView.vue?vue&type=template&id=2dfee948&scoped=true&\"\nimport script from \"./ChartView.vue?vue&type=script&lang=ts&\"\nexport * from \"./ChartView.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ChartView.vue?vue&type=style&index=0&id=2dfee948&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2dfee948\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./ChartView.vue?vue&type=custom&index=0&blockType=doc\"\nif (typeof block0 === 'function') block0(component)\n\nexport default component.exports","import { DirectiveBinding } from 'vue/types/options';\r\n\r\nconst draggableNodetype = {\r\n  inserted(el: HTMLElement, binding: DirectiveBinding) {\r\n    const { value } = binding; // value 即为nodeType名称\r\n    if (!value || !value.nodeType) {\r\n      throw new Error('v-draggableNodetype需要传入一个对象, 如: { nodeType: \"SimpleFlowNode\", task: { ...节点类型数据 } }. task(非必传)内容会被深拷贝到节点task中');\r\n    }\r\n    value.task = value.task || {};\r\n    const { nodeType, task } = value;\r\n    el.draggable = true;\r\n    el.ondragstart = (evt: DragEvent) => {\r\n      evt.dataTransfer!.setData('nodeType', nodeType);\r\n      evt.dataTransfer!.setData('task', JSON.stringify(task));\r\n    };\r\n    el.ondragend = (evt) => evt.preventDefault();\r\n    el.ondragover = (evt) => evt.preventDefault();\r\n  }\r\n};\r\n\r\nexport default draggableNodetype;\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"draggable-bg\",style:({ backgroundPosition: _vm.backgroundPosition })})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\r\nimport { Component, Vue, Prop } from 'vue-property-decorator';\r\n\r\n@Component\r\nexport default class DraggableBg extends Vue {\r\n\r\n  @Prop()\r\n  private chartViewVm!: Vue;\r\n\r\n  @Prop()\r\n  private workSpace!: HTMLElement;\r\n\r\n  private dragView = {\r\n    isDragging: false,\r\n    startX: 0,\r\n    startY: 0\r\n  };\r\n\r\n  private nodeListStyle = {\r\n    left: '0px',\r\n    top: '0px'\r\n  };\r\n\r\n  private drawLayerDom!: HTMLElement;\r\n\r\n  private backgroundPosition = '';\r\n\r\n  // 1. 开始拖动\r\n  public mousedownHandler(event: MouseEvent) {\r\n    this.dragView = {\r\n      isDragging: true,\r\n      startX: event.x,\r\n      startY: event.y\r\n    };\r\n  }\r\n\r\n  // 2. 拖动中\r\n  public mousemoveHandler(event: MouseEvent) {\r\n    if (this.dragView.isDragging) {\r\n      const deltaX = event.x - this.dragView.startX;\r\n      const deltaY = event.y - this.dragView.startY;\r\n      this.dragView.startX = event.x;\r\n      this.dragView.startY = event.y;\r\n      this.moveHandler(deltaX, deltaY);\r\n    }\r\n  }\r\n\r\n  // 3. 拖动结束\r\n  public mouseupHandler(event: MouseEvent) {\r\n    this.dragView.isDragging = false;\r\n  }\r\n\r\n  // 视图移动处理器\r\n  public moveHandler(x: number, y: number) {\r\n    const { left, top } = this.nodeListStyle;\r\n    const leftStr = this.nodeListStyle.left = parseFloat(left) + x + 'px';\r\n    const topStr = this.nodeListStyle.top = parseFloat(top) + y + 'px';\r\n    // 背景拖动\r\n    this.backgroundPosition = `left ${leftStr} top ${topStr}`;\r\n    // 画布拖动\r\n    this.drawLayerDom.style.left = leftStr;\r\n    this.drawLayerDom.style.top = topStr;\r\n  }\r\n\r\n  private mounted() {\r\n    // 2. 视图拖动绑定\r\n    const drawLayerDom = this.drawLayerDom = this.chartViewVm.$refs.drawLayer as HTMLElement;\r\n    drawLayerDom.style.position = 'relative';\r\n\r\n    this.workSpace.addEventListener('mousedown', this.mousedownHandler);\r\n    this.workSpace.addEventListener('mousemove', this.mousemoveHandler);\r\n    document.body.addEventListener('mouseup', this.mouseupHandler);\r\n  }\r\n\r\n  private beforeDestory() {\r\n    console.log('hook beforeDestory');\r\n    this.workSpace.removeEventListener('mousedown', this.mousedownHandler);\r\n    this.workSpace.removeEventListener('mousemove', this.mousemoveHandler);\r\n    document.body.removeEventListener('mouseup', this.mouseupHandler);\r\n  }\r\n}\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DraggableBg.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DraggableBg.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DraggableBg.vue?vue&type=template&id=f8f4b826&scoped=true&\"\nimport script from \"./DraggableBg.vue?vue&type=script&lang=ts&\"\nexport * from \"./DraggableBg.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DraggableBg.vue?vue&type=style&index=0&id=f8f4b826&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f8f4b826\",\n  null\n  \n)\n\nexport default component.exports","import { jsPlumbInstance } from 'jsplumb';\r\nimport { VNode } from 'vue/types/umd';\r\nimport DraggableBg from './DraggableBg.vue';\r\n\r\nexport default function(\r\n  workSpace: HTMLElement,\r\n  chartViewVm: Vue,\r\n  jsplumbInstance: jsPlumbInstance\r\n): VNode | void {\r\n  // 当前在mounted hook中\r\n  const h = chartViewVm.$createElement;\r\n  // 1. 生成背景\r\n  const bgComp = h(DraggableBg, {\r\n    props: {\r\n      chartViewVm,\r\n      workSpace\r\n    }\r\n  });\r\n  return bgComp;\r\n  // const bgDom = document.createElement('div');\r\n  // bgDom.setAttribute('style', `\r\n  //   width: 10000px;\r\n  //   height: 10000px;\r\n  //   position: absolute;\r\n  //   left: -5000px;\r\n  //   top: -5000px;\r\n  //   background-image: linear-gradient(#eee 1px, transparent 0), linear-gradient(90deg, #eee 1px, transparent 0);\r\n  //   background-size: 30px 30px;\r\n  // `);\r\n  // workSpace.insertBefore(bgDom, workSpace.firstElementChild);\r\n\r\n  // 2. 视图拖动绑定\r\n  // const drawLayerDom = chartViewVm.$refs.drawLayer as HTMLElement;\r\n  // drawLayerDom.style.position = 'relative';\r\n  // const mousemove = mousemoveHandler.bind(null, bgDom, drawLayerDom);\r\n  // workSpace.addEventListener('mousedown', mousedownHandler);\r\n  // workSpace.addEventListener('mousemove', mousemove);\r\n  // document.body.addEventListener('mouseup', mouseupHandler);\r\n  // // 3. 视图拖动解绑\r\n  // chartViewVm.$on('hook:beforeDestory', () => {\r\n  //   console.log('hook beforeDestory');\r\n  //   workSpace.removeEventListener('mousedown', mousedownHandler);\r\n  //   workSpace.removeEventListener('mousemove', mousemove);\r\n  //   document.body.removeEventListener('mouseup', mouseupHandler);\r\n  // });\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"zoom-control\"},[_c('i',{staticClass:\"iconfont icon-jianshao\",class:['icon', { disabled: _vm.minusDisabled }],on:{\"click\":function($event){return _vm.change(-_vm.defaultIncrement)}}}),_c('span',{staticClass:\"zoom-rate\"},[_vm._v(_vm._s(_vm.zoomRate)+\"%\")]),_c('i',{staticClass:\"iconfont icon-zengjia-cuxiantiao\",class:['icon', { disabled: _vm.addDisabled }],on:{\"click\":function($event){return _vm.change(+_vm.defaultIncrement)}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\r\nimport { Vue, Prop, Component } from \"vue-property-decorator\";\r\nimport '../../../../assets/iconfont.css';\r\nimport { jsPlumbInstance } from 'jsplumb';\r\n\r\n@Component\r\nexport default class ZoomControl extends Vue {\r\n  @Prop()\r\n  private jsplumbInstance!: jsPlumbInstance;\r\n  @Prop()\r\n  private drawLayerDom!: HTMLElement;\r\n\r\n  private defaultIncrement = 10; // 默认增量\r\n  private zoomRate = 100; // 缩放比例 默认100\r\n      // 放大缩小按钮禁用\r\n  private addDisabled = false;\r\n  private minusDisabled = false;\r\n\r\n  private change(delta: number) {\r\n    let zoomRate = this.zoomRate + delta;\r\n    if (zoomRate < 50) {\r\n      zoomRate = 50;\r\n      this.minusDisabled = true;\r\n    } else if (zoomRate > 200) {\r\n      zoomRate = 200;\r\n      this.addDisabled = true;\r\n    } else {\r\n      this.addDisabled = false;\r\n      this.minusDisabled = false;\r\n    }\r\n    this.zoomRate = zoomRate;\r\n    // this.$emit('zoom-change', zoomRate / 100);\r\n    const zoom = zoomRate / 100;\r\n    this.drawLayerDom.style.transform = `scale(${zoom})`;\r\n    this.jsplumbInstance.setZoom(zoom);\r\n  }\r\n}\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ZoomControl.vue?vue&type=template&id=b2ad3472&scoped=true&\"\nimport script from \"./ZoomControl.vue?vue&type=script&lang=ts&\"\nexport * from \"./ZoomControl.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ZoomControl.vue?vue&type=style&index=0&id=b2ad3472&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b2ad3472\",\n  null\n  \n)\n\nexport default component.exports","import { VNode } from 'vue/types/umd';\r\nimport { jsPlumbInstance } from 'jsplumb';\r\nimport ZoomControl from './ZoomControl.vue';\r\n\r\nexport default function(\r\n  workSpace: HTMLElement,\r\n  chartViewVm: Vue,\r\n  jsplumbInstance: jsPlumbInstance\r\n): VNode | void {\r\n  const h = chartViewVm.$createElement;\r\n  const drawLayerDom = chartViewVm.$refs.drawLayer as HTMLElement;\r\n  const vnode =  h(ZoomControl, {\r\n    props: {\r\n      drawLayerDom,\r\n      jsplumbInstance\r\n    }\r\n  });\r\n  return vnode;\r\n}\r\n","import ChartView from './ChartView.vue';\r\nimport DraggableNodeType from './DraggableNodeType';\r\nimport DraggableBG from \"./plugins/draggableBackground\";\r\nimport ZoomControl from \"./plugins/zoomControl\";\r\n\r\n// @ts-ignore\r\nChartView.registPlugins([DraggableBG, ZoomControl]);\r\n\r\nexport const draggableNodetype = DraggableNodeType;\r\nexport default ChartView;\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('button',{staticClass:\"log-btn\",on:{\"click\":_vm.log}},[_vm._v(\"btn\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <span>\r\n    <button @click=\"log\" class=\"log-btn\">btn</button>\r\n  </span>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Demo',\r\n  props: ['compTitle'],\r\n  methods: {\r\n    log() {\r\n      console.log('当前组件标题: ' + this.compTitle);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.log-btn {\r\n  cursor: pointer;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Demo.vue?vue&type=template&id=833f5bd8&scoped=true&\"\nimport script from \"./Demo.vue?vue&type=script&lang=js&\"\nexport * from \"./Demo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Demo.vue?vue&type=style&index=0&id=833f5bd8&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"833f5bd8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"default-flow-node\",style:({\n    color: _vm.mainColor,\n    borderColor: _vm.mainColor\n  })},[_c('div',{staticClass:\"iconfont\",style:({\n      color: _vm.mainColor\n    })},[_vm._v(\"\")]),_c('div',{staticClass:\"title\"},[_c('span',{domProps:{\"textContent\":_vm._s(_vm.title)}}),_c('span',{staticClass:\"des\",domProps:{\"textContent\":_vm._s(_vm.status)}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div\r\n    class=\"default-flow-node\"\r\n    :style=\"{\r\n      color: mainColor,\r\n      borderColor: mainColor\r\n    }\"\r\n  >\r\n    <!-- <h4 class=\"status\" v-text=\"status\"></h4> -->\r\n     <div\r\n      class=\"iconfont\"\r\n      :style=\"{\r\n        color: mainColor\r\n      }\"\r\n    >&#xe627;</div>\r\n    <div class=\"title\">\r\n      <span v-text=\"title\"></span>\r\n      <span v-text=\"status\" class=\"des\"></span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'DefaultFlowNode',\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: '请输入标题'\r\n    },\r\n    status: {\r\n      type: String,\r\n      default: '未开始',\r\n      validator(val) {\r\n        const flag = ['未开始', '执行中', '执行成功', '执行失败'].includes(val);\r\n        return flag;\r\n      },\r\n    },\r\n  },\r\n  computed: {\r\n    mainColor() {\r\n      const map = {\r\n        未开始: '#4c4c4b',\r\n        执行中: '#6888EA',\r\n        执行成功: '#08c692',\r\n        执行失败: '#fe0001'\r\n      };\r\n      return map[this.status];\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n.default-flow-node {\r\n  width: 150px;\r\n  height: 80px;\r\n  font-size: 12px;\r\n  border: 1px solid #d0d6dc;\r\n  border-left-width: 8px;\r\n  border-radius: 8px;\r\n  background-color: #fff;\r\n  transition: all 0.3s ease-in;\r\n  text-align: left;\r\n  .iconfont{\r\n    width: 40px;\r\n    display: inline-block;\r\n    font-size: 26px;\r\n    color: #777;\r\n    margin-left:15px;\r\n    text-align: center;\r\n    line-height: 80px;\r\n    vertical-align: middle;\r\n  }\r\n  .title {\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    color: #4c4c4b;\r\n    text-align: left;\r\n    padding-left: 8px;\r\n    span{\r\n      display: block;\r\n      color: #666;\r\n      font-size: 14px;\r\n      &.des{\r\n        color: #999;\r\n        font-size: 12px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DefaultFlowNode.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DefaultFlowNode.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DefaultFlowNode.vue?vue&type=template&id=f1330de0&scoped=true&\"\nimport script from \"./DefaultFlowNode.vue?vue&type=script&lang=js&\"\nexport * from \"./DefaultFlowNode.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DefaultFlowNode.vue?vue&type=style&index=0&id=f1330de0&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f1330de0\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div id=\"app\">\r\n    <div class=\"op-container\">\r\n      <div class=\"type-list\">\r\n          <div\r\n            class=\"con\"\r\n            v-for=\"(item, index) in testNode\"\r\n            :key=\"index\"\r\n            v-draggable-nodetype=\"item\">\r\n            <i class=\"iconfont\" v-html=\"item.icon\"></i>\r\n            <div class=\"name\">{{item.name}}</div>\r\n          </div>\r\n      </div>\r\n      <ChartView\r\n        width=\"800px\"\r\n        height=\"600px\"\r\n        ref=\"chart\"\r\n        @node-created=\"nodeCreated\"\r\n        @node-dblclick=\"nodeSelected\"\r\n        @node-deleted=\"nodeDeleted\"\r\n        @edge-dblclick=\"edgeSelected\"\r\n        @edge-connected=\"edgeConnected\"\r\n        :contextMenuList=\"[\r\n          { label: '删除', onClick: node => contextMenuClick(node, '删除') },\r\n          { label: '编辑', onClick: node => contextMenuClick(node, '编辑') }\r\n        ]\"\r\n      />\r\n    <div class=\"edit-item\" v-if=\"showEditBox\">\r\n      <div class=\"con\">类型：{{currentEditingItem.itemType}}</div>\r\n      <div class=\"con\">id：{{currentEditingItem.id}}</div>\r\n      <div class=\"con\">节点类型: {{currentEditingItem.nodeType}}</div>\r\n      <div class=\"con\">标题:<input type=\"text\" v-model=\"currentEditingItem.task.title\"></div>\r\n      <div class=\"con\">状态:\r\n        <select v-model=\"currentEditingItem.task.status\">\r\n          <option value=\"未开始\">未开始</option>\r\n          <option value=\"执行中\">执行中</option>\r\n          <option value=\"执行失败\">执行失败</option>\r\n          <option value=\"执行成功\">执行成功</option>\r\n        </select>\r\n      </div>\r\n      <button class=\"btn\" @click=\"updateItem(currentEditingItem.itemType, currentEditingItem.id, currentEditingItem.task)\">更新节点</button>\r\n      <button class=\"btn\" @click=\"printPrevNodes(currentEditingItem.id)\">获取前置节点</button>\r\n      <button class=\"btn\" @click=\"getNodeById(currentEditingItem.id)\">获取当前节点</button>\r\n      <button class=\"btn\" @click=\"deleteItem('node', currentEditingItem.id)\">删除节点</button>\r\n      <button class=\"btn\" @click=\"showEditBox=!showEditBox\">关闭弹窗</button>\r\n    </div>\r\n    </div>\r\n     <div class=\"btnBox\">\r\n      <button class=\"btn\" @click=\"getData\">获取数据</button>\r\n      <button class=\"btn\" @click=\"changeData\">更改数据</button>\r\n      <button class=\"btn\" @click=\"createNode\">创建工具节点</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// @ts-nocheck\r\nimport { Component, Vue } from \"vue-property-decorator\";\r\nimport ChartView, { draggableNodetype } from \"./components/ChartView/main.ts\";\r\nimport Demo from \"./components/PresetNodes/Demo.vue\";\r\nimport FlowNode from \"./components/PresetNodes/DefaultFlowNode.vue\";\r\n// import DragBG from './components/ChartView/plugins/draggableBackground';\r\n// import HelloWorld from './components/HelloWorld.vue';\r\n// 注册条件节点\r\nChartView.registNodeTypeByRender('Condition', {\r\n  name: 'Condition',\r\n  functional: true,\r\n  props: {\r\n    title: String\r\n  },\r\n  render(h) {\r\n    return h('div', [\r\n      h('i', {\r\n        style: {\r\n          width: '32px',\r\n          height: '32px',\r\n          fontSize: '32px'\r\n        },\r\n        attrs: {\r\n          class: 'iconfont icon-tiaojian' // 如果是1那种写法,不能实时获取,获取的还是undefined\r\n        }\r\n      }\r\n      )\r\n    ]);\r\n  }\r\n});\r\n// 注册控制节点\r\nChartView.registNodeTypeByRender('Control', {\r\n  name: 'Control',\r\n  functional: true,\r\n  props: {\r\n    title: String\r\n  },\r\n  render(h) {\r\n    return h('div', [\r\n      h('i', {\r\n        style: {\r\n          width: '32px',\r\n          height: '32px',\r\n          fontSize: '32px'\r\n        },\r\n        attrs: {\r\n          class: 'iconfont icon-changyongtubiao_Farmshezhi' // 如果是1那种写法,不能实时获取,获取的还是undefined\r\n        }\r\n      }\r\n      )\r\n    ]);\r\n  }\r\n});\r\n// 注册流程节点\r\nChartView.registNodeType(\"FlowNode\", FlowNode);\r\n\r\n// ChartView.registPlugins([\r\n//   DragBG\r\n// ]);\r\n\r\nexport default {\r\n  name: \"App\",\r\n  components: {\r\n    ChartView\r\n  },\r\n  directives: {\r\n    draggableNodetype\r\n  },\r\n  data() {\r\n    return {\r\n      testNode: [\r\n        {nodeType: 'Control', name: '控制', icon: '&#xe602;'},\r\n        {nodeType: 'Condition', name: '条件', icon: '&#xe6d8;'},\r\n        {nodeType: 'FlowNode', name: '流程节点', icon: '&#xe627;'},\r\n      ],\r\n      showEditBox: false,\r\n      currentEditingItem: {\r\n        itemType: \"\", // node, edge\r\n        task: {}\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    // 删除\r\n    nodeDeleted(node) {\r\n      console.log('删除', node);\r\n    },\r\n    // 创建\r\n    nodeCreated(node) {\r\n      console.log('创建', node);\r\n    },\r\n    // 双击节点\r\n    nodeSelected(node) {\r\n      console.log('双击节点', node);\r\n      this.showEditBox = true;\r\n      this.currentEditingItem = Object.assign({ itemType: 'node' }, node);\r\n    },\r\n    // 双击边\r\n    edgeSelected(edge) {\r\n      console.log('双击边', edge);\r\n      // this.currentEditingItem = Object.assign({ itemType: 'edge' }, edge)\r\n    },\r\n    // 边连线事件\r\n    edgeConnected(info) {\r\n      console.log('边连线', info);\r\n      const { id } = info;\r\n      this.$refs.chart.updateItem('edge', id, { condition: 'yes' });\r\n    },\r\n    // 实例下获取数据方法\r\n    getData() {\r\n      console.log('流程数据', this.$refs.chart.getData());\r\n    },\r\n    //  实例下更改数据方法\r\n    changeData() {\r\n      this.$refs.chart.setData({\r\n        nodes: [\r\n          {\r\n            id: '1',\r\n            x: 10,\r\n            y: 50,\r\n            nodeType: 'FlowNode',\r\n            task: {\r\n              title: '更改数据',\r\n              status: '执行成功'\r\n            }\r\n          }\r\n        ],\r\n        edges: []\r\n      });\r\n    },\r\n    // 实例下创建节点\r\n    createNode() {\r\n      this.$refs.chart.createNode({ nodeType: 'FlowNode', task: {\r\n        title: '新创建',\r\n        des: '新描述',\r\n        status: '执行失败'\r\n      } });\r\n\r\n    },\r\n    // 实例下更新节点方法\r\n    updateItem(itemType, id, task) {\r\n      this.$refs.chart.updateItem(itemType, id, task);\r\n      this.showEditBox = false;\r\n    },\r\n    // 实例下前置方法\r\n    printPrevNodes(currNodeId) {\r\n      console.log('前置节点', this.$refs.chart.getPreviousNodes(currNodeId));\r\n      this.showEditBox = false;\r\n    },\r\n    // 实例下通过Id获取节点方法\r\n    getNodeById(currNodeId) {\r\n      console.log('当前节点', this.$refs.chart.getNodeById(currNodeId));\r\n      this.showEditBox = false;\r\n    },\r\n    // 实例下删除方法\r\n    deleteItem(itemType, id) {\r\n      this.$refs.chart.deleteItem(itemType, id);\r\n      this.showEditBox = false;\r\n    },\r\n    // 右击菜单 nodeInfo节点 menuLabel菜单label(当前未更新)\r\n    contextMenuClick(nodeInfo, menuLabel) {\r\n      if (menuLabel === '删除') {\r\n        this.$refs.chart.deleteItem('node', nodeInfo.id);\r\n      } else if (menuLabel === '编辑') {\r\n        this.showEditBox = true;\r\n        this.currentEditingItem = Object.assign({ itemType: 'node' }, nodeInfo);\r\n      }\r\n    }\r\n  },\r\n  async mounted() {\r\n    // 组件初始化数据\r\n    this.$refs.chart\r\n      .initChart({\r\n        nodes: [\r\n          {\r\n            id: \"1\",\r\n            x: 10,\r\n            y: 50,\r\n            nodeType: \"FlowNode\",\r\n            task: {\r\n              title: \"初始节点\",\r\n              status: '执行成功'\r\n            }\r\n          },\r\n          {\r\n            id: \"2\",\r\n            x: 250,\r\n            y: 80,\r\n            nodeType: \"Condition\",\r\n            task: {}\r\n          },\r\n          {\r\n            id: \"3\",\r\n            x: 400,\r\n            y: 52,\r\n            nodeType: \"FlowNode\",\r\n            task: {\r\n              title: \"流程A\",\r\n              status: '未开始'\r\n            }\r\n          },\r\n          {\r\n            id: \"4\",\r\n            x: 400,\r\n            y: 150,\r\n            nodeType: \"FlowNode\",\r\n            task: {\r\n              title: \"流程B\",\r\n              status: '执行中'\r\n            }\r\n          },\r\n          {\r\n            id: \"5\",\r\n            x: 650,\r\n            y: 80,\r\n            nodeType: \"Control\",\r\n            task: {}\r\n          },\r\n          {\r\n            id: \"6\",\r\n            x: 800,\r\n            y: 80,\r\n            nodeType: \"FlowNode\",\r\n            task: {\r\n              title: '结束节点',\r\n              status: '执行失败'\r\n            }\r\n          }\r\n        ],\r\n        edges: [\r\n          {\r\n            id: \"_jsplumb_c_1593419365488\",\r\n            sourceId: \"1\",\r\n            targetId: \"2\",\r\n            task: {}\r\n          },\r\n          {\r\n            id: \"_jsplumb_c_1593419365489\",\r\n            sourceId: \"2\",\r\n            targetId: \"3\",\r\n            task: {\r\n              condition: \"yes\"\r\n            }\r\n          },\r\n          {\r\n            id: \"_jsplumb_c_1593419365490\",\r\n            sourceId: \"2\",\r\n            targetId: \"4\",\r\n            task: {\r\n              condition: \"no\"\r\n            }\r\n          },\r\n          {\r\n            id: \"_jsplumb_c_1593419365491\",\r\n            sourceId: \"3\",\r\n            targetId: \"5\",\r\n            task: {}\r\n          },\r\n          {\r\n            id: \"_jsplumb_c_1593419365492\",\r\n            sourceId: \"4\",\r\n            targetId: \"5\",\r\n            task: {}\r\n          },\r\n          {\r\n            id: \"_jsplumb_c_1593419365493\",\r\n            sourceId: \"5\",\r\n            targetId: \"6\",\r\n            task: {}\r\n          },\r\n        ]\r\n      });\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n#app {\r\n  font-family: Avenir, Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  margin-top: 60px;\r\n}\r\n.type-list {\r\n  width:300px;\r\n  padding:15px;\r\n  box-sizing: border-box;\r\n  padding-right: 5px;\r\n  border-right: 1px dashed #efefef;\r\n  font-size: 14px;\r\n  text-align: left;\r\n  .con {\r\n      width: 46%;\r\n      text-align: center;\r\n      margin: 5px 2%;\r\n      border: 1px solid #efefef;\r\n      border-radius: 5px;\r\n      display: inline-block;\r\n      box-sizing:border-box;\r\n      cursor: move;\r\n      .iconfont{\r\n        font-size: #888;\r\n        font-size: 30px;\r\n        line-height: 60px;\r\n      }\r\n      .name{\r\n        color: #666;\r\n        font-size: 13px;\r\n        line-height: 36px;\r\n      }\r\n      &:hover {\r\n        background-color: #efefef;\r\n      }\r\n    }\r\n}\r\n.op-container {\r\n  position: relative;\r\n  width:1100px;\r\n  border: 1px solid #efefef;\r\n  border-radius: 5px;\r\n  margin: 0 auto;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  li {\r\n    &:hover {\r\n      background-color: #ccc;\r\n    }\r\n  }\r\n}\r\n.edit-item {\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n  bottom:0;\r\n  margin: auto;\r\n  width: 22%;\r\n  background-color: #fff;\r\n  box-shadow: -5px 0px 18px rgba(0,0,0,0.1);\r\n  z-index: 99;\r\n  padding: 15px;\r\n  box-sizing: border-box;\r\n  text-align: left;\r\n  .con{\r\n    font-size: 12px;\r\n    width: 100%;\r\n    margin-bottom: 10px;\r\n    text-align: left;\r\n    input{\r\n      width:80px;\r\n      border: 1px solid #efefef;\r\n      border-radius: 3px;\r\n      height:25px;\r\n      margin-left: 10px;\r\n      padding-left: 8px;\r\n      box-sizing: border-box;\r\n    }\r\n    select{\r\n      margin-left: 10px;\r\n      width:80px;\r\n      border: 1px solid #efefef;\r\n      border-radius: 3px;\r\n      height:25px;\r\n    }\r\n  }\r\n  .btn{\r\n      height:25px;\r\n      text-align: center;\r\n      line-height: 25px;\r\n      background: #11B4EB;\r\n      font-size: 12px;\r\n      color: #fff;\r\n      border-radius: 3px;\r\n      margin-right: 5px;\r\n      margin-bottom: 5px;\r\n      border: none;\r\n  }\r\n}\r\n.btnBox{\r\n  width:1100px;\r\n  margin: 0 auto;\r\n  text-align: left;\r\n  margin-top: 20px;\r\n  .btn{\r\n    width:100px;\r\n    height:35px;\r\n    text-align: center;\r\n    line-height: 35px;\r\n    background: #11B4EB;\r\n    color: #fff;\r\n    border-radius: 3px;\r\n    margin-right: 20px;\r\n    border: none;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=dabb6714&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\r\nimport App from './App.vue';\r\n\r\nVue.config.productionTip = false;\r\n\r\nnew Vue({\r\n  render: (h) => h(App),\r\n}).$mount('#app');\r\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=style&index=0&id=b2ad3472&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=style&index=0&id=b2ad3472&lang=less&scoped=true&\""],"sourceRoot":""}