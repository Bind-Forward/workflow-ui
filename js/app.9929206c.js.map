{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/ChartView/plugins/zoomControl/ZoomControl.vue?dcf2","webpack:///./src/components/ChartView/ChartView.vue?93c1","webpack:///./src/components/ChartView/plugins/draggableBackground/DraggableBg.vue?45de","webpack:///./src/App.vue?74c1","webpack:///./src/components/PresetNodes/DefaultFlowNode.vue?f0e7","webpack:///./src/components/PresetNodes/Demo.vue?3f90","webpack:///./src/App.vue?f0e3","webpack:///./src/components/ChartView/ChartView.vue?eb7e","webpack:///./src/components/ChartView/DrawPart.vue?f81e","webpack:///./src/components/ChartView/Item.ts","webpack:///./src/components/ChartView/NodeItem.ts","webpack:///./src/components/ChartView/EdgeItem.ts","webpack:///./src/components/ChartView/jsplumbDefaultConfig.ts","webpack:///./src/components/ChartView/utils.ts","webpack:///./src/components/ChartView/DrawPart.vue?33ef","webpack:///./src/components/ChartView/DrawPart.vue?81e8","webpack:///./src/components/ChartView/DrawPart.vue","webpack:///./src/components/ChartView/PluginLayer.vue?872b","webpack:///./src/components/ChartView/PluginLayer.vue","webpack:///./src/components/ChartView/PluginLayer.vue?9034","webpack:///./src/components/ChartView/ChartView.vue?3b00","webpack:///./src/components/ChartView/ChartView.vue?9350","webpack:///./src/components/ChartView/ChartView.vue","webpack:///./src/components/ChartView/plugins/draggableBackground/DraggableBg.vue?8259","webpack:///./src/components/ChartView/plugins/draggableBackground/DraggableBg.vue?97ad","webpack:///./src/components/ChartView/plugins/draggableBackground/DraggableBg.vue?57dd","webpack:///./src/components/ChartView/plugins/draggableBackground/DraggableBg.vue","webpack:///./src/components/ChartView/plugins/draggableBackground/index.ts","webpack:///./src/components/ChartView/plugins/zoomControl/ZoomControl.vue?04d3","webpack:///./src/components/ChartView/plugins/zoomControl/ZoomControl.vue?f809","webpack:///./src/components/ChartView/plugins/zoomControl/ZoomControl.vue?30d3","webpack:///./src/components/ChartView/plugins/zoomControl/ZoomControl.vue","webpack:///./src/components/ChartView/plugins/zoomControl/index.ts","webpack:///./src/components/ChartView/main.ts","webpack:///./src/components/PresetNodes/Demo.vue?6e52","webpack:///src/components/PresetNodes/Demo.vue","webpack:///./src/components/PresetNodes/Demo.vue?85e1","webpack:///./src/components/PresetNodes/Demo.vue","webpack:///./src/components/PresetNodes/DefaultFlowNode.vue?da35","webpack:///src/components/PresetNodes/DefaultFlowNode.vue","webpack:///./src/components/PresetNodes/DefaultFlowNode.vue?9563","webpack:///./src/components/PresetNodes/DefaultFlowNode.vue","webpack:///src/App.vue","webpack:///./src/App.vue?a7d1","webpack:///./src/App.vue","webpack:///./src/main.ts","webpack:///./src/components/ChartView/DrawPart.vue?9113"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","ref","label","onClick","node","contextMenuClick","on","nodeCreated","nodeSelected","nodeDeletedHandler","edgeSelected","edgeConnected","_v","_s","currentEditingItem","itemType","id","nodeType","directives","rawName","task","expression","domProps","$event","target","composing","$set","$$selectedVal","Array","filter","options","selected","map","val","_value","multiple","updateItem","deleteItem","printPrevNodes","staticStyle","$refs","chart","getData","staticRenderFns","style","preventHandler","dropHandler","plugins","itemBlurHandler","_l","left","x","top","y","nodeDblclickHandler","_b","tag","vm","itemInfo","uuid","jsplumbInstance","nodeInfo","setTimeout","setDefaultCfg","setDraggable","cloneNodeInfo","assign","flag","dom","classList","add","remove","common","allowLoopback","getJsplumbInstance","addEndpoint","isSource","anchors","endpoint","radius","cssClass","hoverClass","isTarget","width","height","draggable","stop","e","pos","nodes","edgeInfo","sourceId","targetId","connection","connect","setData","initOverlays","originalEvent","stopPropagation","setSelected","apiEmit","overlayId","overlayCfg","overlay","getOverlay","setLabel","addOverlay","setCondition","condition","addClass","setHover","removeClass","uuids","setOverLay","location","createEdge","MaxConnections","Connector","curviness","PaintStyle","HoverPaintStyle","stroke","strokeWidth","nextMacroTask","timeout","Promise","resolve","findNodeElement","element","parentElement","tagName","dataset","nodetype","NODE_TYPES","getInstance","importDefaults","container","setContainer","ready","info","edges","forEach","edge","params","dropEndpoint","Error","connExist","connections","some","conn","console","log","getId","getConnections","event","nodeElement","vmCfg","component","h","getPreviousNodeIds","nodeId","originNodeId","findPrevNodeIds","nId","prevIds","v","prevId","includes","payloadInterception","payload","entries","reduce","newPayload","getSize","size","PLUGINS","drawPart","reset","initNodes","initEdges","initJsplumbEvents","chartData","initChart","fnMap","deleteNode","deleteEdge","updateNode","updateEdge","getNodes","getEdges","find","currNode","prevNodeIds","getNodeById","index","findIndex","allConnections","currConn","deleteConnection","error","updateTask","currEdge","preventDefault","dataTransfer","TypeError","boundRect","$el","getBoundingClientRect","clientX","clientY","CURR_TYPES","keys","join","createNode","JSON","parse","eventName","originEvent","$emit","workSpace","pluginsVNodes","plugin","vnode","registNodeType","componentName","SFC","warn","regist","functional","render","ctx","props","default","components","DrawPart","PluginLayer","backgroundPosition","dragView","isDragging","startX","startY","nodeListStyle","deltaX","deltaY","moveHandler","leftStr","parseFloat","topStr","drawLayerDom","chartViewVm","drawLayer","position","addEventListener","mousedownHandler","mousemoveHandler","document","body","mouseupHandler","removeEventListener","bgComp","class","disabled","minusDisabled","change","defaultIncrement","zoomRate","addDisabled","delta","zoom","transform","setZoom","registPlugins","methods","compTitle","color","mainColor","borderTopColor","status","title","type","String","validator","computed","未开始","执行中","执行成功","执行失败","ChartView","menuLabel","config","productionTip","App","$mount"],"mappings":"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","file":"js/app.9929206c.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=style&index=0&id=9015bdf8&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=style&index=0&id=9015bdf8&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartView.vue?vue&type=style&index=0&id=356b60a4&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartView.vue?vue&type=style&index=0&id=356b60a4&lang=less&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DraggableBg.vue?vue&type=style&index=0&id=c3c218f8&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DraggableBg.vue?vue&type=style&index=0&id=c3c218f8&lang=less&scoped=true&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=less&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DefaultFlowNode.vue?vue&type=style&index=0&id=31412182&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DefaultFlowNode.vue?vue&type=style&index=0&id=31412182&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demo.vue?vue&type=style&index=0&id=542b64e6&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demo.vue?vue&type=style&index=0&id=542b64e6&scoped=true&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"op-container\"},[_c('ChartView',{ref:\"chart\",attrs:{\"width\":\"800px\",\"height\":\"600px\",\"contextMenuList\":[\n        { label: '删除', onClick: function (node) { return _vm.contextMenuClick(node, '删除'); } },\n        { label: '编辑', onClick: function (node) { return _vm.contextMenuClick(node, '编辑'); } }\n      ]},on:{\"node-created\":_vm.nodeCreated,\"node-dblclick\":_vm.nodeSelected,\"node-deleted\":_vm.nodeDeletedHandler,\"edge-dblclick\":_vm.edgeSelected,\"edge-connected\":_vm.edgeConnected}})],1),_c('div',{staticClass:\"edit-item\"},[_c('h2',[_vm._v(\"修改\"+_vm._s(_vm.currentEditingItem.itemType))]),_c('div',[_c('div',[_vm._v(\"id: \"+_vm._s(_vm.currentEditingItem.id))]),_c('div',[_vm._v(\"node type: \"+_vm._s(_vm.currentEditingItem.nodeType))]),_c('div',[_c('hr'),_c('h3',[_vm._v(\"task\")]),_c('br'),_c('p',[_vm._v(\" title: \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentEditingItem.task.title),expression:\"currentEditingItem.task.title\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.currentEditingItem.task.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.currentEditingItem.task, \"title\", $event.target.value)}}})]),_c('p',[_vm._v(\" condition: \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentEditingItem.task.condition),expression:\"currentEditingItem.task.condition\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.currentEditingItem.task.condition)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.currentEditingItem.task, \"condition\", $event.target.value)}}})]),_c('p',[_vm._v(\" status: \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentEditingItem.task.status),expression:\"currentEditingItem.task.status\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.currentEditingItem.task, \"status\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"未开始\"}},[_vm._v(\"未开始\")]),_c('option',{attrs:{\"value\":\"执行中\"}},[_vm._v(\"执行中\")]),_c('option',{attrs:{\"value\":\"执行失败\"}},[_vm._v(\"执行失败\")]),_c('option',{attrs:{\"value\":\"执行成功\"}},[_vm._v(\"执行成功\")])])])])]),_c('button',{on:{\"click\":function($event){return _vm.updateItem(_vm.currentEditingItem.itemType, _vm.currentEditingItem.id, _vm.currentEditingItem.task)}}},[_vm._v(\"update item\")]),_c('button',{on:{\"click\":function($event){return _vm.deleteItem(_vm.currentEditingItem.itemType, _vm.currentEditingItem.id)}}},[_vm._v(\"删除\")]),_c('button',{on:{\"click\":function($event){return _vm.printPrevNodes(_vm.currentEditingItem.id)}}},[_vm._v(\"打印前置节点\")])]),_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('button',{on:{\"click\":function($event){return _vm.$refs.chart.getData()}}},[_vm._v(\"get data\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chart-view\"},[_c('div',{ref:\"workSpace\",staticClass:\"work-space\",style:(_vm.workFlowStyle),on:{\"dragenter\":_vm.preventHandler,\"dragover\":_vm.preventHandler,\"drop\":_vm.dropHandler}},[_c('div',{staticClass:\"plugins-layer\"},[_c('plugin-layer',{attrs:{\"plugins\":_vm.plugins}})],1),_c('div',{ref:\"drawLayer\",staticClass:\"draw-layer\"},[_c('DrawPart',{ref:\"chart\",staticClass:\"node-list-container\"})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"container\",staticClass:\"draw-part\",on:{\"click\":_vm.itemBlurHandler}},_vm._l((_vm.nodes),function(node){return _c('div',{key:node.id,staticClass:\"node-item\",style:({\n      left: node.x + 'px',\n      top: node.y + 'px'\n    }),attrs:{\"id\":node.id,\"data-nodetype\":node.nodeType},on:{\"dblclick\":function($event){return _vm.nodeDblclickHandler($event, node)}}},[_c(node.nodeType,_vm._b({tag:\"component\"},'component',node.task,false))],1)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { IItem, IDrawPartVm } from './index';\nimport { jsPlumbUtil } from 'jsplumb';\nexport default abstract class Item implements IItem {\n  public id: string;\n  // 所有业务数据\n  public task: {\n    [key: string]: any\n  };\n  // 当前连线/节点是否被选择\n  public selected?: boolean = false;\n  public vm: IDrawPartVm;\n\n  constructor(vm: IDrawPartVm, itemInfo: IItem) {\n    this.id = itemInfo.id || jsPlumbUtil.uuid();\n    this.task = itemInfo.task || {};\n    this.vm = vm;\n  }\n\n  public abstract updateTask(task: object): void;\n  public abstract setSelected(flag: boolean, element: Element): void;\n\n  protected getJsplumbInstance() {\n    return this.vm.jsplumbInstance;\n  }\n}\n","import Item from './Item';\nimport cloneDeep from 'lodash/cloneDeep';\nimport { INodeItem, IDrawPartVm } from '.';\nexport default class NodeItem extends Item implements INodeItem {\n  public x: number;\n  public y: number;\n  public nodeType: string;\n  public dom?: HTMLElement; // 只要选择过此节点, 就会被记录, 在节点blur时, 可以只遍历这些被选择过的, 使其取消选择即可\n\n  constructor(vm: IDrawPartVm, nodeInfo: INodeItem) {\n    super(vm, nodeInfo);\n    // 1. 节点基本参数\n    this.x = nodeInfo.x;\n    this.y = nodeInfo.y;\n    this.nodeType = nodeInfo.nodeType;\n    // 2. 初始化图形\n    setTimeout(() => {\n      // 2.1 设置图形参数\n      this.setDefaultCfg();\n      // 2.2 设置节点可拖动\n      this.setDraggable();\n    }, 0);\n    const cloneNodeInfo = cloneDeep(nodeInfo);\n    Object.assign(this, cloneNodeInfo);\n  }\n\n  /**\n   * 更新业务数据\n   * @param task 任务\n   */\n  public updateTask(task: object) {\n    this.task = cloneDeep(task);\n  }\n\n  public setSelected(flag: boolean, dom: HTMLElement) {\n    this.dom = dom;\n    this.vm.$set(this, 'selected', flag);\n    if (flag) {\n      dom.classList.add('node-selected');\n    } else {\n      dom.classList.remove('node-selected');\n    }\n  }\n\n  /**\n   * 设置节点默认jsplumb配置\n   */\n  private setDefaultCfg(): void {\n    // 设置默认连线样式及overlays\n    const common = {\n      allowLoopback: false, // 不可回环\n    };\n    const chart = this.getJsplumbInstance();\n    // todo 这里可以从外部传入设置\n    // **添加起始点**\n    const outPoint = chart.addEndpoint(this.id, {\n      uuid: 'out-' + this.id,\n      isSource: true,\n      // @ts-ignore 有!\n      anchors: [\n        // 'Right', 'Top', 'Left', 'Bottom'\n        'Right',\n      ],\n      endpoint: ['Dot', {\n        radius: 6,\n        cssClass: 'end-point',\n        hoverClass: 'end-point-hover'\n      }]\n    }, common);\n    // **添加结束点**\n    const inPoint = chart.addEndpoint(this.id, {\n      uuid: 'in-' + this.id,\n      isTarget: true,\n      // @ts-ignore 有!\n      anchors: [\n        // 'Left', 'Top', 'Right', 'Bottom'\n        'Left',\n      ],\n      endpoint: ['Rectangle', {\n        width: 10,\n        height: 10,\n        cssClass: 'end-point',\n        hoverClass: 'end-point-hover',\n      }],\n    }, common);\n  }\n\n  /**\n   * 设置节点可拖动\n   */\n  private setDraggable(): void {\n    const chart = this.getJsplumbInstance();\n    chart.draggable(this.id, {\n      // grid: [4, 4],\n      // start: e => {\n      //   console.log('start')\n      // },\n      // 节点拖动结束位置记录\n      stop: (e: { pos: [number, number] }) => {\n        const [x, y] = e.pos;\n        this.x = x;\n        this.y = y;\n      },\n    });\n  }\n}\n\nexport function createNode(vm: IDrawPartVm, nodeInfo: INodeItem): NodeItem {\n  const node = new NodeItem(vm, nodeInfo);\n  vm.nodes.push(node);\n  return node;\n}\n","import Item from './Item';\nimport { IEdgeItem, IDrawPartVm, IItem } from '.';\nimport cloneDeep from 'lodash/cloneDeep';\nimport { Connection, OverlaySpec } from 'jsplumb';\nexport default class EdgeItem extends Item implements IEdgeItem {\n  public sourceId: string;\n  public targetId: string;\n  public connection: Connection;\n  constructor(vm: IDrawPartVm, edgeInfo: IEdgeItem) {\n    super(vm, edgeInfo);\n    this.sourceId = edgeInfo.sourceId;\n    this.targetId = edgeInfo.targetId;\n    // const cloneEdgeInfo = cloneDeep(edgeInfo);\n    // Object.assign(this, cloneEdgeInfo);\n    // jsplumb连接\n    const connection = edgeInfo.connection || this.connect(this.sourceId, this.targetId);\n    // todo 对Connection的处理\n    // @ts-ignore 🌟 有这个方法!\n    connection.setData(this); // connection.getData()  ->  Edge实例对象\n    this.connection = connection; // edge.connection   -> Connection对象\n    this.initOverlays(edgeInfo);\n    // @ts-ignore\n    connection.bind('dblclick', (e, originalEvent) => {\n      originalEvent.stopPropagation();\n      // this.selected = true\n      this.setSelected(true);\n      vm.apiEmit('edge-dblclick', this);\n    });\n  }\n\n  /**\n   * 设置connection overlay\n   * @param {string} overlayId\n   * @param {OverlaySpec} overlayCfg 参考Connection.addOverlay方法参数\n   */\n  public setOverLay(overlayId: string, overlayCfg: OverlaySpec) {\n    const overlay = this.connection.getOverlay(overlayId);\n    // 已存在此overlay\n    if (overlay) {\n      // @ts-ignore // overlay的声明文件就没写!!!!! 法克\n      overlay.setLabel(overlayCfg[1].label || '');\n    } else { // 不存在overlay\n      // @ts-ignore\n      overlayCfg[1].id = overlayCfg[1].id || overlayId;\n      // @ts-ignore\n      this.connection.addOverlay(overlayCfg);\n    }\n  }\n\n  /**\n   * 更新业务数据\n   * @param task 业务数据对象\n   */\n  public updateTask(task: IItem[\"task\"]) {\n    this.task = cloneDeep(task);\n    this.setCondition(task.condition);\n  }\n\n  /**\n   * 设置当前连线是否已选择\n   * @param {boolean}} flag 是否选择\n   */\n  public setSelected(flag: boolean) {\n    this.selected = flag;\n    if (flag) {\n      // @ts-ignore\n      this.connection.addClass('edge-selected');\n      // @ts-ignore\n      this.connection.setHover(true);\n    } else {\n      // @ts-ignore\n      this.connection.removeClass('edge-selected');\n    }\n  }\n\n  /**\n   * 连接两个节点(本质是连接endpoint)\n   * @param sourceId 来源节点id\n   * @param targetId 目标节点id\n   */\n  private connect(sourceId: string, targetId: string) {\n    return this.getJsplumbInstance().connect({\n      uuids: [\n        'out-' + sourceId,\n        'in-' + targetId\n      ]\n    });\n  }\n\n  /**\n   * 初始化 连线箭头 线上文字\n   */\n  private initOverlays(edgeInfo: IEdgeItem) {\n    // 1. 箭头\n    this.setOverLay('arrow', ['Arrow', { id: 'arrow', location: 0.95, width: 9, length: 12 }]);\n    // 2. 设置*文案* 条件\n    this.setCondition(edgeInfo.task.condition);\n  }\n\n  /**\n   * 设置边的条件值\n   * @param {string} condition 条件字符串\n   */\n  private setCondition(condition: string = '') {\n    this.task.condition = condition;\n    this.setOverLay('condition', ['Label', {\n      id: 'condition',\n      label: condition,\n      location: 0.8,\n      cssClass: 'wfui-condition-label'\n    }]);\n  }\n}\n\nexport function createEdge(vm: IDrawPartVm, edgeInfo: IEdgeItem) {\n  return new EdgeItem(vm, edgeInfo);\n}\n\n","export default {\n  MaxConnections: -1, // 最大连接数\n  // Connector: ['StateMachine', { curviness: 5 }], // 连线类型, Bezier, Flowchart, StateMachine, Straight\n  Connector: ['Bezier', { curviness: 55 }], // 连线类型, Bezier, Flowchart, StateMachine, Straight\n  PaintStyle: { 'stroke': '#345', 'strokeWidth': 2, 'stroke-dasharray': [2, 2] }, // 连线样式\n  HoverPaintStyle: { stroke: '#00abfb', strokeWidth: 5 }, // hover时连线样式\n  // ConnectionsDetachable: false, // 鼠标拖动是否会断开连线\n};\n","export function nextMacroTask(timeout: number = 0): Promise<void> {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve();\n    }, timeout);\n  });\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * 0. 注册自定义节点\n * 1. 初始化jsplumb\n * 2. 初始化节点\n * 3. 初始化连线\n */\n\nimport { Component, Prop, Vue, Inject } from 'vue-property-decorator';\nimport { FunctionalComponentOptions } from 'vue';\nimport { RecordPropsDefinition } from 'vue/types/options';\nimport { jsPlumb, jsPlumbInstance } from 'jsplumb';\nimport NodeItem, { createNode } from './NodeItem';\nimport EdgeItem, { createEdge } from './EdgeItem';\nimport defaultConfig from './jsplumbDefaultConfig';\nimport _ from 'lodash';\nimport { IDrawPart, INodeItem, IEdgeItem } from './index';\nimport { nextMacroTask } from './utils';\n\n/**\n * 找到带有data-nodetype的节点的子节点\n * 即 用户传入的节点的最外层dom\n */\nfunction findNodeElement(element: HTMLElement): HTMLElement | void {\n  const parentElement = element.parentElement;\n  if (!parentElement || element.tagName === 'BODY') {\n    return;\n  }\n  if (parentElement.dataset.nodetype) {\n    return element;\n  } else {\n    return findNodeElement(element.parentElement as HTMLElement);\n  }\n}\n\nexport const NODE_TYPES: { [name: string]: FunctionalComponentOptions } = {};\n\n@Component({})\nexport default class DrawPart extends Vue implements IDrawPart {\n  /**\n   * 0. 注册节点类型\n   * 注意: 渲染后的节点必须固定宽高\n   */\n  public static registNodeType<Props>(\n    name: string,\n    vmCfg: FunctionalComponentOptions<Props, RecordPropsDefinition<Props>>\n  ): void {\n    if (NODE_TYPES[name]) {\n      throw new Error(`此组件(${name})已存在, 请勿重复注册.`);\n    } else {\n      vmCfg.name = name;\n      NODE_TYPES[name] = vmCfg;\n      this.component(name, vmCfg);\n      console.log(NODE_TYPES, '当前已注册组件');\n    }\n  }\n\n  public nodes: NodeItem[] = [];\n\n  public jsplumbInstance: jsPlumbInstance = jsPlumb.getInstance();\n\n  @Inject('apiEmit') public apiEmit!: (evtName: string, payload?: any) => void;\n\n  /**\n   * 1. 初始化jsplumb\n   */\n  public mounted() {\n    const chart = this.jsplumbInstance;\n    // 1. 导入默认配置\n    chart.importDefaults(defaultConfig);\n    // 2. 设置container\n    const container = this.$refs.container as HTMLElement;\n    chart.setContainer(container);\n  }\n\n  /**\n   * 2. 初始化节点\n   */\n  public initNodes(nodes: INodeItem[]): Promise<void> {\n    return new Promise((resolve) => {\n      this.jsplumbInstance.ready(async () => {\n        nodes.map((info) => createNode(this, info));\n        await nextMacroTask(); // spec 注意, 这里是不得已而为之, 否则会连线失败, 猜测是endpoint渲染顺序问题\n        resolve();\n      });\n    });\n  }\n\n  /**\n   * 3. 初始化连线\n   */\n  public initEdges(edges: IEdgeItem[]): Promise<void> {\n    return new Promise((resolve) => {\n      this.jsplumbInstance.ready(() => {\n        edges.forEach((edge) => createEdge(this, edge));\n        resolve();\n      });\n    });\n  }\n\n  /**\n   * 初始化jsplumb事件\n   */\n  public initJsplumbEvents() {\n    const chart = this.jsplumbInstance;\n    const vm = this;\n    // 避免两个节点中重复拉线 😄拖动生成连线callback\n    chart.bind('beforeDrop', (params) => {\n      // @ts-ignore\n      const { dropEndpoint, connection } = params;\n      if (!dropEndpoint) {\n        throw Error('drop在作为Target的节点上了吗? check it');\n      }\n      // 已存在相同连线\n      const connExist = dropEndpoint.connections.some((conn: IEdgeItem) =>\n        (conn.targetId === connection.targetId && conn.sourceId === connection.sourceId)\n      );\n      if (connExist) {\n        return false;\n      } else {\n      // 3.2 给每个新连线生成默认值\n        createEdge(vm, {...connection, task: {}});\n        // console.log(connection, connection.getData(), 'before drop')\n        return true;\n      }\n    });\n    // 连线事件处理\n    chart.bind('connection', (info, originalEvent) => {\n      console.log('connection event');\n      const edge = createEdge(vm, {\n        // @ts-ignore\n        id: info.connection.getId(),\n        task: {},\n        sourceId: info.sourceId,\n        targetId: info.targetId,\n        connection: info.connection\n      });\n      vm.apiEmit('edge-connected', edge);\n    });\n  }\n\n  // 全局失焦处理\n  private itemBlurHandler() {\n    this.nodes.forEach((node) => {\n      // 有dom属性的, 必定被选择过, 否则未选过, 无需判断\n      if (node.dom) {\n        node.setSelected(false, node.dom);\n      }\n    });\n    // @ts-ignore\n    this.jsplumbInstance.getConnections().forEach((conn) => {\n      const edge = conn.getData();\n      edge.setSelected(false);\n    });\n  }\n\n  /**\n   * 节点双击选择事件\n   * 会给节点增加 'node-selected' class\n   */\n  private nodeDblclickHandler(event: MouseEvent, node: NodeItem) {\n    event.stopPropagation();\n    this.itemBlurHandler();\n    const nodeElement = node.dom || findNodeElement(event.target as HTMLElement);\n    if (nodeElement) {\n      node.setSelected(true, nodeElement);\n      this.apiEmit('node-dblclick', node);\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawPart.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawPart.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DrawPart.vue?vue&type=template&id=4a918eae&scoped=true&\"\nimport script from \"./DrawPart.vue?vue&type=script&lang=ts&\"\nexport * from \"./DrawPart.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DrawPart.vue?vue&type=style&index=0&id=4a918eae&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4a918eae\",\n  null\n  \n)\n\nexport default component.exports","\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport { CreateElement, VNodeChildren } from 'vue';\n\n@Component({})\nexport default class PluginLayer extends Vue {\n  @Prop()\n  public plugins!: VNodeChildren[];\n\n  public render(h: CreateElement) {\n    return h('div', this.plugins);\n  }\n}\n","var render, staticRenderFns\nimport script from \"./PluginLayer.vue?vue&type=script&lang=ts&\"\nexport * from \"./PluginLayer.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PluginLayer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PluginLayer.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Provide } from \"vue-property-decorator\";\nimport { FunctionalComponentOptions, VueConstructor, VNode } from \"vue\";\nimport { RecordPropsDefinition } from \"vue/types/options\";\nimport DrawPart, { NODE_TYPES } from \"./DrawPart.vue\";\nimport NodeItem, { createNode } from \"./NodeItem\";\nimport EdgeItem from \"./EdgeItem\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport isString from \"lodash/isString\";\nimport { INodeItem, IEdgeItem, IItem, ItemType, IWorkflowUI } from \".\";\nimport { Connection, jsPlumbInstance } from \"jsplumb\";\nimport { nextMacroTask } from \"./utils\";\nimport PluginLayer from \"./PluginLayer.vue\";\n\ninterface IChartData {\n  nodes: INodeItem[];\n  edges: IEdgeItem[];\n}\n\n/**\n * 获取此节点的前置节点, (如有回环, 不会获取到本节点)\n * @param {string} nodeId 节点id\n * @param {Array} edges 连线数组 [ {sourceId, targetId} ]\n */\nfunction getPreviousNodeIds(nodeId: string, edges: IEdgeItem[]) {\n  const result: string[] = [];\n  const originNodeId = nodeId;\n  const findPrevNodeIds = (nId: string) => {\n    const prevIds = edges.filter((edge) => edge.targetId === nId).map((v) => v.sourceId);\n    prevIds.forEach((prevId) => {\n      if (!result.includes(prevId) && prevId !== originNodeId) {\n        result.push(prevId);\n        findPrevNodeIds(prevId);\n      }\n    });\n    return result;\n  };\n  findPrevNodeIds(nodeId);\n  return result;\n}\n\n/**\n * 删除掉vm成员属性,\n * cloneDeep task\n */\nfunction payloadInterception(payload: object) {\n  return Object.entries(payload).reduce((newPayload: {[key: string]: any}, [key, value]) => {\n    if (key !== 'vm') {\n      newPayload[key] = value;\n    }\n    if (key === 'task') {\n      newPayload[key] = cloneDeep(value);\n    }\n    return newPayload;\n  }, {});\n}\n\n/**\n * 计算宽高位置\n */\nfunction getSize(size: number | string): string {\n  return typeof size === 'string' ? size : size + 'px';\n}\n\nconst PLUGINS: Array<\n  ( workSpaceDom: HTMLElement,\n    chartViewVueInstance: Vue,\n    jsplumbInstance: jsPlumbInstance) => VNode | void\n  > = [];\n\n@Component({\n  components: {\n    DrawPart,\n    PluginLayer\n  },\n})\nexport default class ChartView extends Vue implements IWorkflowUI {\n  /**\n   * 注册节点类型\n   */\n  public static registNodeTypeByRender<Props>(\n    name: string,\n    vmCfg: FunctionalComponentOptions<Props, RecordPropsDefinition<Props>>\n  ): void {\n    return DrawPart.registNodeType(name, vmCfg);\n  }\n\n  /**\n   * 通过SFC注册节点类型\n   */\n  public static registNodeType(componentName: string, SFC: VueConstructor, width?: number, height?: number) {\n    if (!width || !height) {\n      console.warn('width或height未传入, 请确保已经在组件内部固定了节点宽高');\n    }\n    const regist = DrawPart.registNodeType.bind(DrawPart);\n    regist(componentName, {\n      name: componentName,\n      functional: true,\n      render(h, ctx) {\n        let style;\n        if (width && height) {\n          style = { width: `${width}px`, height: `${height}px` };\n        }\n        const data = {\n          props: ctx.props as { [key: string]: any },\n          style\n        };\n        return h(SFC, data);\n      }\n    });\n  }\n\n  /**\n   * 注册插件\n   */\n  public static registPlugins(\n    plugins: typeof PLUGINS\n  ): void {\n    PLUGINS.push(...plugins);\n  }\n\n  /**\n   * 获取绘图板组件对象实例\n   */\n  get drawPart(): Vue & DrawPart {\n    return this.$refs.chart as Vue & DrawPart;\n  }\n\n  // 工作流dom样式\n  get workFlowStyle() {\n    return {\n      width: getSize(this.width!),\n      height: getSize(this.height!)\n    };\n  }\n\n  // 工作流组件宽度\n  @Prop({\n    default: 800\n  })\n  public width!: string | number;\n  // 工作流组件高度\n  @Prop({\n    default: 600\n  })\n  public height!: string | number;\n\n  public plugins: VNode[] = [];\n  /**\n   * 初始化数据\n   */\n  public async initChart(data: IChartData): Promise<void> {\n    const drawPart = this.drawPart;\n    drawPart.jsplumbInstance.reset();\n    drawPart.nodes = [];\n    const nodes = cloneDeep(data.nodes);\n    const edges = cloneDeep(data.edges);\n    // 必须先初始化节点, 否则连线无效\n    await drawPart.initNodes(nodes);\n    await drawPart.initEdges(edges);\n    drawPart.initJsplumbEvents();\n    return Promise.resolve();\n  }\n\n  public setData(chartData: IChartData) {\n    return this.initChart(chartData);\n  }\n\n  /**\n   * 创建节点\n   */\n  public async createNode(nodeInfo: INodeItem) {\n    const node = await createNode(this.drawPart, cloneDeep(nodeInfo));\n    await nextMacroTask(); // spec 注意, 这里是不得已而为之, 否则会连线失败, 猜测是endpoint渲染顺序问题\n    this.apiEmit(\"node-created\", node);\n  }\n\n  /**\n   * 删除节点/边\n   */\n  public deleteItem(itemType: ItemType, id: string) {\n    const fnMap = {\n      node: this.deleteNode,\n      edge: this.deleteEdge\n    };\n    return fnMap[itemType](id);\n  }\n\n  /**\n   * 更新节点/边\n   */\n  public updateItem(itemType: ItemType, id: string, task: object) {\n    const fnMap = {\n      node: this.updateNode,\n      edge: this.updateEdge\n    };\n    return fnMap[itemType](id, task);\n  }\n\n  /**\n   * 获取全部节点/连线数据\n   */\n  public getData() {\n    const nodes = this.getNodes();\n    const edges = this.getEdges();\n    return {\n      nodes: nodes.map(payloadInterception),\n      edges: edges.map(payloadInterception)\n    };\n  }\n\n  /**\n   * 根据id查询节点\n   */\n  public getNodeById(id: string): INodeItem | void {\n    const nodes = this.drawPart.nodes;\n    return nodes.find((n) => n.id === id);\n  }\n\n  /**\n   * 获取前置节点\n   * @param {string} nodeId 根据id查询节点\n   */\n  public getPreviousNodes(nodeId: string) {\n    const { nodes, edges } = this.getData();\n    const currNode = nodes.find((node) => node.id === nodeId);\n    if (!currNode) {\n      throw new Error(`当前节点(id:${nodeId})不存在`);\n    }\n    const prevNodeIds = getPreviousNodeIds(nodeId, edges as IEdgeItem[]);\n    return prevNodeIds.map(this.getNodeById);\n  }\n\n  /**\n   * 删除节点\n   */\n  private async deleteNode(id: string) {\n    const drawPart = this.drawPart;\n    // 1. 从jsplumb体系中删除此节点\n    drawPart.jsplumbInstance.remove(id);\n    // 2. 从本地数据中删除节点\n    const index = drawPart.nodes.findIndex((currNode) => currNode.id === id);\n    if (index === -1) {\n      throw new Error(`没有id: ${id}为的节点`);\n    }\n    const node = drawPart.nodes[index];\n    drawPart.nodes.splice(index, 1);\n    await nextMacroTask();\n    return node;\n  }\n\n  /**\n   * 删除连线\n   */\n  private async deleteEdge(id: string) {\n    const chart = this.drawPart.jsplumbInstance;\n    // @ts-ignore\n    const allConnections: Connection[] = chart.getConnections();\n    // @ts-ignore\n    const currConn = allConnections.filter((edge) => edge.getId() === id)[0];\n    if (currConn) {\n      chart.deleteConnection(currConn);\n    } else {\n      console.error('此id没有对应的edge');\n    }\n  }\n\n  /**\n   * 更新节点\n   */\n  private async updateNode(id: string, task: object) {\n    const drawPart = this.drawPart;\n    const currNode: NodeItem = drawPart.nodes.filter((node) => node.id === id)[0];\n    if (currNode) {\n      currNode.updateTask(cloneDeep(task));\n    } else {\n      console.error(`未获取到id为(${id})的节点`);\n    }\n    await nextMacroTask();\n    this.apiEmit(\"node-updated\", {\n      id: currNode.id,\n      nodeType: currNode.nodeType,\n      selected: currNode.selected,\n      task: currNode.task\n    });\n  }\n\n  /**\n   * 更新连线\n   */\n  private async updateEdge(id: string, task: object) {\n    // @ts-ignore\n    const allConnections: Connection[] = this.drawPart.jsplumbInstance.getConnections();\n    const currEdge = allConnections\n      // @ts-ignore\n      .map((connection) => connection.getData())\n      .filter((edge) => edge.id === id)[0];\n    if (currEdge) {\n      currEdge.updateTask(task);\n    } else {\n      console.error('此id没有对应的edge');\n    }\n  }\n\n  /**\n   * 获取全部节点\n   */\n  private getNodes(): INodeItem[] {\n    return this.drawPart.nodes.map((node) => node);\n  }\n\n  /**\n   * 获取全部连线\n   */\n  private getEdges(): IEdgeItem[] {\n    // @ts-ignore\n    const connections: Connection[] = this.drawPart.jsplumbInstance.getConnections();\n    // @ts-ignore\n    return connections.map((conn) => conn.getData());\n  }\n\n  // todo addEdge\n  /**\n   * 连接两个节点, 自动选择EndPoint\n   * 之后要做完了节点的多个EndPoint配置再写这个\n   */\n  // public async addConnection(sourceId: string, targetId: string): Connection {\n  // return\n  // }\n\n      // 节点drop事件处理\n  private dropHandler(e: DragEvent) {\n    e.preventDefault();\n    //  1. 节点视图处理\n    const nodeType = e.dataTransfer!.getData('nodeType');\n    if (!isString(nodeType)) {\n      throw new TypeError('获取节点类型失败');\n    }\n    // fix: 拖动画布后, 拖入节点不显示问题(e.toElement改变导致获取数据错误)\n    const boundRect = this.drawPart.$el.getBoundingClientRect();\n    const x = e.clientX - boundRect.x - 20;\n    const y = e.clientY - boundRect.y - 20;\n    const CURR_TYPES = Object.keys(NODE_TYPES);\n    if (!CURR_TYPES.includes(nodeType)) {\n      throw new Error(`${nodeType}节点类型未注册;\\n\\n当前已注册节点类型: [${CURR_TYPES.join(',')}]`);\n    }\n    // 2. 节点任务处理\n    const task = e.dataTransfer!.getData('task');\n    this.createNode({\n      x,\n      y,\n      nodeType,\n      task: JSON.parse(task)\n    });\n  }\n\n  private preventHandler(e: Event) {\n    // 注意: 此处阻止了以后, drop才会触发\n    e.preventDefault();\n  }\n\n  /**\n   * 触发事件, 用于给外部暴露的api事件, 所以我的方法名取的很好😁\n   */\n  @Provide()\n  private apiEmit(eventName: string, payload?: any, originEvent?: Event): void {\n    // todo 这里originEvent先留着, 也许用得上\n    // 参数拦截\n    this.$emit(eventName, payloadInterception(payload));\n  }\n\n  private mounted() {\n    const vm = this;\n    const dom = this.$refs.workSpace as HTMLElement;\n    const jsplumbInstance = this.drawPart.jsplumbInstance;\n    const pluginsVNodes = PLUGINS\n      .map((plugin) => plugin.call(this, dom, vm, jsplumbInstance))\n      .filter((vnode) => vnode);\n    this.plugins.push(...pluginsVNodes as VNode[]);\n  }\n  private beforeDestroy() {\n    this.$emit('hook:beforeDestory');\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartView.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartView.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ChartView.vue?vue&type=template&id=356b60a4&scoped=true&\"\nimport script from \"./ChartView.vue?vue&type=script&lang=ts&\"\nexport * from \"./ChartView.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ChartView.vue?vue&type=style&index=0&id=356b60a4&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"356b60a4\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./ChartView.vue?vue&type=custom&index=0&blockType=doc\"\nif (typeof block0 === 'function') block0(component)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"draggable-bg\",style:({ backgroundPosition: _vm.backgroundPosition })})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\n\n@Component\nexport default class DraggableBg extends Vue {\n\n  @Prop()\n  private chartViewVm!: Vue;\n\n  @Prop()\n  private workSpace!: HTMLElement;\n\n  private dragView = {\n    isDragging: false,\n    startX: 0,\n    startY: 0\n  };\n\n  private nodeListStyle = {\n    left: '0px',\n    top: '0px'\n  };\n\n  private drawLayerDom!: HTMLElement;\n\n  private backgroundPosition = '';\n\n  // 1. 开始拖动\n  public mousedownHandler(event: MouseEvent) {\n    this.dragView = {\n      isDragging: true,\n      startX: event.x,\n      startY: event.y\n    };\n  }\n\n  // 2. 拖动中\n  public mousemoveHandler(event: MouseEvent) {\n    if (this.dragView.isDragging) {\n      const deltaX = event.x - this.dragView.startX;\n      const deltaY = event.y - this.dragView.startY;\n      this.dragView.startX = event.x;\n      this.dragView.startY = event.y;\n      this.moveHandler(deltaX, deltaY);\n    }\n  }\n\n  // 3. 拖动结束\n  public mouseupHandler(event: MouseEvent) {\n    this.dragView.isDragging = false;\n  }\n\n  // 视图移动处理器\n  public moveHandler(x: number, y: number) {\n    const { left, top } = this.nodeListStyle;\n    const leftStr = this.nodeListStyle.left = parseFloat(left) + x + 'px';\n    const topStr = this.nodeListStyle.top = parseFloat(top) + y + 'px';\n    // 背景拖动\n    this.backgroundPosition = `left ${leftStr} top ${topStr}`;\n    // 画布拖动\n    this.drawLayerDom.style.left = leftStr;\n    this.drawLayerDom.style.top = topStr;\n  }\n\n  private mounted() {\n    // 2. 视图拖动绑定\n    const drawLayerDom = this.drawLayerDom = this.chartViewVm.$refs.drawLayer as HTMLElement;\n    drawLayerDom.style.position = 'relative';\n\n    this.workSpace.addEventListener('mousedown', this.mousedownHandler);\n    this.workSpace.addEventListener('mousemove', this.mousemoveHandler);\n    document.body.addEventListener('mouseup', this.mouseupHandler);\n  }\n\n  private beforeDestory() {\n    console.log('hook beforeDestory');\n    this.workSpace.removeEventListener('mousedown', this.mousedownHandler);\n    this.workSpace.removeEventListener('mousemove', this.mousemoveHandler);\n    document.body.removeEventListener('mouseup', this.mouseupHandler);\n  }\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DraggableBg.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DraggableBg.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DraggableBg.vue?vue&type=template&id=c3c218f8&scoped=true&\"\nimport script from \"./DraggableBg.vue?vue&type=script&lang=ts&\"\nexport * from \"./DraggableBg.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DraggableBg.vue?vue&type=style&index=0&id=c3c218f8&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c3c218f8\",\n  null\n  \n)\n\nexport default component.exports","import { jsPlumbInstance } from 'jsplumb';\nimport { VNode } from 'vue/types/umd';\nimport DraggableBg from './DraggableBg.vue';\n\nexport default function(\n  workSpace: HTMLElement,\n  chartViewVm: Vue,\n  jsplumbInstance: jsPlumbInstance\n): VNode | void {\n  // 当前在mounted hook中\n  const h = chartViewVm.$createElement;\n  // 1. 生成背景\n  const bgComp = h(DraggableBg, {\n    props: {\n      chartViewVm,\n      workSpace\n    }\n  });\n  return bgComp;\n  // const bgDom = document.createElement('div');\n  // bgDom.setAttribute('style', `\n  //   width: 10000px;\n  //   height: 10000px;\n  //   position: absolute;\n  //   left: -5000px;\n  //   top: -5000px;\n  //   background-image: linear-gradient(#eee 1px, transparent 0), linear-gradient(90deg, #eee 1px, transparent 0);\n  //   background-size: 30px 30px;\n  // `);\n  // workSpace.insertBefore(bgDom, workSpace.firstElementChild);\n\n  // 2. 视图拖动绑定\n  // const drawLayerDom = chartViewVm.$refs.drawLayer as HTMLElement;\n  // drawLayerDom.style.position = 'relative';\n  // const mousemove = mousemoveHandler.bind(null, bgDom, drawLayerDom);\n  // workSpace.addEventListener('mousedown', mousedownHandler);\n  // workSpace.addEventListener('mousemove', mousemove);\n  // document.body.addEventListener('mouseup', mouseupHandler);\n  // // 3. 视图拖动解绑\n  // chartViewVm.$on('hook:beforeDestory', () => {\n  //   console.log('hook beforeDestory');\n  //   workSpace.removeEventListener('mousedown', mousedownHandler);\n  //   workSpace.removeEventListener('mousemove', mousemove);\n  //   document.body.removeEventListener('mouseup', mouseupHandler);\n  // });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"zoom-control\"},[_c('i',{staticClass:\"iconfont iconminus\",class:['icon', { disabled: _vm.minusDisabled }],on:{\"click\":function($event){return _vm.change(-_vm.defaultIncrement)}}}),_c('span',{staticClass:\"zoom-rate\"},[_vm._v(_vm._s(_vm.zoomRate)+\"%\")]),_c('i',{staticClass:\"iconfont iconadd\",class:['icon', { disabled: _vm.addDisabled }],on:{\"click\":function($event){return _vm.change(+_vm.defaultIncrement)}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\nimport { Vue, Prop, Component } from \"vue-property-decorator\";\nimport '../../../../assets/iconfont.css';\nimport { jsPlumbInstance } from 'jsplumb';\n\n@Component\nexport default class ZoomControl extends Vue {\n  @Prop()\n  private jsplumbInstance!: jsPlumbInstance;\n  @Prop()\n  private drawLayerDom!: HTMLElement;\n\n  private defaultIncrement = 10; // 默认增量\n  private zoomRate = 100; // 缩放比例 默认100\n      // 放大缩小按钮禁用\n  private addDisabled = false;\n  private minusDisabled = false;\n\n  private change(delta: number) {\n    let zoomRate = this.zoomRate + delta;\n    if (zoomRate < 50) {\n      zoomRate = 50;\n      this.minusDisabled = true;\n    } else if (zoomRate > 200) {\n      zoomRate = 200;\n      this.addDisabled = true;\n    } else {\n      this.addDisabled = false;\n      this.minusDisabled = false;\n    }\n    this.zoomRate = zoomRate;\n    // this.$emit('zoom-change', zoomRate / 100);\n    const zoom = zoomRate / 100;\n    this.drawLayerDom.style.transform = `scale(${zoom})`;\n    this.jsplumbInstance.setZoom(zoom);\n  }\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ZoomControl.vue?vue&type=template&id=9015bdf8&scoped=true&\"\nimport script from \"./ZoomControl.vue?vue&type=script&lang=ts&\"\nexport * from \"./ZoomControl.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ZoomControl.vue?vue&type=style&index=0&id=9015bdf8&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9015bdf8\",\n  null\n  \n)\n\nexport default component.exports","import { VNode } from 'vue/types/umd';\nimport { jsPlumbInstance } from 'jsplumb';\nimport ZoomControl from './ZoomControl.vue';\n\nexport default function(\n  workSpace: HTMLElement,\n  chartViewVm: Vue,\n  jsplumbInstance: jsPlumbInstance\n): VNode | void {\n  const h = chartViewVm.$createElement;\n  const drawLayerDom = chartViewVm.$refs.drawLayer as HTMLElement;\n  const vnode =  h(ZoomControl, {\n    props: {\n      drawLayerDom,\n      jsplumbInstance\n    }\n  });\n  return vnode;\n}\n","import ChartView from './ChartView.vue';\nimport DraggableNodeType from './DraggableNodeType';\nimport DraggableBG from \"./plugins/draggableBackground\";\nimport ZoomControl from \"./plugins/zoomControl\";\n\n// @ts-ignore\nChartView.registPlugins([DraggableBG, ZoomControl]);\n\nexport const draggableNodetype = DraggableNodeType;\nexport default ChartView;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('button',{staticClass:\"log-btn\",on:{\"click\":_vm.log}},[_vm._v(\"btn\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <span>\n    <button @click=\"log\" class=\"log-btn\">btn</button>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: 'Demo',\n  props: ['compTitle'],\n  methods: {\n    log() {\n      console.log('当前组件标题: ' + this.compTitle);\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.log-btn {\n  cursor: pointer;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Demo.vue?vue&type=template&id=542b64e6&scoped=true&\"\nimport script from \"./Demo.vue?vue&type=script&lang=js&\"\nexport * from \"./Demo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Demo.vue?vue&type=style&index=0&id=542b64e6&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"542b64e6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"default-flow-node\",style:({\n    color: _vm.mainColor,\n    borderTopColor: _vm.mainColor\n  })},[_c('h4',{staticClass:\"status\",domProps:{\"textContent\":_vm._s(_vm.status)}}),_c('div',{staticClass:\"title\"},[(_vm.title)?_c('span',{domProps:{\"textContent\":_vm._s(_vm.title)}}):_c('span',{staticClass:\"placeholder\"},[_vm._v(\"请设置流程节点标题\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"default-flow-node\"\n    :style=\"{\n      color: mainColor,\n      borderTopColor: mainColor\n    }\"\n  >\n    <h4 class=\"status\" v-text=\"status\"></h4>\n    <div class=\"title\">\n      <span v-if=\"title\" v-text=\"title\"></span>\n      <span v-else class=\"placeholder\">请设置流程节点标题</span>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'DefaultFlowNode',\n  props: {\n    title: {\n      type: String,\n      default: ''\n    },\n    status: {\n      type: String,\n      default: '未开始',\n      validator(val) {\n        const flag = ['未开始', '执行中', '执行成功', '执行失败'].includes(val);\n        return flag;\n      },\n    },\n  },\n  computed: {\n    mainColor() {\n      const map = {\n        未开始: '#4c4c4b',\n        执行中: '#11b4eb',\n        执行成功: '#08c692',\n        执行失败: '#fe0001',\n      };\n      return map[this.status];\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n\n.default-flow-node {\n  width: 150px;\n  height: 80px;\n  font-size: 12px;\n  border: 2px solid #d0d6dc;\n  border-top-width: 8px;\n  border-radius: 8px;\n  background-color: #fff;\n  transition: all 0.3s ease-in;\n  &.node-selected {\n    box-shadow: 0px 0px 20px 0px #fff5d0;\n  }\n  .status {\n    padding: 5px;\n    margin: 0 10px;\n    border-bottom: 4px solid;\n  }\n  .title {\n    padding: 10px;\n    color: #4c4c4b;\n    text-align: left;\n    padding-left: 15px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DefaultFlowNode.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DefaultFlowNode.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DefaultFlowNode.vue?vue&type=template&id=31412182&scoped=true&\"\nimport script from \"./DefaultFlowNode.vue?vue&type=script&lang=js&\"\nexport * from \"./DefaultFlowNode.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DefaultFlowNode.vue?vue&type=style&index=0&id=31412182&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"31412182\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <div class=\"op-container\">\n      <!-- <div class=\"type-list\">\n        <ul>\n          <li\n            v-for=\"(item, index) in ['DemoNode', 'FlowNode', 'Test'].map(v => ({nodeType: v, task: {taskType: 'Devops'}}))\"\n            :key=\"index\"\n            class=\"node-type-item\"\n            v-draggable-nodetype=\"item\"\n          >\n            {{item.nodeType}}\n          </li>\n        </ul>\n      </div>-->\n      <ChartView\n        width=\"800px\"\n        height=\"600px\"\n        ref=\"chart\"\n        @node-created=\"nodeCreated\"\n        @node-dblclick=\"nodeSelected\"\n        @node-deleted=\"nodeDeletedHandler\"\n        @edge-dblclick=\"edgeSelected\"\n        @edge-connected=\"edgeConnected\"\n        :contextMenuList=\"[\n          { label: '删除', onClick: node => contextMenuClick(node, '删除') },\n          { label: '编辑', onClick: node => contextMenuClick(node, '编辑') }\n        ]\"\n      />\n    </div>\n    <div class=\"edit-item\">\n      <h2>修改{{currentEditingItem.itemType}}</h2>\n      <div>\n        <div>id: {{currentEditingItem.id}}</div>\n        <div>node type: {{currentEditingItem.nodeType}}</div>\n        <div>\n          <hr />\n          <h3>task</h3>\n          <br />\n          <p>\n            title:\n            <input type=\"text\" v-model=\"currentEditingItem.task.title\" />\n          </p>\n          <p>\n            condition:\n            <input type=\"text\" v-model=\"currentEditingItem.task.condition\" />\n          </p>\n          <p>\n            status:\n            <select v-model=\"currentEditingItem.task.status\">\n              <option value=\"未开始\">未开始</option>\n              <option value=\"执行中\">执行中</option>\n              <option value=\"执行失败\">执行失败</option>\n              <option value=\"执行成功\">执行成功</option>\n            </select>\n          </p>\n        </div>\n      </div>\n      <button\n        @click=\"updateItem(currentEditingItem.itemType, currentEditingItem.id, currentEditingItem.task)\"\n      >update item</button>\n      <button @click=\"deleteItem(currentEditingItem.itemType, currentEditingItem.id)\">删除</button>\n      <button @click=\"printPrevNodes(currentEditingItem.id)\">打印前置节点</button>\n    </div>\n    <div style=\"display: flex;\">\n      <button @click=\"$refs.chart.getData()\">get data</button>\n    </div>\n  </div>\n</template>\n\n<script>\n// @ts-nocheck\nimport { Component, Vue } from \"vue-property-decorator\";\nimport ChartView from \"./components/ChartView/main.ts\";\nimport Demo from \"./components/PresetNodes/Demo.vue\";\nimport FlowNode from \"./components/PresetNodes/DefaultFlowNode.vue\";\n// import DragBG from './components/ChartView/plugins/draggableBackground';\n// import HelloWorld from './components/HelloWorld.vue';\n\nChartView.registNodeTypeByRender(\"DemoNode\", {\n  name: \"DemoNode\",\n  functional: true,\n  props: {\n    title: String\n  },\n  render(h, ctx) {\n    const { title } = ctx.props;\n    return h(\n      \"div\",\n      {\n        style: {\n          width: \"200px\",\n          height: \"80px\",\n          border: \"1px solid #000\",\n          background: \"#fff\"\n        }\n      },\n      [\n        h(\"div\", \"组件类型: DemoNode\"),\n        h(\"div\", \"[prop]title: \" + title),\n        h(\"div\", [\n          h(\"span\", \"外部组件引用: \"),\n          h(Demo, {\n            props: {\n              compTitle: title\n            }\n          })\n        ])\n      ]\n    );\n  }\n});\n\nChartView.registNodeType(\"FlowNode\", FlowNode);\n\n// ChartView.registPlugins([\n//   DragBG\n// ]);\n\nexport default {\n  name: \"App\",\n  components: {\n    ChartView\n  },\n  data() {\n    return {\n      currentEditingItem: {\n        itemType: \"\", // node, edge\n        task: {}\n      }\n    };\n  },\n  methods: {\n    nodeDeletedHandler(node) {\n      console.log(\"节点被删除了\", node);\n    },\n    nodeCreated(node) {\n      console.log(node, \"created\");\n    },\n    nodeSelected(node) {\n      console.log(node, \"node dblclicked\");\n      this.currentEditingItem = Object.assign({ itemType: \"node\" }, node);\n      // more ...\n    },\n    edgeSelected(edge) {\n      console.log(edge, \"edge clicked\");\n      this.currentEditingItem = Object.assign({ itemType: \"edge\" }, edge);\n      // more ...\n    },\n    updateItem(itemType, id, task) {\n      // currentEditingItem.id, currentEditingItem.task\n      this.$refs.chart.updateItem(itemType, id, task);\n    },\n    deleteItem(itemType, id) {\n      this.$refs.chart.deleteItem(itemType, id);\n    },\n    contextMenuClick(nodeInfo, menuLabel) {\n      console.log(`右键菜单触发: ${menuLabel} --> ${nodeInfo.id}`, nodeInfo);\n      if (menuLabel === \"删除\") {\n        this.$refs.chart.deleteItem(\"node\", nodeInfo.id);\n      }\n    },\n    printPrevNodes(currNodeId) {\n      const nodes = this.$refs.chart.getPreviousNodes(currNodeId);\n      console.log(nodes);\n    },\n    edgeConnected(info) {\n      console.log(info, \"edge connected\");\n      // eslint-disable-next-line no-unused-vars\n      const { sourceId, id } = info;\n      // eslint-disable-next-line no-unused-vars\n      const chart = this.$refs.chart;\n      // const node = chart.getNodeById(sourceId)\n      // if (node.nodeType === 'SwitchNode') {\n      // setTimeout(() => {\n      // chart.updateItem('edge', id, { condition: 'yes' })\n      // }, 0)\n      // }\n    }\n  },\n  async mounted() {\n    this.$refs.chart\n      .initChart({\n        nodes: [\n          {\n            id: \"1\",\n            x: 10,\n            y: 50,\n            nodeType: \"FlowNode\",\n            task: {\n              title: \"代码管理\"\n            }\n          },\n          {\n            id: \"2\",\n            x: 300,\n            y: 52,\n            nodeType: \"FlowNode\",\n            task: {\n              title: \"构建任务\",\n              status: \"执行中\"\n            }\n          },\n          {\n            id: \"3\",\n            x: 598,\n            y: 49,\n            nodeType: \"FlowNode\",\n            task: {\n              title: \"部署管理\",\n              status: \"执行成功\"\n            }\n          },\n          {\n            id: \"4\",\n            x: 626,\n            y: 252,\n            nodeType: \"FlowNode\",\n            task: {\n              title: \"部署管理2\",\n              status: \"执行失败\"\n            }\n          },\n          {\n            id: \"c79c6f8f-8fce-4f99-92a9-94ff99c84d2a\",\n            x: 322,\n            y: 282,\n            nodeType: \"FlowNode\",\n            task: {}\n          }\n        ],\n        edges: [\n          {\n            id: \"_jsplumb_c_1593419365488\",\n            sourceId: \"1\",\n            targetId: \"2\",\n            task: {}\n          },\n          {\n            id: \"_jsplumb_c_1593419365498\",\n            sourceId: \"2\",\n            targetId: \"3\",\n            task: {\n              condition: \"yes\"\n            }\n          },\n          {\n            id: \"_jsplumb_c_1593419365502\",\n            sourceId: \"2\",\n            targetId: \"4\",\n            task: {\n              condition: \"no\"\n            }\n          },\n          {\n            id: \"_jsplumb_c_1593419365506\",\n            sourceId: \"1\",\n            targetId: \"c79c6f8f-8fce-4f99-92a9-94ff99c84d2a\",\n            task: {}\n          },\n          {\n            id: \"_jsplumb_c_1593419365508\",\n            sourceId: \"c79c6f8f-8fce-4f99-92a9-94ff99c84d2a\",\n            targetId: \"4\",\n            task: {}\n          }\n        ]\n      })\n      .then(() => {\n        console.log(\"chart init done\");\n        this.$refs.chart.createNode({\n          nodeType: \"FlowNode\",\n          x: 300,\n          y: 300,\n          task: {}\n        });\n        setTimeout(() => {\n          // alert('change')\n          // return\n          // eslint-disable-next-line no-unreachable\n          // this.$refs.chart.setData({\n          //   nodes: [\n          //     {\n          //       id: '1',\n          //       x: 64,\n          //       y: 86,\n          //       nodeType: 'FlowNode',\n          //       task: {\n          //         title: '代码管理'\n          //       }\n          //     },\n          //     {\n          //       id: '2',\n          //       x: 332,\n          //       y: 68,\n          //       nodeType: 'FlowNode',\n          //       task: {\n          //         title: '构建任务',\n          //         status: '执行中'\n          //       }\n          //     },\n          //     {\n          //       id: '3',\n          //       x: 598,\n          //       y: 49,\n          //       nodeType: 'FlowNode',\n          //       task: {\n          //         title: '部署管理',\n          //         status: '执行成功'\n          //       }\n          //     }\n          //   ],\n          //   edges: [\n          //     {\n          //       id: '_jsplumb_c_1594877574079',\n          //       sourceId: '1',\n          //       targetId: '2',\n          //       task: {}\n          //     },\n          //     {\n          //       id: '_jsplumb_c_1594877574084',\n          //       sourceId: '2',\n          //       targetId: '3',\n          //       task: {\n          //         condition: 'yes'\n          //       }\n          //     }\n          //   ]\n          // })\n        }, 3000);\n      });\n  }\n};\n</script>\n\n<style lang=\"less\">\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n.op-container {\n  display: flex;\n  li {\n    &:hover {\n      background-color: #ccc;\n    }\n  }\n}\n.edit-item {\n  position: fixed;\n  right: 0;\n  top: 0;\n  width: 22%;\n  height: 100vh;\n  background-color: #fff;\n  box-shadow: 0 0 10px 10px #ccc;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=08c02d88&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport App from './App.vue';\n\nVue.config.productionTip = false;\n\nnew Vue({\n  render: (h) => h(App),\n}).$mount('#app');\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawPart.vue?vue&type=style&index=0&id=4a918eae&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawPart.vue?vue&type=style&index=0&id=4a918eae&lang=less&scoped=true&\""],"sourceRoot":""}